# å¯¹åŠ¨æ€è§„åˆ’è¿›è¡Œé™ç»´æ‰“å‡»



![](https://labuladong.online/algo/images/souyisou1.png)

**é€šçŸ¥ï¼šä¸ºæ»¡è¶³å¹¿å¤§è¯»è€…çš„éœ€æ±‚ï¼Œç½‘ç«™ä¸Šæ¶ [é€Ÿæˆç›®å½•](https://labuladong.online/algo/intro/quick-learning-plan/)ï¼Œå¦‚æœ‰éœ€è¦å¯ä»¥çœ‹ä¸‹ï¼Œè°¢è°¢å¤§å®¶çš„æ”¯æŒ~å¦å¤–ï¼Œå»ºè®®ä½ åœ¨æˆ‘çš„ [ç½‘ç«™](https://labuladong.online/algo/) å­¦ä¹ æ–‡ç« ï¼Œä½“éªŒæ›´å¥½ã€‚**



**-----------**



> [!NOTE]
> é˜…è¯»æœ¬æ–‡å‰ï¼Œä½ éœ€è¦å…ˆå­¦ä¹ ï¼š
> 
> - [åŠ¨æ€è§„åˆ’æ ¸å¿ƒæ¡†æ¶](https://labuladong.online/algo/essential-technique/dynamic-programming-framework/)

> [!NOTE]
> ç©ºé—´å‹ç¼©å¹¶ä¸éš¾ï¼Œä¸»è¦ç”¨æ¥ä¼˜åŒ–æŸäº›åŠ¨æ€è§„åˆ’é—®é¢˜çš„ç©ºé—´å¤æ‚åº¦ã€‚ä½†æ˜¯ä¸€èˆ¬çš„ç¬”è¯•ä¸­å¯¹ç©ºé—´çš„è¦æ±‚å¹¶ä¸é«˜ï¼Œå³ä¾¿ä¸ä½¿ç”¨è¿™ä¸ªä¼˜åŒ–æŠ€å·§ä¹Ÿèƒ½é€šè¿‡ï¼Œæ‰€ä»¥æˆ‘ä¸ªäººè®¤ä¸ºçŠ¶æ€å‹ç¼©å¹¶ä¸æ˜¯å¿…é¡»æŒæ¡çš„æŠ€å·§ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥ä»”ç»†å­¦ä¹ ç†è§£ä¸€ä¸‹ã€‚

æˆ‘ä»¬å·ä¹‹å‰å†™è¿‡åå‡ ç¯‡åŠ¨æ€è§„åˆ’æ–‡ç« ï¼Œå¯ä»¥è¯´åŠ¨æ€è§„åˆ’æŠ€å·§å¯¹äºç®—æ³•æ•ˆç‡çš„æå‡éå¸¸å¯è§‚ï¼Œä¸€èˆ¬æ¥è¯´éƒ½èƒ½æŠŠæŒ‡æ•°çº§å’Œé˜¶ä¹˜çº§æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•ä¼˜åŒ–æˆ O(N^2)ï¼Œå ªç§°ç®—æ³•ç•Œçš„äºŒå‘ç®”ï¼ŒæŠŠå„è·¯é­‘é­…é­é­‰ç»Ÿç»Ÿæ‰“æˆäºŒæ¬¡å…ƒã€‚

ä½†æ˜¯ï¼ŒåŠ¨æ€è§„åˆ’æ±‚è§£çš„è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œé˜¶æ®µæ€§ä¼˜åŒ–çš„ï¼Œå¦‚æœä½ è®¤çœŸè§‚å¯ŸæŸäº›åŠ¨æ€è§„åˆ’é—®é¢˜çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå°±èƒ½å¤ŸæŠŠå®ƒä»¬è§£æ³•çš„ç©ºé—´å¤æ‚åº¦è¿›ä¸€æ­¥é™ä½ï¼Œç”± O(N^2) é™ä½åˆ° O(N)ã€‚







> [!NOTE]
> ä¹‹å‰æˆ‘åœ¨æœ¬æ–‡ä¸­è¯¯ç”¨äº†ã€ŒçŠ¶æ€å‹ç¼©ã€è¿™ä¸ªè¯ï¼Œæœ‰è¯»è€…æŒ‡å‡ºã€ŒçŠ¶æ€å‹ç¼©ã€è¿™ä¸ªè¯çš„å«ä¹‰æ˜¯æŠŠå¤šä¸ªçŠ¶æ€é€šè¿‡äºŒè¿›åˆ¶è¿ç®—ç”¨ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºå‡ºæ¥ï¼Œä»è€Œå‡å°‘ `dp` æ•°ç»„çš„ç»´åº¦ã€‚è€Œæœ¬æ–‡æè¿°çš„ä¼˜åŒ–æ–¹å¼æ˜¯é€šè¿‡è§‚å¯ŸçŠ¶æ€è½¬ç§»æ–¹ç¨‹çš„ä¾èµ–å…³ç³»ï¼Œä»è€Œå‡å°‘ `dp` æ•°ç»„çš„ç»´åº¦ï¼Œç¡®å®å’Œã€ŒçŠ¶æ€å‹ç¼©ã€æœ‰æ‰€åŒºåˆ«ã€‚æ‰€ä»¥ä¸¥è°¨èµ·è§ï¼Œæˆ‘æŠŠåŸæ¥æ–‡ç« ä¸­çš„ã€ŒçŠ¶æ€å‹ç¼©ã€éƒ½æ”¹ä¸ºäº†ã€Œç©ºé—´å‹ç¼©ã€ï¼Œé¿å…åè¯çš„è¯¯ç”¨ã€‚

èƒ½å¤Ÿä½¿ç”¨ç©ºé—´å‹ç¼©æŠ€å·§çš„åŠ¨æ€è§„åˆ’éƒ½æ˜¯äºŒç»´ `dp` é—®é¢˜ï¼Œ**ä½ çœ‹å®ƒçš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå¦‚æœè®¡ç®—çŠ¶æ€ `dp[i][j]` éœ€è¦çš„éƒ½æ˜¯ `dp[i][j]` ç›¸é‚»çš„çŠ¶æ€ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ç©ºé—´å‹ç¼©æŠ€å·§**ï¼Œå°†äºŒç»´çš„ `dp` æ•°ç»„è½¬åŒ–æˆä¸€ç»´ï¼Œå°†ç©ºé—´å¤æ‚åº¦ä» O(N^2) é™ä½åˆ° O(N)ã€‚

ä»€ä¹ˆå«ã€Œå’Œ `dp[i][j]` ç›¸é‚»çš„çŠ¶æ€ã€å‘¢ï¼Œæ¯”å¦‚å‰æ–‡ [æœ€é•¿å›æ–‡å­åºåˆ—](https://labuladong.online/algo/dynamic-programming/subsequence-problem/) ä¸­ï¼Œæœ€ç»ˆçš„ä»£ç å¦‚ä¸‹ï¼š

```java
int longestPalindromeSubseq(String s) {
    int n = s.length();
    // dp æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º 0
    int[][] dp = new int[n][n];
    // base case
    for (int i = 0; i < n; i++) {
        dp[i][i] = 1;
    }
    // åç€éå†ä¿è¯æ­£ç¡®çš„çŠ¶æ€è½¬ç§»
    for (int i = n - 1; i >= 0; i--) {
        for (int j = i + 1; j < n; j++) {
            // çŠ¶æ€è½¬ç§»æ–¹ç¨‹
            if (s.charAt(i) == s.charAt(j)) {
                dp[i][j] = dp[i + 1][j - 1] + 2;
            } else {
                dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1]);
            }
        }
    }
    // æ•´ä¸ª s çš„æœ€é•¿å›æ–‡å­ä¸²é•¿åº¦
    return dp[0][n - 1];
}
```

> [!TIP]
> æˆ‘ä»¬æœ¬æ–‡ä¸æ¢è®¨å¦‚ä½•æ¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œåªæ¢è®¨å¯¹äºŒç»´ DP é—®é¢˜è¿›è¡Œç©ºé—´å‹ç¼©çš„æŠ€å·§ã€‚æŠ€å·§éƒ½æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥å¦‚æœä½ æ²¡çœ‹è¿‡å‰æ–‡ï¼Œä¸æ˜ç™½è¿™æ®µä»£ç çš„é€»è¾‘ä¹Ÿæ— å¦¨ï¼Œå®Œå…¨ä¸ä¼šé˜»ç¢ä½ å­¦ä¼šç©ºé—´å‹ç¼©ã€‚

ä½ çœ‹æˆ‘ä»¬å¯¹ `dp[i][j]` çš„æ›´æ–°ï¼Œå…¶å®åªä¾èµ–äº `dp[i+1][j-1], dp[i][j-1], dp[i+1][j]` è¿™ä¸‰ä¸ªçŠ¶æ€ï¼š

![](https://labuladong.online/algo/images/space-optimal/1.jpeg)

è¿™å°±å«å’Œ `dp[i][j]` ç›¸é‚»ï¼Œåæ­£ä½ è®¡ç®— `dp[i][j]` åªéœ€è¦è¿™ä¸‰ä¸ªç›¸é‚»çŠ¶æ€ï¼Œå…¶å®æ ¹æœ¬ä¸éœ€è¦é‚£ä¹ˆå¤§ä¸€ä¸ªäºŒç»´çš„ dp table å¯¹ä¸å¯¹ï¼Ÿ**ç©ºé—´å‹ç¼©çš„æ ¸å¿ƒæ€è·¯å°±æ˜¯ï¼Œå°†äºŒç»´æ•°ç»„ã€ŒæŠ•å½±ã€åˆ°ä¸€ç»´æ•°ç»„**ï¼š

![](https://labuladong.online/algo/images/space-optimal/2.jpeg)

ã€ŒæŠ•å½±ã€è¿™ä¸ªè¯åº”è¯¥æ¯”è¾ƒå½¢è±¡å§ï¼Œè¯´ç™½äº†å°±æ˜¯å¸Œæœ›è®©ä¸€ç»´æ•°ç»„å‘æŒ¥åŸæ¥äºŒç»´æ•°ç»„çš„ä½œç”¨ã€‚

æ€è·¯å¾ˆç›´è§‚ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ä¸ªæ˜æ˜¾çš„é—®é¢˜ï¼Œå›¾ä¸­ `dp[i][j-1]` å’Œ `dp[i+1][j-1]` è¿™ä¸¤ä¸ªçŠ¶æ€å¤„åœ¨åŒä¸€åˆ—ï¼Œè€Œä¸€ç»´æ•°ç»„ä¸­åªèƒ½å®¹ä¸‹ä¸€ä¸ªï¼Œé‚£ä¹ˆä»–ä¿©æŠ•å½±åˆ°ä¸€ç»´å¿…ç„¶æœ‰ä¸€ä¸ªä¼šè¢«å¦ä¸€ä¸ªè¦†ç›–æ‰ï¼Œæˆ‘è¿˜æ€ä¹ˆè®¡ç®— `dp[i][j]` å‘¢ï¼Ÿ

è¿™å°±æ˜¯ç©ºé—´å‹ç¼©çš„éš¾ç‚¹ï¼Œä¸‹é¢å°±æ¥åˆ†æè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿˜æ˜¯æ‹¿ã€Œæœ€é•¿å›æ–‡å­åºåˆ—ã€é—®é¢˜ä¸¾ä¾‹ï¼Œå®ƒçš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸»è¦é€»è¾‘å°±æ˜¯å¦‚ä¸‹è¿™æ®µä»£ç ï¼š





```java
for (int i = n - 2; i >= 0; i--) {
    for (int j = i + 1; j < n; j++) {
        // çŠ¶æ€è½¬ç§»æ–¹ç¨‹
        if (s.charAt(i) == s.charAt(j)) {
            dp[i][j] = dp[i + 1][j - 1] + 2;
        } else {
            dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1]);
        }
    }
}
```



å›æƒ³ä¸Šé¢çš„å›¾ï¼Œã€ŒæŠ•å½±ã€å…¶å®å°±æ˜¯æŠŠå¤šè¡Œå˜æˆä¸€è¡Œï¼Œæ‰€ä»¥æƒ³æŠŠäºŒç»´ `dp` æ•°ç»„å‹ç¼©æˆä¸€ç»´ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯æŠŠç¬¬ä¸€ä¸ªç»´åº¦ï¼Œä¹Ÿå°±æ˜¯ `i` è¿™ä¸ªç»´åº¦å»æ‰ï¼Œåªå‰©ä¸‹ `j` è¿™ä¸ªç»´åº¦ã€‚**å‹ç¼©åçš„ä¸€ç»´ `dp` æ•°ç»„å°±æ˜¯ä¹‹å‰äºŒç»´ `dp` æ•°ç»„çš„ `dp[i][..]` é‚£ä¸€è¡Œ**ã€‚

æˆ‘ä»¬å…ˆå°†ä¸Šè¿°ä»£ç è¿›è¡Œæ”¹é€ ï¼Œç›´æ¥æ— è„‘å»æ‰ `i` è¿™ä¸ªç»´åº¦ï¼ŒæŠŠ `dp` æ•°ç»„å˜æˆä¸€ç»´ï¼š





```java
for (int i = n - 2; i >= 0; i--) {
    for (int j = i + 1; j < n; j++) {
        // åœ¨è¿™é‡Œï¼Œä¸€ç»´ dp æ•°ç»„ä¸­çš„æ•°æ˜¯ä»€ä¹ˆï¼Ÿ
        if (s.charAt(i) == s.charAt(j)) {
            dp[j] = dp[j - 1] + 2;
        } else {
            dp[j] = Math.max(dp[j], dp[j - 1]);
        }
    }
}
```



ä¸Šè¿°ä»£ç çš„ä¸€ç»´ `dp` æ•°ç»„åªèƒ½è¡¨ç¤ºäºŒç»´ `dp` æ•°ç»„çš„ä¸€è¡Œ `dp[i][..]`ã€‚ä½†æ˜¯æˆ‘ä»¬æƒ³å¾—åˆ° `dp[i+1][j-1], dp[i][j-1], dp[i+1][j]` è¿™å‡ ä¸ªå¿…è¦çš„çš„å€¼è¿›è¡ŒçŠ¶æ€è½¬ç§»ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬è¦å…ˆæ¥æ€è€ƒä¸¤ä¸ªé—®é¢˜ï¼š

1ã€åœ¨å¯¹ `dp[j]` èµ‹æ–°å€¼ä¹‹å‰ï¼Œ`dp[j]` å¯¹åº”ç€äºŒç»´ `dp` æ•°ç»„ä¸­çš„ä»€ä¹ˆä½ç½®ï¼Ÿ

2ã€`dp[j-1]` å¯¹åº”ç€äºŒç»´ `dp` æ•°ç»„ä¸­çš„ä»€ä¹ˆä½ç½®ï¼Ÿ

**å¯¹äºé—®é¢˜ 1ï¼Œåœ¨å¯¹ `dp[j]` èµ‹æ–°å€¼ä¹‹å‰ï¼Œ`dp[j]` çš„å€¼å°±æ˜¯å¤–å±‚ for å¾ªç¯ä¸Šä¸€æ¬¡è¿­ä»£ç®—å‡ºæ¥çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”äºŒç»´ `dp` æ•°ç»„ä¸­ `dp[i+1][j]` çš„ä½ç½®**ã€‚

**å¯¹äºé—®é¢˜ 2ï¼Œ`dp[j-1]` çš„å€¼å°±æ˜¯å†…å±‚ for å¾ªç¯ä¸Šä¸€æ¬¡è¿­ä»£ç®—å‡ºæ¥çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”äºŒç»´ `dp` æ•°ç»„ä¸­ `dp[i][j-1]` çš„ä½ç½®**ã€‚

é‚£ä¹ˆé—®é¢˜å·²ç»è§£å†³äº†ä¸€å¤§åŠäº†ï¼Œåªå‰©ä¸‹äºŒç»´ `dp` æ•°ç»„ä¸­çš„ `dp[i+1][j-1]` è¿™ä¸ªçŠ¶æ€æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä»ä¸€ç»´ `dp` æ•°ç»„ä¸­å¾—åˆ°ï¼š





```java
for (int i = n - 2; i >= 0; i--) {
    for (int j = i + 1; j < n; j++) {
        if (s.charAt(i) == s.charAt(j)) {
            // dp[i][j] = dp[i+1][j-1] + 2;
            dp[j] = ?? + 2;
        } else {
            // dp[i][j] = max(dp[i+1][j], dp[i][j-1]);
            dp[j] = Math.max(dp[j], dp[j - 1]);
        }
    }
}
```



å› ä¸º for å¾ªç¯éå† `i` å’Œ `j` çš„é¡ºåºä¸ºä»å·¦å‘å³ï¼Œä»ä¸‹å‘ä¸Šï¼Œæ‰€ä»¥å¯ä»¥å‘ç°ï¼Œåœ¨æ›´æ–°ä¸€ç»´ `dp` æ•°ç»„çš„æ—¶å€™ï¼Œ`dp[i+1][j-1]` ä¼šè¢« `dp[i][j-1]` è¦†ç›–æ‰ï¼Œå›¾ä¸­æ ‡å‡ºäº†è¿™å››ä¸ªä½ç½®è¢«éå†åˆ°çš„æ¬¡åºï¼š

![](https://labuladong.online/algo/images/space-optimal/3.jpeg)

**é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³å¾—åˆ° `dp[i+1][j-1]`ï¼Œå°±å¿…é¡»åœ¨å®ƒè¢«è¦†ç›–ä¹‹å‰ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡ `temp` æŠŠå®ƒå­˜èµ·æ¥ï¼Œå¹¶æŠŠè¿™ä¸ªå˜é‡çš„å€¼ä¿ç•™åˆ°è®¡ç®— `dp[i][j]` çš„æ—¶å€™**ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œç»“åˆä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ä»£ç ï¼š





```java
for (int i = n - 2; i >= 0; i--) {
    // å­˜å‚¨ dp[i+1][j-1] çš„å˜é‡
    int pre = 0;
    for (int j = i + 1; j < n; j++) {
        int temp = dp[j];
        if (s.charAt(i) == s.charAt(j)) {
            // dp[i][j] = dp[i+1][j-1] + 2;
            dp[j] = pre + 2;
        } else {
            dp[j] = Math.max(dp[j], dp[j - 1]);
        }
        // åˆ°ä¸‹ä¸€è½®å¾ªç¯ï¼Œpre å°±æ˜¯ dp[i+1][j-1] äº†
        pre = temp;
    }
}
```



åˆ«å°çœ‹è¿™æ®µä»£ç ï¼Œè¿™æ˜¯ä¸€ç»´ `dp` æœ€ç²¾å¦™çš„åœ°æ–¹ï¼Œä¼šè€…ä¸éš¾ï¼Œéš¾è€…ä¸ä¼šã€‚ä¸ºäº†æ¸…æ™°èµ·è§ï¼Œæˆ‘ç”¨å…·ä½“çš„æ•°å€¼æ¥æ‹†è§£è¿™ä¸ªé€»è¾‘ï¼š

å‡è®¾ç°åœ¨ `i = 5, j = 7` ä¸” `s[5] == s[7]`ï¼Œé‚£ä¹ˆç°åœ¨ä¼šè¿›å…¥ä¸‹é¢è¿™ä¸ªé€»è¾‘å¯¹å§ï¼š





```java
for (int i = 5; i--) {
    for (int j = 7; j++) {
        if (s[5] == s[7]) {
            // dp[5][7] = dp[i+1][j-1] + 2;
            dp[7] = pre + 2;
        }
    }
}
```



æˆ‘é—®ä½ è¿™ä¸ª `pre` å˜é‡æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å†…å±‚ for å¾ªç¯ä¸Šä¸€æ¬¡è¿­ä»£çš„ `temp` å€¼ã€‚

é‚£æˆ‘å†é—®ä½ **å†…å±‚** for å¾ªç¯ä¸Šä¸€æ¬¡è¿­ä»£çš„ `temp` å€¼æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ `dp[j-1]` ä¹Ÿå°±æ˜¯ `dp[6]`ï¼Œä½†è¯·æ³¨æ„ï¼Œè¿™æ˜¯**å¤–å±‚** for å¾ªç¯**ä¸Šä¸€æ¬¡è¿­ä»£**å¯¹åº”çš„ `dp[6]`ï¼Œä¸æ˜¯ç°åœ¨çš„ `dp[6]`ã€‚

è¿™ä¸ªè¦å¯¹åº”äºŒç»´æ•°ç»„çš„ç´¢å¼•æ¥ç†è§£ã€‚ä½ ç°åœ¨çš„ `dp[6]` æ˜¯äºŒç»´ `dp` æ•°ç»„ä¸­çš„ `dp[i][6] = dp[5][6]`ï¼Œè€Œäººå®¶è¿™ä¸ª `temp` æ˜¯äºŒç»´ `dp` æ•°ç»„ä¸­çš„ `dp[i+1][6] = dp[6][6]`ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œ`pre` å˜é‡å°±æ˜¯ `dp[i+1][j-1] = dp[6][6]`ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚

é‚£ä¹ˆç°åœ¨æˆ‘ä»¬æˆåŠŸå¯¹çŠ¶æ€è½¬ç§»æ–¹ç¨‹è¿›è¡Œäº†é™ç»´æ‰“å‡»ï¼Œç®—æ˜¯æœ€ç¡¬çš„çš„éª¨å¤´å•ƒæ‰äº†ï¼Œä½†æ³¨æ„åˆ°æˆ‘ä»¬è¿˜æœ‰ base case è¦å¤„ç†å‘€ï¼š

```java
// dp æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º 0
int[][] dp = new int[n][n];
// base case
for (int i = 0; i < n; i++) {
    dp[i][i] = 1;
}
```

å¦‚ä½•æŠŠ base case ä¹Ÿæ‰“æˆä¸€ç»´å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œè®°ä½ç©ºé—´å‹ç¼©å°±æ˜¯æŠ•å½±ï¼Œæˆ‘ä»¬æŠŠ base case æŠ•å½±åˆ°ä¸€ç»´çœ‹çœ‹ï¼š

![](https://labuladong.online/algo/images/space-optimal/4.jpeg)

äºŒç»´ `dp` æ•°ç»„ä¸­çš„ base case å…¨éƒ½è½å…¥äº†ä¸€ç»´ `dp` æ•°ç»„ï¼Œä¸å­˜åœ¨å†²çªå’Œè¦†ç›–ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬ç›´æ¥è¿™æ ·å†™ä»£ç å°±è¡Œäº†ï¼š

```java
// base caseï¼šä¸€ç»´ dp æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º 1
int[] dp = new int[n];
Arrays.fill(dp, 1);
```

è‡³æ­¤ï¼Œæˆ‘ä»¬æŠŠ base case å’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹éƒ½è¿›è¡Œäº†é™ç»´ï¼Œå®é™…ä¸Šå·²ç»å†™å‡ºå®Œæ•´ä»£ç äº†ï¼š

```java
class Solution {
    public int longestPalindromeSubseq(String s) {
        int n = s.length();
        // base caseï¼šä¸€ç»´ dp æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º 1
        int[] dp = new int[n];
        Arrays.fill(dp, 1);

        for (int i = n - 2; i >= 0; i--) {
            int pre = 0;
            for (int j = i + 1; j < n; j++) {
                int temp = dp[j];
                // çŠ¶æ€è½¬ç§»æ–¹ç¨‹
                if (s.charAt(i) == s.charAt(j))
                    dp[j] = pre + 2;
                else
                    dp[j] = Math.max(dp[j], dp[j - 1]);
                pre = temp;
            }
        }
        return dp[n - 1];
    }
}
```

æœ¬æ–‡å°±ç»“æŸäº†ï¼Œä¸è¿‡ç©ºé—´å‹ç¼©æŠ€å·§å†ç‰›é€¼ï¼Œä¹Ÿæ˜¯åŸºäºå¸¸è§„åŠ¨æ€è§„åˆ’æ€è·¯ä¹‹ä¸Šçš„ã€‚

ä½ ä¹Ÿçœ‹åˆ°äº†ï¼Œä½¿ç”¨ç©ºé—´å‹ç¼©æŠ€å·§å¯¹äºŒç»´ `dp` æ•°ç»„è¿›è¡Œé™ç»´æ‰“å‡»ä¹‹åï¼Œè§£æ³•ä»£ç çš„å¯è¯»æ€§å˜å¾—éå¸¸å·®äº†ï¼Œå¦‚æœç›´æ¥çœ‹è¿™ç§è§£æ³•ï¼Œä»»ä½•äººéƒ½æ˜¯ä¸€è„¸æ‡µé€¼çš„ã€‚ç®—æ³•çš„ä¼˜åŒ–å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼Œå…ˆå†™å‡ºå¯è¯»æ€§å¾ˆå¥½çš„æš´åŠ›é€’å½’ç®—æ³•ï¼Œç„¶åå°è¯•è¿ç”¨åŠ¨æ€è§„åˆ’æŠ€å·§ä¼˜åŒ–é‡å å­é—®é¢˜ï¼Œæœ€åå°è¯•ç”¨ç©ºé—´å‹ç¼©æŠ€å·§ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æœ€èµ·ç èƒ½å¤Ÿç†Ÿç»ƒè¿ç”¨æˆ‘ä»¬å‰æ–‡ [åŠ¨æ€è§„åˆ’æ¡†æ¶å¥—è·¯è¯¦è§£](https://labuladong.online/algo/essential-technique/dynamic-programming-framework/) çš„å¥—è·¯æ‰¾å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå†™å‡ºä¸€ä¸ªæ­£ç¡®çš„åŠ¨æ€è§„åˆ’è§£æ³•ï¼Œç„¶åæ‰æœ‰å¯èƒ½è§‚å¯ŸçŠ¶æ€è½¬ç§»çš„æƒ…å†µï¼Œåˆ†ææ˜¯å¦å¯èƒ½ä½¿ç”¨ç©ºé—´å‹ç¼©æŠ€å·§æ¥ä¼˜åŒ–ã€‚

å¸Œæœ›è¯»è€…èƒ½å¤Ÿç¨³æ‰ç¨³æ‰“ï¼Œå±‚å±‚é€’è¿›ï¼Œå¯¹äºè¿™ç§æ¯”è¾ƒæé™çš„ä¼˜åŒ–ï¼Œä¸åšä¹Ÿç½¢ã€‚æ¯•ç«Ÿå¥—è·¯å­˜äºå¿ƒï¼Œèµ°éå¤©ä¸‹éƒ½ä¸æ€•ï¼







<hr>
<details class="hint-container details">
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„æ–‡ç« </strong></summary>

 - [ä¸€ä¸ªæ–¹æ³•å›¢ç­ LeetCode è‚¡ç¥¨ä¹°å–é—®é¢˜](https://labuladong.online/algo/dynamic-programming/stock-problem-summary/)
 - [åŠ¨æ€è§„åˆ’ä¹‹æœ€å°è·¯å¾„å’Œ](https://labuladong.online/algo/dynamic-programming/minimum-path-sum/)
 - [åŠ¨æ€è§„åˆ’è§£é¢˜å¥—è·¯æ¡†æ¶](https://labuladong.online/algo/essential-technique/dynamic-programming-framework/)
 - [åŠ¨æ€è§„åˆ’è®¾è®¡ï¼šæœ€å¤§å­æ•°ç»„](https://labuladong.online/algo/dynamic-programming/maximum-subarray/)
 - [å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çš„æ¡†æ¶æ€ç»´](https://labuladong.online/algo/essential-technique/algorithm-summary/)
 - [ç»å…¸åŠ¨æ€è§„åˆ’ï¼šå­é›†èƒŒåŒ…é—®é¢˜](https://labuladong.online/algo/dynamic-programming/knapsack2/)
 - [ç»å…¸åŠ¨æ€è§„åˆ’ï¼šå®Œå…¨èƒŒåŒ…é—®é¢˜](https://labuladong.online/algo/dynamic-programming/knapsack3/)
 - [ç»å…¸åŠ¨æ€è§„åˆ’ï¼šæœ€é•¿å…¬å…±å­åºåˆ—](https://labuladong.online/algo/dynamic-programming/longest-common-subsequence/)
 - [ç»å…¸åŠ¨æ€è§„åˆ’ï¼šé«˜æ¥¼æ‰”é¸¡è›‹](https://labuladong.online/algo/dynamic-programming/egg-drop/)

</details><hr>




<hr>
<details class="hint-container details">
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„é¢˜ç›®</strong></summary>

<strong>å®‰è£… [æˆ‘çš„ Chrome åˆ·é¢˜æ’ä»¶](https://labuladong.online/algo/intro/chrome/) ç‚¹å¼€ä¸‹åˆ—é¢˜ç›®å¯ç›´æ¥æŸ¥çœ‹è§£é¢˜æ€è·¯ï¼š</strong>

| LeetCode | åŠ›æ‰£ | éš¾åº¦ |
| :----: | :----: | :----: |
| [63. Unique Paths II](https://leetcode.com/problems/unique-paths-ii/?show=1) | [63. ä¸åŒè·¯å¾„ II](https://leetcode.cn/problems/unique-paths-ii/?show=1) | ğŸŸ  |

</details>
<hr>



**ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿**



![](https://labuladong.online/algo/images/souyisou2.png)