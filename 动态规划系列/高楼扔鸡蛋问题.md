# ç»å…¸åŠ¨æ€è§„åˆ’é—®é¢˜ï¼šé«˜æ¥¼æ‰”é¸¡è›‹

<p align='center'>
<a href="https://github.com/labuladong/fucking-algorithm" target="view_window"><img alt="GitHub" src="https://img.shields.io/github/stars/labuladong/fucking-algorithm?label=Stars&style=flat-square&logo=GitHub"></a>
<a href="https://labuladong.online/algo/" target="_blank"><img class="my_header_icon" src="https://img.shields.io/static/v1?label=ç²¾å“è¯¾ç¨‹&message=æŸ¥çœ‹&color=pink&style=flat"></a>
<a href="https://www.zhihu.com/people/labuladong"><img src="https://img.shields.io/badge/%E7%9F%A5%E4%B9%8E-@labuladong-000000.svg?style=flat-square&logo=Zhihu"></a>
<a href="https://space.bilibili.com/14089380"><img src="https://img.shields.io/badge/Bç«™-@labuladong-000000.svg?style=flat-square&logo=Bilibili"></a>
</p>

![](https://labuladong.online/algo/images/souyisou1.png)

**é€šçŸ¥ï¼š[æ–°ç‰ˆç½‘ç«™ä¼šå‘˜](https://labuladong.online/algo/intro/site-vip/) å³å°†æ¶¨ä»·ï¼›å·²æ”¯æŒè€ç”¨æˆ·ç»­è´¹~å¦å¤–ï¼Œå»ºè®®ä½ åœ¨æˆ‘çš„ [ç½‘ç«™](https://labuladong.online/algo/) å­¦ä¹ æ–‡ç« ï¼Œä½“éªŒæ›´å¥½ã€‚**



è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¸ä»…å­¦ä¼šäº†ç®—æ³•å¥—è·¯ï¼Œè¿˜å¯ä»¥é¡ºä¾¿è§£å†³å¦‚ä¸‹é¢˜ç›®ï¼š

| LeetCode | åŠ›æ‰£ | éš¾åº¦ |
| :----: | :----: | :----: |
| [887. Super Egg Drop](https://leetcode.com/problems/super-egg-drop/) | [887. é¸¡è›‹æ‰è½](https://leetcode.cn/problems/super-egg-drop/) | ğŸ”´

**-----------**

æœ¬æ–‡è¦èŠä¸€ä¸ªå¾ˆç»å…¸çš„ç®—æ³•é—®é¢˜ï¼Œè‹¥å¹²å±‚æ¥¼ï¼Œè‹¥å¹²ä¸ªé¸¡è›‹ï¼Œè®©ä½ ç®—å‡ºæœ€å°‘çš„å°è¯•æ¬¡æ•°ï¼Œæ‰¾åˆ°é¸¡è›‹æ°å¥½æ‘”ä¸ç¢çš„é‚£å±‚æ¥¼ã€‚å›½å†…å¤§å‚ä»¥åŠè°·æ­Œè„¸ä¹¦é¢è¯•éƒ½ç»å¸¸è€ƒå¯Ÿè¿™é“é¢˜ï¼Œåªä¸è¿‡ä»–ä»¬è§‰å¾—æ‰”é¸¡è›‹å¤ªæµªè´¹ï¼Œæ”¹æˆæ‰”æ¯å­ï¼Œæ‰”ç ´ç¢—ä»€ä¹ˆçš„ã€‚

å…·ä½“çš„é—®é¢˜ç­‰ä¼šå†è¯´ï¼Œä½†æ˜¯è¿™é“é¢˜çš„è§£æ³•æŠ€å·§å¾ˆå¤šï¼Œå…‰åŠ¨æ€è§„åˆ’å°±å¥½å‡ ç§æ•ˆç‡ä¸åŒçš„æ€è·¯ï¼Œæœ€åè¿˜æœ‰ä¸€ç§æå…¶é«˜æ•ˆæ•°å­¦è§£æ³•ã€‚ç§‰æ‰¿æœ¬ä¹¦ä¸€è´¯çš„ä½œé£ï¼Œæ‹’ç»è¿‡äºè¯¡å¼‚çš„æŠ€å·§ï¼Œå› ä¸ºè¿™äº›æŠ€å·§æ— æ³•ä¸¾ä¸€åä¸‰ï¼Œå­¦äº†ä¹Ÿä¸åˆ’ç®—ã€‚

ä¸‹é¢å°±æ¥ç”¨æˆ‘ä»¬ä¸€ç›´å¼ºè°ƒçš„åŠ¨æ€è§„åˆ’é€šç”¨æ€è·¯æ¥ç ”ç©¶ä¸€ä¸‹è¿™é“é¢˜ã€‚

### ä¸€ã€è§£æé¢˜ç›®

è¿™æ˜¯åŠ›æ‰£ç¬¬ 887 é¢˜ã€Œé¸¡è›‹æ‰è½ã€ï¼Œæˆ‘æè¿°ä¸€ä¸‹é¢˜ç›®ï¼š

ä½ é¢å‰æœ‰ä¸€æ ‹ä» 1 åˆ° `N` å…± `N` å±‚çš„æ¥¼ï¼Œç„¶åç»™ä½  `K` ä¸ªé¸¡è›‹ï¼ˆ`K` è‡³å°‘ä¸º 1ï¼‰ã€‚ç°åœ¨ç¡®å®šè¿™æ ‹æ¥¼å­˜åœ¨æ¥¼å±‚ `0 <= F <= N`ï¼Œåœ¨è¿™å±‚æ¥¼å°†é¸¡è›‹æ‰”ä¸‹å»ï¼Œé¸¡è›‹**æ°å¥½æ²¡æ‘”ç¢**ï¼ˆé«˜äº `F` çš„æ¥¼å±‚éƒ½ä¼šç¢ï¼Œä½äº `F` çš„æ¥¼å±‚éƒ½ä¸ä¼šç¢ï¼Œå¦‚æœé¸¡è›‹æ²¡æœ‰ç¢ï¼Œå¯ä»¥æ¡å›æ¥ç»§ç»­æ‰”ï¼‰ã€‚ç°åœ¨é—®ä½ ï¼Œ**æœ€å**æƒ…å†µä¸‹ï¼Œä½ **è‡³å°‘**è¦æ‰”å‡ æ¬¡é¸¡è›‹ï¼Œæ‰èƒ½**ç¡®å®š**è¿™ä¸ªæ¥¼å±‚ `F` å‘¢ï¼Ÿ

ä¹Ÿå°±æ˜¯è®©ä½ æ‰¾æ‘”ä¸ç¢é¸¡è›‹çš„æœ€é«˜æ¥¼å±‚ `F`ï¼Œä½†ä»€ä¹ˆå«ã€Œæœ€åæƒ…å†µã€ä¸‹ã€Œè‡³å°‘ã€è¦æ‰”å‡ æ¬¡å‘¢ï¼Ÿæˆ‘ä»¬åˆ†åˆ«ä¸¾ä¸ªä¾‹å­å°±æ˜ç™½äº†ã€‚

æ¯”æ–¹è¯´**ç°åœ¨å…ˆä¸ç®¡é¸¡è›‹ä¸ªæ•°çš„é™åˆ¶**ï¼Œæœ‰ 7 å±‚æ¥¼ï¼Œä½ æ€ä¹ˆå»æ‰¾é¸¡è›‹æ°å¥½æ‘”ç¢çš„é‚£å±‚æ¥¼ï¼Ÿ

æœ€åŸå§‹çš„æ–¹å¼å°±æ˜¯çº¿æ€§æ‰«æï¼šæˆ‘å…ˆåœ¨ 1 æ¥¼æ‰”ä¸€ä¸‹ï¼Œæ²¡ç¢ï¼Œæˆ‘å†å» 2 æ¥¼æ‰”ä¸€ä¸‹ï¼Œæ²¡ç¢ï¼Œæˆ‘å†å» 3 æ¥¼â€¦â€¦

ä»¥è¿™ç§ç­–ç•¥ï¼Œ**æœ€å**æƒ…å†µåº”è¯¥å°±æ˜¯æˆ‘è¯•åˆ°ç¬¬ 7 å±‚é¸¡è›‹ä¹Ÿæ²¡ç¢ï¼ˆ`F = 7`ï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘æ‰”äº† 7 æ¬¡é¸¡è›‹ã€‚

å…ˆåœ¨ä½ åº”è¯¥ç†è§£ä»€ä¹ˆå«åšã€Œæœ€åæƒ…å†µã€ä¸‹äº†ï¼Œ**é¸¡è›‹ç ´ç¢ä¸€å®šå‘ç”Ÿåœ¨æœç´¢åŒºé—´ç©·å°½æ—¶**ï¼Œä¸ä¼šè¯´ä½ åœ¨ç¬¬ 1 å±‚æ‘”ä¸€ä¸‹é¸¡è›‹å°±ç¢äº†ï¼Œè¿™æ˜¯ä½ è¿æ°”å¥½ï¼Œä¸æ˜¯æœ€åæƒ…å†µã€‚

ç°åœ¨å†æ¥ç†è§£ä¸€ä¸‹ä»€ä¹ˆå«ã€Œè‡³å°‘ã€è¦æ‰”å‡ æ¬¡ã€‚ä¾ç„¶ä¸è€ƒè™‘é¸¡è›‹ä¸ªæ•°é™åˆ¶ï¼ŒåŒæ ·æ˜¯ 7 å±‚æ¥¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ç­–ç•¥ã€‚

æœ€å¥½çš„ç­–ç•¥æ˜¯ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ€è·¯ï¼Œæˆ‘å…ˆå»ç¬¬ `(1 + 7) / 2 = 4` å±‚æ‰”ä¸€ä¸‹ï¼š

å¦‚æœç¢äº†è¯´æ˜ `F` å°äº 4ï¼Œæˆ‘å°±å»ç¬¬ `(1 + 3) / 2 = 2` å±‚è¯•â€¦â€¦

å¦‚æœæ²¡ç¢è¯´æ˜ `F` å¤§äºç­‰äº 4ï¼Œæˆ‘å°±å»ç¬¬ `(5 + 7) / 2 = 6` å±‚è¯•â€¦â€¦

ä»¥è¿™ç§ç­–ç•¥ï¼Œ**æœ€å**æƒ…å†µåº”è¯¥æ˜¯è¯•åˆ°ç¬¬ 7 å±‚é¸¡è›‹è¿˜æ²¡ç¢ï¼ˆ`F = 7`ï¼‰ï¼Œæˆ–è€…é¸¡è›‹ä¸€ç›´ç¢åˆ°ç¬¬ 1 å±‚ï¼ˆ`F = 0`ï¼‰ã€‚ç„¶è€Œæ— è®ºé‚£ç§æœ€åæƒ…å†µï¼Œåªéœ€è¦è¯• `log7` å‘ä¸Šå–æ•´ç­‰äº 3 æ¬¡ï¼Œæ¯”åˆšæ‰å°è¯• 7 æ¬¡è¦å°‘ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„**è‡³å°‘**è¦æ‰”å‡ æ¬¡ã€‚

å®é™…ä¸Šï¼Œå¦‚æœä¸é™åˆ¶é¸¡è›‹ä¸ªæ•°çš„è¯ï¼ŒäºŒåˆ†æ€è·¯æ˜¾ç„¶å¯ä»¥å¾—åˆ°æœ€å°‘å°è¯•çš„æ¬¡æ•°ï¼Œä½†é—®é¢˜æ˜¯ï¼Œ**ç°åœ¨ç»™ä½ äº†é¸¡è›‹ä¸ªæ•°çš„é™åˆ¶ `K`ï¼Œç›´æ¥ä½¿ç”¨äºŒåˆ†æ€è·¯å°±ä¸è¡Œäº†**ã€‚

æ¯”å¦‚è¯´åªç»™ä½  1 ä¸ªé¸¡è›‹ï¼Œ7 å±‚æ¥¼ï¼Œä½ æ•¢ç”¨äºŒåˆ†å—ï¼Ÿä½ ç›´æ¥å»ç¬¬ 4 å±‚æ‰”ä¸€ä¸‹ï¼Œå¦‚æœé¸¡è›‹æ²¡ç¢è¿˜å¥½ï¼Œä½ å¯ä»¥æŠŠé¸¡è›‹æ¡èµ·æ¥å†å»æ›´é«˜çš„æ¥¼å±‚å°è¯•ï¼›ä½†å¦‚æœç¢äº†ï¼Œä½ å°±æ²¡æœ‰é¸¡è›‹ç»§ç»­æµ‹è¯•äº†ï¼Œæ— æ³•ç¡®å®šé¸¡è›‹æ°å¥½æ‘”ä¸ç¢çš„æ¥¼å±‚ `F` äº†ã€‚

å…¶å®è¿™ç§æƒ…å†µä¸‹åªèƒ½ç”¨çº¿æ€§æ‰«æçš„æ–¹æ³•ï¼Œä»ä¸‹ç½‘ä¸Šä¸€å±‚å±‚å°è¯•æ‰”é¸¡è›‹ï¼Œé‚£ä¹ˆæœ€åæƒ…å†µä¸‹éœ€è¦æ‰” 7 æ¬¡ï¼Œç®—æ³•è¿”å›ç»“æœåº”è¯¥æ˜¯ 7ã€‚

æœ‰çš„è¯»è€…ä¹Ÿè®¸ä¼šæœ‰è¿™ç§æƒ³æ³•ï¼šäºŒåˆ†æŸ¥æ‰¾æ’é™¤æ¥¼å±‚çš„é€Ÿåº¦æ— ç–‘æ˜¯æœ€å¿«çš„ï¼Œé‚£å¹²è„†å…ˆç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œç­‰åˆ°åªå‰© 1 ä¸ªé¸¡è›‹çš„æ—¶å€™å†æ‰§è¡Œçº¿æ€§æ‰«æï¼Œè¿™æ ·å¾—åˆ°çš„ç»“æœæ˜¯ä¸æ˜¯å°±æ˜¯æœ€å°‘çš„æ‰”é¸¡è›‹æ¬¡æ•°å‘¢ï¼Ÿ

å¾ˆé—æ†¾ï¼Œå¹¶ä¸æ˜¯ï¼Œæ¯”å¦‚è¯´æŠŠæ¥¼å±‚å˜é«˜ä¸€äº›ï¼Œ100 å±‚ï¼Œç»™ä½  2 ä¸ªé¸¡è›‹ï¼Œä½ åœ¨ 50 å±‚æ‰”ä¸€ä¸‹ï¼Œç¢äº†ï¼Œé‚£å°±åªèƒ½çº¿æ€§æ‰«æ 1ï½49 å±‚äº†ï¼Œæœ€åæƒ…å†µä¸‹è¦æ‰” 50 æ¬¡ã€‚

å¦‚æœä¸è¦ã€ŒäºŒåˆ†ã€ï¼Œå˜æˆã€Œäº”åˆ†ã€ã€Œååˆ†ã€éƒ½ä¼šå¤§å¹…å‡å°‘æœ€åæƒ…å†µä¸‹çš„å°è¯•æ¬¡æ•°ã€‚æ¯”æ–¹è¯´ç¬¬ä¸€ä¸ªé¸¡è›‹æ¯éš”åå±‚æ¥¼æ‰”ï¼Œåœ¨å“ªé‡Œç¢äº†ç¬¬äºŒä¸ªé¸¡è›‹ä¸€ä¸ªä¸ªçº¿æ€§æ‰«æï¼Œæ€»å…±ä¸ä¼šè¶…è¿‡ 20 æ¬¡ã€‚æœ€ä¼˜è§£å…¶å®æ˜¯ 14 æ¬¡ã€‚æœ€ä¼˜ç­–ç•¥éå¸¸å¤šï¼Œè€Œä¸”å¹¶æ²¡æœ‰ä»€ä¹ˆè§„å¾‹å¯è¨€ã€‚

è¯´äº†è¿™ä¹ˆå¤šåºŸè¯ï¼Œå°±æ˜¯ç¡®ä¿å¤§å®¶ç†è§£äº†é¢˜ç›®çš„æ„æ€ï¼Œè€Œä¸”è®¤è¯†åˆ°è¿™ä¸ªé¢˜ç›®ç¡®å®å¤æ‚ï¼Œå°±è¿æˆ‘ä»¬æ‰‹ç®—éƒ½ä¸å®¹æ˜“ï¼Œå¦‚ä½•ç”¨ç®—æ³•è§£å†³å‘¢ï¼Ÿ



<hr>
<details class="hint-container details">
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„æ–‡ç« </strong></summary>

 - [åŠ¨æ€è§„åˆ’ç©·ä¸¾çš„ä¸¤ç§è§†è§’](https://labuladong.online/algo/dynamic-programming/two-views-of-dp/)
 - [å®é™…äºŒåˆ†æœç´¢æ—¶çš„æ€ç»´æ¡†æ¶](https://labuladong.online/algo/frequency-interview/binary-search-in-action/)
 - [æœ€ä¼˜å­ç»“æ„åŸç†å’Œ dp æ•°ç»„éå†æ–¹å‘](https://labuladong.online/algo/dynamic-programming/faq-summary/)
 - [ç»å…¸åŠ¨æ€è§„åˆ’ï¼šæˆ³æ°”çƒ](https://labuladong.online/algo/dynamic-programming/burst-balloons/)

</details><hr>





**ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿**

æœ¬æ–‡ä¸ºä¼šå‘˜å†…å®¹ï¼Œè¯·æ‰«ç å…³æ³¨å…¬ä¼—å·æˆ– [ç‚¹è¿™é‡Œ](https://labuladong.online/algo/dynamic-programming/egg-drop/) æŸ¥çœ‹ï¼š

![](https://labuladong.online/algo/images/qrcode.jpg)

======å…¶ä»–è¯­è¨€ä»£ç ======

[887.é¸¡è›‹æ‰è½](https://leetcode-cn.com/problems/super-egg-drop/)

### javascript

**dpçŠ¶æ€è½¬ç§» + å¤‡å¿˜å½•**

```js
var superEggDrop = function (K, N) {
    let memo = {}

    let dp = function (K, N) {
        // base case
        if (K === 1) return N;
        if (N === 0) return 0;

        // é¿å…é‡å¤è®¡ç®—
        let key = K + ',' + N
        if (memo[key] !== undefined) {
            return memo[key];
        }
        
        // æ­£æ— ç©·
        let res = Infinity;
        
        // ç©·ä¸¾æ‰€æœ‰çš„å¯èƒ½çš„é€‰æ‹©
        for (let i = 1; i < N + 1; i++) {
            res = Math.min(
                res,
                Math.max(
                    dp(K, N - i),
                    dp(K - 1, i - 1)
                ) + 1
            )
        }

        // è®°å…¥å¤‡å¿˜å½•
        memo[key] = res;
        return res;
    }

    return dp(K, N);
};
```



**dpçŠ¶æ€è½¬ç§» + å¤‡å¿˜å½• + äºŒåˆ†æ³•**

```js
var superEggDrop = function (K, N) {
    let memo = {}

    let dp = function (K, N) {
        // base case
        if (K === 1) return N;
        if (N === 0) return 0;

        // é¿å…é‡å¤è®¡ç®—
        let key = K + ',' + N
        if (memo[key] !== undefined) {
            return memo[key];
        }

        // æ­£æ— ç©·
        let res = Infinity;

        // ç©·ä¸¾æ‰€æœ‰çš„å¯èƒ½çš„é€‰æ‹©
        // for (let i = 1; i < N + 1; i++) {
        //     res = Math.min(
        //         res,
        //         Math.max(
        //             dp(K, N - i),
        //             dp(K - 1, i - 1)
        //         ) + 1
        //     )
        // }

        // ç”¨äºŒåˆ†æœç´¢ä»£æ›¿çº¿æ€§æœç´¢
        let lo = 1, hi = N;
        while (lo <= hi) {
            let mid = Math.floor((lo + hi) / 2);
            let broken = dp(K - 1, mid - 1) // ç¢
            let not_broken = dp(K, N - mid) //  æ²¡ç¢

            // res = min(max(ç¢ï¼Œæ²¡ç¢) + 1)
            if (broken > not_broken) {
                hi = mid - 1
                res = Math.min(res, broken + 1)
            } else {
                lo = mid + 1
                res = Math.min(res, not_broken + 1)
            }
        }


        // è®°å…¥å¤‡å¿˜å½•
        memo[key] = res;
        return res;
    }

    return dp(K, N);
};

```

