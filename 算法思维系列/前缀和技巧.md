# ç»å…¸æ•°ç»„æŠ€å·§ï¼šå‰ç¼€å’Œæ•°ç»„

<p align='center'>
<a href="https://github.com/labuladong/fucking-algorithm" target="view_window"><img alt="GitHub" src="https://img.shields.io/github/stars/labuladong/fucking-algorithm?label=Stars&style=flat-square&logo=GitHub"></a>
<a href="https://labuladong.online/algo/" target="_blank"><img class="my_header_icon" src="https://img.shields.io/static/v1?label=ç²¾å“è¯¾ç¨‹&message=æŸ¥çœ‹&color=pink&style=flat"></a>
<a href="https://www.zhihu.com/people/labuladong"><img src="https://img.shields.io/badge/%E7%9F%A5%E4%B9%8E-@labuladong-000000.svg?style=flat-square&logo=Zhihu"></a>
<a href="https://space.bilibili.com/14089380"><img src="https://img.shields.io/badge/Bç«™-@labuladong-000000.svg?style=flat-square&logo=Bilibili"></a>
</p>

![](https://labuladong.online/algo/images/souyisou1.png)

**é€šçŸ¥ï¼š[æ–°ç‰ˆç½‘ç«™ä¼šå‘˜](https://labuladong.online/algo/intro/site-vip/) å³å°†æ¶¨ä»·ï¼›å·²æ”¯æŒè€ç”¨æˆ·ç»­è´¹~å¦å¤–ï¼Œå»ºè®®ä½ åœ¨æˆ‘çš„ [ç½‘ç«™](https://labuladong.online/algo/) å­¦ä¹ æ–‡ç« ï¼Œä½“éªŒæ›´å¥½ã€‚**



è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¸ä»…å­¦ä¼šäº†ç®—æ³•å¥—è·¯ï¼Œè¿˜å¯ä»¥é¡ºä¾¿è§£å†³å¦‚ä¸‹é¢˜ç›®ï¼š

| LeetCode | åŠ›æ‰£ | éš¾åº¦ |
| :----: | :----: | :----: |
| [303. Range Sum Query - Immutable](https://leetcode.com/problems/range-sum-query-immutable/) | [303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-immutable/) | ğŸŸ¢
| [304. Range Sum Query 2D - Immutable](https://leetcode.com/problems/range-sum-query-2d-immutable/) | [304. äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-2d-immutable/) | ğŸŸ 
| - | [å‰‘æŒ‡ Offer II 013. äºŒç»´å­çŸ©é˜µçš„å’Œ](https://leetcode.cn/problems/O4NDxx/) | ğŸŸ 

**-----------**

> tipï¼šæœ¬æ–‡æœ‰è§†é¢‘ç‰ˆï¼š[å‰ç¼€å’Œ/å·®åˆ†æ•°ç»„æŠ€å·§ç²¾è®²](https://www.bilibili.com/video/BV1NY4y1J7xQ/)ã€‚å»ºè®®å…³æ³¨æˆ‘çš„ B ç«™è´¦å·ï¼Œæˆ‘ä¼šç”¨è§†é¢‘é¢†è¯»çš„æ–¹å¼å¸¦å¤§å®¶å­¦ä¹ é‚£äº›ç¨æœ‰éš¾åº¦çš„ç®—æ³•æŠ€å·§ã€‚



å‰ç¼€å’ŒæŠ€å·§é€‚ç”¨äºå¿«é€Ÿã€é¢‘ç¹åœ°è®¡ç®—ä¸€ä¸ªç´¢å¼•åŒºé—´å†…çš„å…ƒç´ ä¹‹å’Œã€‚

### ä¸€ç»´æ•°ç»„ä¸­çš„å‰ç¼€å’Œ

å…ˆçœ‹ä¸€é“ä¾‹é¢˜ï¼ŒåŠ›æ‰£ç¬¬ 303 é¢˜ã€ŒåŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜ã€ï¼Œè®©ä½ è®¡ç®—æ•°ç»„åŒºé—´å†…å…ƒç´ çš„å’Œï¼Œè¿™æ˜¯ä¸€é“æ ‡å‡†çš„å‰ç¼€å’Œé—®é¢˜ï¼š

<Problem slug="range-sum-query-immutable" />

é¢˜ç›®è¦æ±‚ä½ å®ç°è¿™æ ·ä¸€ä¸ªç±»ï¼š

<!-- muliti_language -->
```java
class NumArray {

    public NumArray(int[] nums) {}
    
    /* æŸ¥è¯¢é—­åŒºé—´ [left, right] çš„ç´¯åŠ å’Œ */
    public int sumRange(int left, int right) {}
}
```

`sumRange` å‡½æ•°éœ€è¦è®¡ç®—å¹¶è¿”å›ä¸€ä¸ªç´¢å¼•åŒºé—´ä¹‹å†…çš„å…ƒç´ å’Œï¼Œæ²¡å­¦è¿‡å‰ç¼€å’Œçš„äººå¯èƒ½å†™å‡ºå¦‚ä¸‹ä»£ç ï¼š

<!-- muliti_language -->
```java
class NumArray {

    private int[] nums;

    public NumArray(int[] nums) {
        this.nums = nums;
    }
    
    public int sumRange(int left, int right) {
        int res = 0;
        for (int i = left; i <= right; i++) {
            res += nums[i];
        }
        return res;
    }
}
```

è¿™æ ·ï¼Œå¯ä»¥è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯æ•ˆç‡å¾ˆå·®ï¼Œå› ä¸º `sumRange` æ–¹æ³•ä¼šè¢«é¢‘ç¹è°ƒç”¨ï¼Œè€Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(N)`ï¼Œå…¶ä¸­ `N` ä»£è¡¨ `nums` æ•°ç»„çš„é•¿åº¦ã€‚

è¿™é“é¢˜çš„æœ€ä¼˜è§£æ³•æ˜¯ä½¿ç”¨å‰ç¼€å’ŒæŠ€å·§ï¼Œå°† `sumRange` å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦é™ä¸º `O(1)`ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸è¦åœ¨ `sumRange` é‡Œé¢ç”¨ for å¾ªç¯ï¼Œå’‹æ•´ï¼Ÿ

ç›´æ¥çœ‹ä»£ç å®ç°ï¼š

<!-- muliti_language -->
```java
class NumArray {
    // å‰ç¼€å’Œæ•°ç»„
    private int[] preSum;

    /* è¾“å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ„é€ å‰ç¼€å’Œ */
    public NumArray(int[] nums) {
        // preSum[0] = 0ï¼Œä¾¿äºè®¡ç®—ç´¯åŠ å’Œ
        preSum = new int[nums.length + 1];
        // è®¡ç®— nums çš„ç´¯åŠ å’Œ
        for (int i = 1; i < preSum.length; i++) {
            preSum[i] = preSum[i - 1] + nums[i - 1];
        }
    }
    
    /* æŸ¥è¯¢é—­åŒºé—´ [left, right] çš„ç´¯åŠ å’Œ */
    public int sumRange(int left, int right) {
        return preSum[right + 1] - preSum[left];
    }
}
```

æ ¸å¿ƒæ€è·¯æ˜¯æˆ‘ä»¬ new ä¸€ä¸ªæ–°çš„æ•°ç»„ `preSum` å‡ºæ¥ï¼Œ`preSum[i]` è®°å½• `nums[0..i-1]` çš„ç´¯åŠ å’Œï¼Œçœ‹å›¾ 10 = 3 + 5 + 2ï¼š

![](https://labuladong.online/algo/images/å·®åˆ†æ•°ç»„/1.jpeg)

çœ‹è¿™ä¸ª `preSum` æ•°ç»„ï¼Œå¦‚æœæˆ‘æƒ³æ±‚ç´¢å¼•åŒºé—´ `[1, 4]` å†…çš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œå°±å¯ä»¥é€šè¿‡ `preSum[5] - preSum[1]` å¾—å‡ºã€‚

è¿™æ ·ï¼Œ`sumRange` å‡½æ•°ä»…ä»…éœ€è¦åšä¸€æ¬¡å‡æ³•è¿ç®—ï¼Œé¿å…äº†æ¯æ¬¡è¿›è¡Œ for å¾ªç¯è°ƒç”¨ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ä¸ºå¸¸æ•° `O(1)`ã€‚

è¿™ä¸ªæŠ€å·§åœ¨ç”Ÿæ´»ä¸­è¿ç”¨ä¹ŸæŒºå¹¿æ³›çš„ï¼Œæ¯”æ–¹è¯´ï¼Œä½ ä»¬ç­ä¸Šæœ‰è‹¥å¹²åŒå­¦ï¼Œæ¯ä¸ªåŒå­¦æœ‰ä¸€ä¸ªæœŸæœ«è€ƒè¯•çš„æˆç»©ï¼ˆæ»¡åˆ† 100 åˆ†ï¼‰ï¼Œé‚£ä¹ˆè¯·ä½ å®ç°ä¸€ä¸ª APIï¼Œè¾“å…¥ä»»æ„ä¸€ä¸ªåˆ†æ•°æ®µï¼Œè¿”å›æœ‰å¤šå°‘åŒå­¦çš„æˆç»©åœ¨è¿™ä¸ªåˆ†æ•°æ®µå†…ã€‚

é‚£ä¹ˆï¼Œä½ å¯ä»¥å…ˆé€šè¿‡è®¡æ•°æ’åºçš„æ–¹å¼è®¡ç®—æ¯ä¸ªåˆ†æ•°å…·ä½“æœ‰å¤šå°‘ä¸ªåŒå­¦ï¼Œç„¶ååˆ©ç”¨å‰ç¼€å’ŒæŠ€å·§æ¥å®ç°åˆ†æ•°æ®µæŸ¥è¯¢çš„ APIï¼š

```java
int[] scores; // å­˜å‚¨ç€æ‰€æœ‰åŒå­¦çš„åˆ†æ•°
// è¯•å·æ»¡åˆ† 100 åˆ†
int[] count = new int[100 + 1]
// è®°å½•æ¯ä¸ªåˆ†æ•°æœ‰å‡ ä¸ªåŒå­¦
for (int score : scores)
    count[score]++
// æ„é€ å‰ç¼€å’Œ
for (int i = 1; i < count.length; i++)
    count[i] = count[i] + count[i-1];

// åˆ©ç”¨ count è¿™ä¸ªå‰ç¼€å’Œæ•°ç»„è¿›è¡Œåˆ†æ•°æ®µæŸ¥è¯¢
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸€çœ‹å‰ç¼€å’Œæ€è·¯åœ¨äºŒç»´æ•°ç»„ä¸­å¦‚ä½•è¿ç”¨ã€‚

### äºŒç»´çŸ©é˜µä¸­çš„å‰ç¼€å’Œ

è¿™æ˜¯åŠ›æ‰£ç¬¬ 304 é¢˜ã€ŒäºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜ã€ï¼Œå…¶å®å’Œä¸Šä¸€é¢˜ç±»ä¼¼ï¼Œä¸Šä¸€é¢˜æ˜¯è®©ä½ è®¡ç®—å­æ•°ç»„çš„å…ƒç´ ä¹‹å’Œï¼Œè¿™é“é¢˜è®©ä½ è®¡ç®—äºŒç»´çŸ©é˜µä¸­å­çŸ©é˜µçš„å…ƒç´ ä¹‹å’Œï¼š

<Problem slug="range-sum-query-2d-immutable" />

æ¯”å¦‚è¯´è¾“å…¥çš„ `matrix` å¦‚ä¸‹å›¾ï¼š

![](https://labuladong.online/algo/images/å‰ç¼€å’Œ/4.png)

æŒ‰ç…§é¢˜ç›®è¦æ±‚ï¼ŒçŸ©é˜µå·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ `(0, 0)`ï¼Œé‚£ä¹ˆ `sumRegion([2,1,4,3])` å°±æ˜¯å›¾ä¸­çº¢è‰²çš„å­çŸ©é˜µï¼Œä½ éœ€è¦è¿”å›è¯¥å­çŸ©é˜µçš„å…ƒç´ å’Œ 8ã€‚

å½“ç„¶ï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªåµŒå¥— for å¾ªç¯å»éå†è¿™ä¸ªçŸ©é˜µï¼Œä½†è¿™æ ·çš„è¯ `sumRegion` å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦å°±é«˜äº†ï¼Œä½ ç®—æ³•çš„æ ¼å±€å°±ä½äº†ã€‚

æ³¨æ„ä»»æ„å­çŸ©é˜µçš„å…ƒç´ å’Œå¯ä»¥è½¬åŒ–æˆå®ƒå‘¨è¾¹å‡ ä¸ªå¤§çŸ©é˜µçš„å…ƒç´ å’Œçš„è¿ç®—ï¼š

![](https://labuladong.online/algo/images/å‰ç¼€å’Œ/5.jpeg)

è€Œè¿™å››ä¸ªå¤§çŸ©é˜µæœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼Œå°±æ˜¯å·¦ä¸Šè§’éƒ½æ˜¯ `(0, 0)` åŸç‚¹ã€‚

é‚£ä¹ˆåšè¿™é“é¢˜æ›´å¥½çš„æ€è·¯å’Œä¸€ç»´æ•°ç»„ä¸­çš„å‰ç¼€å’Œæ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªäºŒç»´ `preSum` æ•°ç»„ï¼Œä¸“é—¨è®°å½•ä»¥åŸç‚¹ä¸ºé¡¶ç‚¹çš„çŸ©é˜µçš„å…ƒç´ ä¹‹å’Œï¼Œå°±å¯ä»¥ç”¨å‡ æ¬¡åŠ å‡è¿ç®—ç®—å‡ºä»»ä½•ä¸€ä¸ªå­çŸ©é˜µçš„å…ƒç´ å’Œï¼š

<!-- muliti_language -->
```java
class NumMatrix {
    // å®šä¹‰ï¼špreSum[i][j] è®°å½• matrix ä¸­å­çŸ©é˜µ [0, 0, i-1, j-1] çš„å…ƒç´ å’Œ
    private int[][] preSum;
    
    public NumMatrix(int[][] matrix) {
        int m = matrix.length, n = matrix[0].length;
        if (m == 0 || n == 0) return;
        // æ„é€ å‰ç¼€å’ŒçŸ©é˜µ
        preSum = new int[m + 1][n + 1];
        for (int i = 1; i <= m; i++) {
            for (int j = 1; j <= n; j++) {
                // è®¡ç®—æ¯ä¸ªçŸ©é˜µ [0, 0, i, j] çš„å…ƒç´ å’Œ
                preSum[i][j] = preSum[i-1][j] + preSum[i][j-1] + matrix[i - 1][j - 1] - preSum[i-1][j-1];
            }
        }
    }
    
    // è®¡ç®—å­çŸ©é˜µ [x1, y1, x2, y2] çš„å…ƒç´ å’Œ
    public int sumRegion(int x1, int y1, int x2, int y2) {
        // ç›®æ ‡çŸ©é˜µä¹‹å’Œç”±å››ä¸ªç›¸é‚»çŸ©é˜µè¿ç®—è·å¾—
        return preSum[x2+1][y2+1] - preSum[x1][y2+1] - preSum[x2+1][y1] + preSum[x1][y1];
    }
}
```

è¿™æ ·ï¼Œ`sumRegion` å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿç”¨å‰ç¼€å’ŒæŠ€å·§ä¼˜åŒ–åˆ°äº† O(1)ï¼Œè¿™æ˜¯å…¸å‹çš„ã€Œç©ºé—´æ¢æ—¶é—´ã€æ€è·¯ã€‚

å‰ç¼€å’ŒæŠ€å·§å°±è®²åˆ°è¿™é‡Œï¼Œåº”è¯¥è¯´è¿™ä¸ªç®—æ³•æŠ€å·§æ˜¯ä¼šè€…ä¸éš¾éš¾è€…ä¸ä¼šï¼Œå®é™…è¿ç”¨ä¸­è¿˜æ˜¯è¦å¤šåŸ¹å…»è‡ªå·±çš„æ€ç»´çµæ´»æ€§ï¼Œåšåˆ°ä¸€çœ¼çœ‹å‡ºé¢˜ç›®æ˜¯ä¸€ä¸ªå‰ç¼€å’Œé—®é¢˜ã€‚

é™¤äº†æœ¬æ–‡ä¸¾ä¾‹çš„åŸºæœ¬ç”¨æ³•ï¼Œå‰ç¼€å’Œæ•°ç»„ç»å¸¸å’Œå…¶ä»–æ•°æ®ç»“æ„æˆ–ç®—æ³•æŠ€å·§ç›¸ç»“åˆï¼Œæˆ‘ä¼šåœ¨ [å‰ç¼€å’ŒæŠ€å·§é«˜é¢‘ä¹ é¢˜](https://labuladong.online/algo/problem-set/perfix-sum/) ä¸­ä¸¾ä¾‹è®²è§£ã€‚




<hr>
<details class="hint-container details">
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„æ–‡ç« </strong></summary>

 - [ã€å¼ºåŒ–ç»ƒä¹ ã€‘å‰ç¼€å’ŒæŠ€å·§ç»å…¸ä¹ é¢˜](https://labuladong.online/algo/problem-set/perfix-sum/)
 - [ã€å¼ºåŒ–ç»ƒä¹ ã€‘å•è°ƒé˜Ÿåˆ—çš„é€šç”¨å®ç°åŠç»å…¸ä¹ é¢˜](https://labuladong.online/algo/problem-set/monotonic-queue/)
 - [ã€å¼ºåŒ–ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-3/)
 - [äºŒç»´æ•°ç»„çš„èŠ±å¼éå†æŠ€å·§](https://labuladong.online/algo/practice-in-action/2d-array-traversal-summary/)
 - [åŠ¨æ€è§„åˆ’è®¾è®¡ï¼šæœ€å¤§å­æ•°ç»„](https://labuladong.online/algo/dynamic-programming/maximum-subarray/)
 - [å°è€Œç¾çš„ç®—æ³•æŠ€å·§ï¼šå·®åˆ†æ•°ç»„](https://labuladong.online/algo/data-structure/diff-array/)
 - [å¸¦æƒé‡çš„éšæœºé€‰æ‹©ç®—æ³•](https://labuladong.online/algo/frequency-interview/random-pick-with-weight/)
 - [å½’å¹¶æ’åºè¯¦è§£åŠåº”ç”¨](https://labuladong.online/algo/practice-in-action/merge-sort/)
 - [æˆ‘çš„åˆ·é¢˜å¿ƒå¾—ï¼šç®—æ³•çš„æœ¬è´¨](https://labuladong.online/algo/essential-technique/algorithm-summary/)

</details><hr>




<hr>
<details class="hint-container details">
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„é¢˜ç›®</strong></summary>

<strong>å®‰è£… [æˆ‘çš„ Chrome åˆ·é¢˜æ’ä»¶](https://labuladong.online/algo/intro/chrome/) ç‚¹å¼€ä¸‹åˆ—é¢˜ç›®å¯ç›´æ¥æŸ¥çœ‹è§£é¢˜æ€è·¯ï¼š</strong>

| LeetCode | åŠ›æ‰£ |
| :----: | :----: |
| [1314. Matrix Block Sum](https://leetcode.com/problems/matrix-block-sum/?show=1) | [1314. çŸ©é˜µåŒºåŸŸå’Œ](https://leetcode.cn/problems/matrix-block-sum/?show=1) |
| [1352. Product of the Last K Numbers](https://leetcode.com/problems/product-of-the-last-k-numbers/?show=1) | [1352. æœ€å K ä¸ªæ•°çš„ä¹˜ç§¯](https://leetcode.cn/problems/product-of-the-last-k-numbers/?show=1) |
| [238. Product of Array Except Self](https://leetcode.com/problems/product-of-array-except-self/?show=1) | [238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯](https://leetcode.cn/problems/product-of-array-except-self/?show=1) |
| [325. Maximum Size Subarray Sum Equals k](https://leetcode.com/problems/maximum-size-subarray-sum-equals-k/?show=1)ğŸ”’ | [325. å’Œç­‰äº k çš„æœ€é•¿å­æ•°ç»„é•¿åº¦](https://leetcode.cn/problems/maximum-size-subarray-sum-equals-k/?show=1)ğŸ”’ |
| [327. Count of Range Sum](https://leetcode.com/problems/count-of-range-sum/?show=1) | [327. åŒºé—´å’Œçš„ä¸ªæ•°](https://leetcode.cn/problems/count-of-range-sum/?show=1) |
| [437. Path Sum III](https://leetcode.com/problems/path-sum-iii/?show=1) | [437. è·¯å¾„æ€»å’Œ III](https://leetcode.cn/problems/path-sum-iii/?show=1) |
| [523. Continuous Subarray Sum](https://leetcode.com/problems/continuous-subarray-sum/?show=1) | [523. è¿ç»­çš„å­æ•°ç»„å’Œ](https://leetcode.cn/problems/continuous-subarray-sum/?show=1) |
| [525. Contiguous Array](https://leetcode.com/problems/contiguous-array/?show=1) | [525. è¿ç»­æ•°ç»„](https://leetcode.cn/problems/contiguous-array/?show=1) |
| [560. Subarray Sum Equals K](https://leetcode.com/problems/subarray-sum-equals-k/?show=1) | [560. å’Œä¸º K çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k/?show=1) |
| [724. Find Pivot Index](https://leetcode.com/problems/find-pivot-index/?show=1) | [724. å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒä¸‹æ ‡](https://leetcode.cn/problems/find-pivot-index/?show=1) |
| [862. Shortest Subarray with Sum at Least K](https://leetcode.com/problems/shortest-subarray-with-sum-at-least-k/?show=1) | [862. å’Œè‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„](https://leetcode.cn/problems/shortest-subarray-with-sum-at-least-k/?show=1) |
| [918. Maximum Sum Circular Subarray](https://leetcode.com/problems/maximum-sum-circular-subarray/?show=1) | [918. ç¯å½¢å­æ•°ç»„çš„æœ€å¤§å’Œ](https://leetcode.cn/problems/maximum-sum-circular-subarray/?show=1) |
| [974. Subarray Sums Divisible by K](https://leetcode.com/problems/subarray-sums-divisible-by-k/?show=1) | [974. å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sums-divisible-by-k/?show=1) |
| - | [å‰‘æŒ‡ Offer 57 - II. å’Œä¸ºsçš„è¿ç»­æ­£æ•°åºåˆ—](https://leetcode.cn/problems/he-wei-sde-lian-xu-zheng-shu-xu-lie-lcof/?show=1) |
| - | [å‰‘æŒ‡ Offer II 010. å’Œä¸º k çš„å­æ•°ç»„](https://leetcode.cn/problems/QTMn0o/?show=1) |
| - | [å‰‘æŒ‡ Offer II 011. 0 å’Œ 1 ä¸ªæ•°ç›¸åŒçš„å­æ•°ç»„](https://leetcode.cn/problems/A1NYOS/?show=1) |
| - | [å‰‘æŒ‡ Offer II 012. å·¦å³ä¸¤è¾¹å­æ•°ç»„çš„å’Œç›¸ç­‰](https://leetcode.cn/problems/tvdfij/?show=1) |
| - | [å‰‘æŒ‡ Offer II 013. äºŒç»´å­çŸ©é˜µçš„å’Œ](https://leetcode.cn/problems/O4NDxx/?show=1) |
| - | [å‰‘æŒ‡ Offer II 050. å‘ä¸‹çš„è·¯å¾„èŠ‚ç‚¹ä¹‹å’Œ](https://leetcode.cn/problems/6eUYwP/?show=1) |

</details>
<hr>



**ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿**

**ã€Šlabuladong çš„ç®—æ³•ç¬”è®°ã€‹å·²ç»å‡ºç‰ˆï¼Œå…³æ³¨å…¬ä¼—å·æŸ¥çœ‹è¯¦æƒ…ï¼›åå°å›å¤ã€Œ**å…¨å®¶æ¡¶**ã€å¯ä¸‹è½½é…å¥— PDF å’Œåˆ·é¢˜å…¨å®¶æ¡¶**ï¼š

![](https://labuladong.online/algo/images/souyisou2.png)

======å…¶ä»–è¯­è¨€ä»£ç ======

[560.å’Œä¸ºKçš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sum-equals-k)



### javascript

[560.å’Œä¸ºKçš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sum-equals-k)

```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
let subarraySum = function (nums, k) {
    let n = nums.length;
    // æ„é€ å‰ç¼€å’Œ
    let sum = new Array(n + 1);
    sum[0] = 0;
    
    for (let i = 0; i < n; i++) {
        sum[i + 1] = sum[i] + nums[i];
    }
       

    let ans = 0;
    // ç©·ä¸¾æ‰€æœ‰å­æ•°ç»„
    for (let i = 1; i <= n; i++)
        for (let j = 0; j < i; j++)
            // sum of nums[j..i-1]
            if (sum[i] - sum[j] === k)
                ans++;

    return ans;
}
```

ä¼˜åŒ–ä¸€ä¸‹ã€‚

```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
let subarraySum = function (nums, k) {
    let n = nums.length;
    // mapï¼šå‰ç¼€å’Œ -> è¯¥å‰ç¼€å’Œå‡ºç°çš„æ¬¡æ•°
    let preSum = new Map();

    // base case
    preSum.set(0, 1);

    let ans = 0, sum0_i = 0;
    for (let i = 0; i < n; i++) {
        sum0_i += nums[i];
        // è¿™æ˜¯æˆ‘ä»¬æƒ³æ‰¾çš„å‰ç¼€å’Œ nums[0..j]
        let sum0_j = sum0_i - k;
        // å¦‚æœå‰é¢æœ‰è¿™ä¸ªå‰ç¼€å’Œï¼Œåˆ™ç›´æ¥æ›´æ–°ç­”æ¡ˆ
        if (preSum.has(sum0_j))
            ans += preSum.get(sum0_j);

        // æŠŠå‰ç¼€å’Œ nums[0..i] åŠ å…¥å¹¶è®°å½•å‡ºç°æ¬¡æ•°
        if (preSum.has(sum0_i)) {
            preSum.set(sum0_i,
                preSum.get(sum0_i) + 1);
        } else {
            preSum.set(sum0_i, 1);
        }

    }
    return ans;
}
```

