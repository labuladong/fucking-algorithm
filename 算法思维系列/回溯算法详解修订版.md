# å›æº¯ç®—æ³•è¯¦è§£

<p align='center'>
<a href="https://github.com/labuladong/fucking-algorithm" target="view_window"><img alt="GitHub" src="https://img.shields.io/github/stars/labuladong/fucking-algorithm?label=Stars&style=flat-square&logo=GitHub"></a>
<a href="https://appktavsiei5995.pc.xiaoe-tech.com/index" target="_blank"><img class="my_header_icon" src="https://img.shields.io/static/v1?label=ç²¾å“è¯¾ç¨‹&message=æŸ¥çœ‹&color=pink&style=flat"></a>
<a href="https://www.zhihu.com/people/labuladong"><img src="https://img.shields.io/badge/%E7%9F%A5%E4%B9%8E-@labuladong-000000.svg?style=flat-square&logo=Zhihu"></a>
<a href="https://space.bilibili.com/14089380"><img src="https://img.shields.io/badge/Bç«™-@labuladong-000000.svg?style=flat-square&logo=Bilibili"></a>
</p>

![](https://labuladong.github.io/algo/images/souyisou1.png)

**é€šçŸ¥ï¼š[æ•°æ®ç»“æ„ç²¾å“è¯¾](https://aep.h5.xeknow.com/s/1XJHEO) å·²æ›´æ–°åˆ° V2.0ï¼›[ç¬¬ 12 æœŸåˆ·é¢˜æ‰“å¡](https://mp.weixin.qq.com/s/eUG2OOzY3k_ZTz-CFvtv5Q) æœ€åä¸€å¤©æŠ¥åï¼›ç‚¹å‡»è¿™é‡Œä½“éªŒ [åˆ·é¢˜å…¨å®¶æ¡¶](https://labuladong.gitee.io/algo/images/others/%E5%85%A8%E5%AE%B6%E6%A1%B6.jpg)ã€‚å¦å¤–ï¼Œå»ºè®®ä½ åœ¨æˆ‘çš„ [ç½‘ç«™](https://labuladong.gitee.io/algo/) å­¦ä¹ æ–‡ç« ï¼Œä½“éªŒæ›´å¥½ã€‚**



è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¸ä»…å­¦ä¼šäº†ç®—æ³•å¥—è·¯ï¼Œè¿˜å¯ä»¥é¡ºä¾¿è§£å†³å¦‚ä¸‹é¢˜ç›®ï¼š

| LeetCode | åŠ›æ‰£ | éš¾åº¦ |
| :----: | :----: | :----: |
| [46. Permutations](https://leetcode.com/problems/permutations/) | [46. å…¨æ’åˆ—](https://leetcode.cn/problems/permutations/) | ğŸŸ 
| [51. N-Queens](https://leetcode.com/problems/n-queens/) | [51. N çš‡å](https://leetcode.cn/problems/n-queens/) | ğŸ”´
| - | [å‰‘æŒ‡ Offer II 083. æ²¡æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—](https://leetcode.cn/problems/VvJkup/) | ğŸŸ 

**-----------**

> æœ¬æ–‡æœ‰è§†é¢‘ç‰ˆï¼š[å›æº¯ç®—æ³•æ¡†æ¶å¥—è·¯è¯¦è§£](https://www.bilibili.com/video/BV1P5411N7Xc/)

è¿™ç¯‡æ–‡ç« æ˜¯å¾ˆä¹…ä¹‹å‰çš„ä¸€ç¯‡ [å›æº¯ç®—æ³•è¯¦è§£](https://mp.weixin.qq.com/s/trILKSiN9EoS58pXmvUtUQ) çš„è¿›é˜¶ç‰ˆï¼Œä¹‹å‰é‚£ç¯‡ä¸å¤Ÿæ¸…æ¥šï¼Œå°±ä¸å¿…çœ‹äº†ï¼Œçœ‹è¿™ç¯‡å°±è¡Œã€‚æŠŠæ¡†æ¶ç»™ä½ è®²æ¸…æ¥šï¼Œä½ ä¼šå‘ç°å›æº¯ç®—æ³•é—®é¢˜éƒ½æ˜¯ä¸€ä¸ªå¥—è·¯ã€‚

æœ¬æ–‡è§£å†³å‡ ä¸ªé—®é¢˜ï¼š

å›æº¯ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³å›æº¯ç®—æ³•ç›¸å…³çš„é—®é¢˜æœ‰ä»€ä¹ˆæŠ€å·§ï¼Ÿå¦‚ä½•å­¦ä¹ å›æº¯ç®—æ³•ï¼Ÿå›æº¯ç®—æ³•ä»£ç æ˜¯å¦æœ‰è§„å¾‹å¯å¾ªï¼Ÿ

å…¶å®å›æº¯ç®—æ³•å’Œæˆ‘ä»¬å¸¸è¯´çš„ DFS ç®—æ³•éå¸¸ç±»ä¼¼ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§æš´åŠ›ç©·ä¸¾ç®—æ³•ã€‚å›æº¯ç®—æ³•å’Œ DFS ç®—æ³•çš„ç»†å¾®å·®åˆ«æ˜¯ï¼š**å›æº¯ç®—æ³•æ˜¯åœ¨éå†ã€Œæ ‘æã€ï¼ŒDFS ç®—æ³•æ˜¯åœ¨éå†ã€ŒèŠ‚ç‚¹ã€**ï¼Œæœ¬æ–‡å°±æ˜¯ç®€å•æä¸€ä¸‹ï¼Œç­‰ä½ çœ‹åˆ°åæ–‡ [å›¾è®ºç®—æ³•åŸºç¡€](https://labuladong.github.io/article/fname.html?fname=å›¾) æ—¶å°±èƒ½æ·±åˆ»ç†è§£è¿™å¥è¯çš„å«ä¹‰äº†ã€‚

åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šå›æº¯ç®—æ³•æ¡†æ¶ï¼Œè§£å†³ä¸€ä¸ªå›æº¯é—®é¢˜ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå†³ç­–æ ‘çš„éå†è¿‡ç¨‹ï¼Œç«™åœ¨å›æº¯æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä½ åªéœ€è¦æ€è€ƒ 3 ä¸ªé—®é¢˜ï¼š

1ã€è·¯å¾„ï¼šä¹Ÿå°±æ˜¯å·²ç»åšå‡ºçš„é€‰æ‹©ã€‚

2ã€é€‰æ‹©åˆ—è¡¨ï¼šä¹Ÿå°±æ˜¯ä½ å½“å‰å¯ä»¥åšçš„é€‰æ‹©ã€‚

3ã€ç»“æŸæ¡ä»¶ï¼šä¹Ÿå°±æ˜¯åˆ°è¾¾å†³ç­–æ ‘åº•å±‚ï¼Œæ— æ³•å†åšé€‰æ‹©çš„æ¡ä»¶ã€‚

å¦‚æœä½ ä¸ç†è§£è¿™ä¸‰ä¸ªè¯è¯­çš„è§£é‡Šï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä»¬åé¢ä¼šç”¨ã€Œå…¨æ’åˆ—ã€å’Œã€ŒN çš‡åé—®é¢˜ã€è¿™ä¸¤ä¸ªç»å…¸çš„å›æº¯ç®—æ³•é—®é¢˜æ¥å¸®ä½ ç†è§£è¿™äº›è¯è¯­æ˜¯ä»€ä¹ˆæ„æ€ï¼Œç°åœ¨ä½ å…ˆç•™ç€å°è±¡ã€‚

ä»£ç æ–¹é¢ï¼Œå›æº¯ç®—æ³•çš„æ¡†æ¶ï¼š

```python
result = []
def backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨):
    if æ»¡è¶³ç»“æŸæ¡ä»¶:
        result.add(è·¯å¾„)
        return
    
    for é€‰æ‹© in é€‰æ‹©åˆ—è¡¨:
        åšé€‰æ‹©
        backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨)
        æ’¤é”€é€‰æ‹©
```

**å…¶æ ¸å¿ƒå°±æ˜¯ for å¾ªç¯é‡Œé¢çš„é€’å½’ï¼Œåœ¨é€’å½’è°ƒç”¨ä¹‹å‰ã€Œåšé€‰æ‹©ã€ï¼Œåœ¨é€’å½’è°ƒç”¨ä¹‹åã€Œæ’¤é”€é€‰æ‹©ã€**ï¼Œç‰¹åˆ«ç®€å•ã€‚

ä»€ä¹ˆå«åšé€‰æ‹©å’Œæ’¤é”€é€‰æ‹©å‘¢ï¼Œè¿™ä¸ªæ¡†æ¶çš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡ã€Œå…¨æ’åˆ—ã€è¿™ä¸ªé—®é¢˜æ¥è§£å¼€ä¹‹å‰çš„ç–‘æƒ‘ï¼Œè¯¦ç»†æ¢ç©¶ä¸€ä¸‹å…¶ä¸­çš„å¥¥å¦™ï¼

### ä¸€ã€å…¨æ’åˆ—é—®é¢˜

åŠ›æ‰£ç¬¬ 46 é¢˜ã€Œå…¨æ’åˆ—ã€å°±æ˜¯ç»™ä½ è¾“å…¥ä¸€ä¸ªæ•°ç»„ `nums`ï¼Œè®©ä½ è¿”å›è¿™äº›æ•°å­—çš„å…¨æ’åˆ—ã€‚

> **PSï¼šæˆ‘ä»¬è¿™æ¬¡è®¨è®ºçš„å…¨æ’åˆ—é—®é¢˜ä¸åŒ…å«é‡å¤çš„æ•°å­—ï¼ŒåŒ…å«é‡å¤æ•°å­—çš„æ‰©å±•åœºæ™¯æˆ‘åœ¨åæ–‡ [å›æº¯ç®—æ³•ç§’æ€æ’åˆ—ç»„åˆå­é›†çš„ä¹ç§é¢˜å‹](https://labuladong.github.io/article/fname.html?fname=å­é›†æ’åˆ—ç»„åˆ) ä¸­è®²è§£**ã€‚

æˆ‘ä»¬åœ¨é«˜ä¸­çš„æ—¶å€™å°±åšè¿‡æ’åˆ—ç»„åˆçš„æ•°å­¦é¢˜ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“ `n` ä¸ªä¸é‡å¤çš„æ•°ï¼Œå…¨æ’åˆ—å…±æœ‰ `n!` ä¸ªã€‚é‚£ä¹ˆæˆ‘ä»¬å½“æ—¶æ˜¯æ€ä¹ˆç©·ä¸¾å…¨æ’åˆ—çš„å‘¢ï¼Ÿ

æ¯”æ–¹è¯´ç»™ä¸‰ä¸ªæ•° `[1,2,3]`ï¼Œä½ è‚¯å®šä¸ä¼šæ— è§„å¾‹åœ°ä¹±ç©·ä¸¾ï¼Œä¸€èˆ¬æ˜¯è¿™æ ·ï¼š

å…ˆå›ºå®šç¬¬ä¸€ä½ä¸º 1ï¼Œç„¶åç¬¬äºŒä½å¯ä»¥æ˜¯ 2ï¼Œé‚£ä¹ˆç¬¬ä¸‰ä½åªèƒ½æ˜¯ 3ï¼›ç„¶åå¯ä»¥æŠŠç¬¬äºŒä½å˜æˆ 3ï¼Œç¬¬ä¸‰ä½å°±åªèƒ½æ˜¯ 2 äº†ï¼›ç„¶åå°±åªèƒ½å˜åŒ–ç¬¬ä¸€ä½ï¼Œå˜æˆ 2ï¼Œç„¶åå†ç©·ä¸¾åä¸¤ä½â€¦â€¦

å…¶å®è¿™å°±æ˜¯å›æº¯ç®—æ³•ï¼Œæˆ‘ä»¬é«˜ä¸­æ— å¸ˆè‡ªé€šå°±ä¼šç”¨ï¼Œæˆ–è€…æœ‰çš„åŒå­¦ç›´æ¥ç”»å‡ºå¦‚ä¸‹è¿™æ£µå›æº¯æ ‘ï¼š

![](https://labuladong.github.io/algo/images/backtracking/1.jpg)

åªè¦ä»æ ¹éå†è¿™æ£µæ ‘ï¼Œè®°å½•è·¯å¾„ä¸Šçš„æ•°å­—ï¼Œå…¶å®å°±æ˜¯æ‰€æœ‰çš„å…¨æ’åˆ—ã€‚**æˆ‘ä»¬ä¸å¦¨æŠŠè¿™æ£µæ ‘ç§°ä¸ºå›æº¯ç®—æ³•çš„ã€Œå†³ç­–æ ‘ã€**ã€‚

**ä¸ºå•¥è¯´è¿™æ˜¯å†³ç­–æ ‘å‘¢ï¼Œå› ä¸ºä½ åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå…¶å®éƒ½åœ¨åšå†³ç­–**ã€‚æ¯”å¦‚è¯´ä½ ç«™åœ¨ä¸‹å›¾çš„çº¢è‰²èŠ‚ç‚¹ä¸Šï¼š

![](https://labuladong.github.io/algo/images/backtracking/2.jpg)

ä½ ç°åœ¨å°±åœ¨åšå†³ç­–ï¼Œå¯ä»¥é€‰æ‹© 1 é‚£æ¡æ ‘æï¼Œä¹Ÿå¯ä»¥é€‰æ‹© 3 é‚£æ¡æ ‘æã€‚ä¸ºå•¥åªèƒ½åœ¨ 1 å’Œ 3 ä¹‹ä¸­é€‰æ‹©å‘¢ï¼Ÿå› ä¸º 2 è¿™ä¸ªæ ‘æåœ¨ä½ èº«åï¼Œè¿™ä¸ªé€‰æ‹©ä½ ä¹‹å‰åšè¿‡äº†ï¼Œè€Œå…¨æ’åˆ—æ˜¯ä¸å…è®¸é‡å¤ä½¿ç”¨æ•°å­—çš„ã€‚

**ç°åœ¨å¯ä»¥è§£ç­”å¼€å¤´çš„å‡ ä¸ªåè¯ï¼š`[2]` å°±æ˜¯ã€Œè·¯å¾„ã€ï¼Œè®°å½•ä½ å·²ç»åšè¿‡çš„é€‰æ‹©ï¼›`[1,3]` å°±æ˜¯ã€Œé€‰æ‹©åˆ—è¡¨ã€ï¼Œè¡¨ç¤ºä½ å½“å‰å¯ä»¥åšå‡ºçš„é€‰æ‹©ï¼›ã€Œç»“æŸæ¡ä»¶ã€å°±æ˜¯éå†åˆ°æ ‘çš„åº•å±‚å¶å­èŠ‚ç‚¹ï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯é€‰æ‹©åˆ—è¡¨ä¸ºç©ºçš„æ—¶å€™**ã€‚

å¦‚æœæ˜ç™½äº†è¿™å‡ ä¸ªåè¯ï¼Œå¯ä»¥æŠŠã€Œè·¯å¾„ã€å’Œã€Œé€‰æ‹©ã€åˆ—è¡¨ä½œä¸ºå†³ç­–æ ‘ä¸Šæ¯ä¸ªèŠ‚ç‚¹çš„å±æ€§ï¼Œæ¯”å¦‚ä¸‹å›¾åˆ—å‡ºäº†å‡ ä¸ªè“è‰²èŠ‚ç‚¹çš„å±æ€§ï¼š

![](https://labuladong.github.io/algo/images/backtracking/3.jpg)

**æˆ‘ä»¬å®šä¹‰çš„ `backtrack` å‡½æ•°å…¶å®å°±åƒä¸€ä¸ªæŒ‡é’ˆï¼Œåœ¨è¿™æ£µæ ‘ä¸Šæ¸¸èµ°ï¼ŒåŒæ—¶è¦æ­£ç¡®ç»´æŠ¤æ¯ä¸ªèŠ‚ç‚¹çš„å±æ€§ï¼Œæ¯å½“èµ°åˆ°æ ‘çš„åº•å±‚å¶å­èŠ‚ç‚¹ï¼Œå…¶ã€Œè·¯å¾„ã€å°±æ˜¯ä¸€ä¸ªå…¨æ’åˆ—**ã€‚

å†è¿›ä¸€æ­¥ï¼Œå¦‚ä½•éå†ä¸€æ£µæ ‘ï¼Ÿè¿™ä¸ªåº”è¯¥ä¸éš¾å§ã€‚å›å¿†ä¸€ä¸‹ä¹‹å‰ [å­¦ä¹ æ•°æ®ç»“æ„çš„æ¡†æ¶æ€ç»´](https://labuladong.github.io/article/fname.html?fname=å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çš„é«˜æ•ˆæ–¹æ³•) å†™è¿‡ï¼Œå„ç§æœç´¢é—®é¢˜å…¶å®éƒ½æ˜¯æ ‘çš„éå†é—®é¢˜ï¼Œè€Œå¤šå‰æ ‘çš„éå†æ¡†æ¶å°±æ˜¯è¿™æ ·ï¼š

```java
void traverse(TreeNode root) {
    for (TreeNode child : root.childern) {
        // å‰åºä½ç½®éœ€è¦çš„æ“ä½œ
        traverse(child);
        // ååºä½ç½®éœ€è¦çš„æ“ä½œ
    }
}
```

> PSï¼šç»†å¿ƒçš„è¯»è€…è‚¯å®šä¼šç–‘é—®ï¼šå¤šå‰æ ‘ DFS éå†æ¡†æ¶çš„å‰åºä½ç½®å’Œååºä½ç½®åº”è¯¥åœ¨ for å¾ªç¯å¤–é¢ï¼Œå¹¶ä¸åº”è¯¥æ˜¯åœ¨ for å¾ªç¯é‡Œé¢å‘€ï¼Ÿä¸ºä»€ä¹ˆåœ¨å›æº¯ç®—æ³•ä¸­è·‘åˆ° for å¾ªç¯é‡Œé¢äº†ï¼Ÿ
>
> æ˜¯çš„ï¼ŒDFS ç®—æ³•çš„å‰åºå’Œååºä½ç½®åº”è¯¥åœ¨ for å¾ªç¯å¤–é¢ï¼Œä¸è¿‡å›æº¯ç®—æ³•å’Œ DFS ç®—æ³•ç•¥æœ‰ä¸åŒï¼Œåæ–‡ [å›¾è®ºç®—æ³•åŸºç¡€](https://labuladong.github.io/article/fname.html?fname=å›¾) ä¼šè¯¦ç»†å¯¹æ¯”ï¼Œè¿™é‡Œå¯ä»¥æš‚ä¸”å¿½ç•¥è¿™ä¸ªé—®é¢˜ã€‚

è€Œæ‰€è°“çš„å‰åºéå†å’Œååºéå†ï¼Œä»–ä»¬åªæ˜¯ä¸¤ä¸ªå¾ˆæœ‰ç”¨çš„æ—¶é—´ç‚¹ï¼Œæˆ‘ç»™ä½ ç”»å¼ å›¾ä½ å°±æ˜ç™½äº†ï¼š

![](https://labuladong.github.io/algo/images/backtracking/4.jpg)

**å‰åºéå†çš„ä»£ç åœ¨è¿›å…¥æŸä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰çš„é‚£ä¸ªæ—¶é—´ç‚¹æ‰§è¡Œï¼Œååºéå†ä»£ç åœ¨ç¦»å¼€æŸä¸ªèŠ‚ç‚¹ä¹‹åçš„é‚£ä¸ªæ—¶é—´ç‚¹æ‰§è¡Œ**ã€‚

å›æƒ³æˆ‘ä»¬åˆšæ‰è¯´çš„ï¼Œã€Œè·¯å¾„ã€å’Œã€Œé€‰æ‹©ã€æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„å±æ€§ï¼Œå‡½æ•°åœ¨æ ‘ä¸Šæ¸¸èµ°è¦æ­£ç¡®ç»´æŠ¤èŠ‚ç‚¹çš„å±æ€§ï¼Œé‚£ä¹ˆå°±è¦åœ¨è¿™ä¸¤ä¸ªç‰¹æ®Šæ—¶é—´ç‚¹æç‚¹åŠ¨ä½œï¼š

![](https://labuladong.github.io/algo/images/backtracking/5.jpg)

ç°åœ¨ï¼Œä½ æ˜¯å¦ç†è§£äº†å›æº¯ç®—æ³•çš„è¿™æ®µæ ¸å¿ƒæ¡†æ¶ï¼Ÿ

```python
for é€‰æ‹© in é€‰æ‹©åˆ—è¡¨:
    # åšé€‰æ‹©
    å°†è¯¥é€‰æ‹©ä»é€‰æ‹©åˆ—è¡¨ç§»é™¤
    è·¯å¾„.add(é€‰æ‹©)
    backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨)
    # æ’¤é”€é€‰æ‹©
    è·¯å¾„.remove(é€‰æ‹©)
    å°†è¯¥é€‰æ‹©å†åŠ å…¥é€‰æ‹©åˆ—è¡¨
```

**æˆ‘ä»¬åªè¦åœ¨é€’å½’ä¹‹å‰åšå‡ºé€‰æ‹©ï¼Œåœ¨é€’å½’ä¹‹åæ’¤é”€åˆšæ‰çš„é€‰æ‹©**ï¼Œå°±èƒ½æ­£ç¡®å¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„é€‰æ‹©åˆ—è¡¨å’Œè·¯å¾„ã€‚

ä¸‹é¢ï¼Œç›´æ¥çœ‹å…¨æ’åˆ—ä»£ç ï¼š

```java
List<List<Integer>> res = new LinkedList<>();

/* ä¸»å‡½æ•°ï¼Œè¾“å…¥ä¸€ç»„ä¸é‡å¤çš„æ•°å­—ï¼Œè¿”å›å®ƒä»¬çš„å…¨æ’åˆ— */
List<List<Integer>> permute(int[] nums) {
    // è®°å½•ã€Œè·¯å¾„ã€
    LinkedList<Integer> track = new LinkedList<>();
    // ã€Œè·¯å¾„ã€ä¸­çš„å…ƒç´ ä¼šè¢«æ ‡è®°ä¸º trueï¼Œé¿å…é‡å¤ä½¿ç”¨
    boolean[] used = new boolean[nums.length];
    
    backtrack(nums, track, used);
    return res;
}

// è·¯å¾„ï¼šè®°å½•åœ¨ track ä¸­
// é€‰æ‹©åˆ—è¡¨ï¼šnums ä¸­ä¸å­˜åœ¨äº track çš„é‚£äº›å…ƒç´ ï¼ˆused[i] ä¸º falseï¼‰
// ç»“æŸæ¡ä»¶ï¼šnums ä¸­çš„å…ƒç´ å…¨éƒ½åœ¨ track ä¸­å‡ºç°
void backtrack(int[] nums, LinkedList<Integer> track, boolean[] used) {
    // è§¦å‘ç»“æŸæ¡ä»¶
    if (track.size() == nums.length) {
        res.add(new LinkedList(track));
        return;
    }
    
    for (int i = 0; i < nums.length; i++) {
        // æ’é™¤ä¸åˆæ³•çš„é€‰æ‹©
        if (used[i]) {
            // nums[i] å·²ç»åœ¨ track ä¸­ï¼Œè·³è¿‡
            continue;
        }
        // åšé€‰æ‹©
        track.add(nums[i]);
        used[i] = true;
        // è¿›å…¥ä¸‹ä¸€å±‚å†³ç­–æ ‘
        backtrack(nums, track, used);
        // å–æ¶ˆé€‰æ‹©
        track.removeLast();
        used[i] = false;
    }
}
```

æˆ‘ä»¬è¿™é‡Œç¨å¾®åšäº†äº›å˜é€šï¼Œæ²¡æœ‰æ˜¾å¼è®°å½•ã€Œé€‰æ‹©åˆ—è¡¨ã€ï¼Œè€Œæ˜¯é€šè¿‡ `used` æ•°ç»„æ’é™¤å·²ç»å­˜åœ¨ `track` ä¸­çš„å…ƒç´ ï¼Œä»è€Œæ¨å¯¼å‡ºå½“å‰çš„é€‰æ‹©åˆ—è¡¨ï¼š

![](https://labuladong.github.io/algo/images/backtracking/6.jpg)

è‡³æ­¤ï¼Œæˆ‘ä»¬å°±é€šè¿‡å…¨æ’åˆ—é—®é¢˜è¯¦è§£äº†å›æº¯ç®—æ³•çš„åº•å±‚åŸç†ã€‚å½“ç„¶ï¼Œè¿™ä¸ªç®—æ³•è§£å†³å…¨æ’åˆ—ä¸æ˜¯æœ€é«˜æ•ˆçš„ï¼Œä½ å¯èƒ½çœ‹åˆ°æœ‰çš„è§£æ³•è¿ `used` æ•°ç»„éƒ½ä¸ä½¿ç”¨ï¼Œé€šè¿‡äº¤æ¢å…ƒç´ è¾¾åˆ°ç›®çš„ã€‚ä½†æ˜¯é‚£ç§è§£æ³•ç¨å¾®éš¾ç†è§£ä¸€äº›ï¼Œè¿™é‡Œå°±ä¸å†™äº†ï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªè¡Œæœç´¢ä¸€ä¸‹ã€‚

ä½†æ˜¯å¿…é¡»è¯´æ˜çš„æ˜¯ï¼Œä¸ç®¡æ€ä¹ˆä¼˜åŒ–ï¼Œéƒ½ç¬¦åˆå›æº¯æ¡†æ¶ï¼Œè€Œä¸”æ—¶é—´å¤æ‚åº¦éƒ½ä¸å¯èƒ½ä½äº O(N!)ï¼Œå› ä¸ºç©·ä¸¾æ•´æ£µå†³ç­–æ ‘æ˜¯æ— æ³•é¿å…çš„ã€‚**è¿™ä¹Ÿæ˜¯å›æº¯ç®—æ³•çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œä¸åƒåŠ¨æ€è§„åˆ’å­˜åœ¨é‡å å­é—®é¢˜å¯ä»¥ä¼˜åŒ–ï¼Œå›æº¯ç®—æ³•å°±æ˜¯çº¯æš´åŠ›ç©·ä¸¾ï¼Œå¤æ‚åº¦ä¸€èˆ¬éƒ½å¾ˆé«˜**ã€‚

æ˜ç™½äº†å…¨æ’åˆ—é—®é¢˜ï¼Œå°±å¯ä»¥ç›´æ¥å¥—å›æº¯ç®—æ³•æ¡†æ¶äº†ï¼Œä¸‹é¢ç®€å•çœ‹çœ‹ N çš‡åé—®é¢˜ã€‚

### äºŒã€N çš‡åé—®é¢˜

åŠ›æ‰£ç¬¬ 51 é¢˜ã€ŒN çš‡åã€å°±æ˜¯è¿™ä¸ªç»å…¸é—®é¢˜ï¼Œç®€å•è§£é‡Šä¸€ä¸‹ï¼šç»™ä½ ä¸€ä¸ª `NÃ—N` çš„æ£‹ç›˜ï¼Œè®©ä½ æ”¾ç½® `N` ä¸ªçš‡åï¼Œä½¿å¾—å®ƒä»¬ä¸èƒ½äº’ç›¸æ”»å‡»ã€‚

> PSï¼šçš‡åå¯ä»¥æ”»å‡»åŒä¸€è¡Œã€åŒä¸€åˆ—ã€å·¦ä¸Šå·¦ä¸‹å³ä¸Šå³ä¸‹å››ä¸ªæ–¹å‘çš„ä»»æ„å•ä½ã€‚

è¿™ä¸ªé—®é¢˜æœ¬è´¨ä¸Šè·Ÿå…¨æ’åˆ—é—®é¢˜å·®ä¸å¤šï¼Œå†³ç­–æ ‘çš„æ¯ä¸€å±‚è¡¨ç¤ºæ£‹ç›˜ä¸Šçš„æ¯ä¸€è¡Œï¼›æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åšå‡ºçš„é€‰æ‹©æ˜¯ï¼Œåœ¨è¯¥è¡Œçš„ä»»æ„ä¸€åˆ—æ”¾ç½®ä¸€ä¸ªçš‡åã€‚

å› ä¸º C++ ä»£ç å¯¹å­—ç¬¦ä¸²çš„æ“ä½œæ–¹ä¾¿ä¸€äº›ï¼Œæ‰€ä»¥è¿™é“é¢˜æˆ‘ç”¨ C++ æ¥å†™è§£æ³•ï¼Œç›´æ¥å¥—ç”¨å›æº¯ç®—æ³•æ¡†æ¶:

```cpp
vector<vector<string>> res;

/* è¾“å…¥æ£‹ç›˜è¾¹é•¿ nï¼Œè¿”å›æ‰€æœ‰åˆæ³•çš„æ”¾ç½® */
vector<vector<string>> solveNQueens(int n) {
    // vector<string> ä»£è¡¨ä¸€ä¸ªæ£‹ç›˜
    // '.' è¡¨ç¤ºç©ºï¼Œ'Q' è¡¨ç¤ºçš‡åï¼Œåˆå§‹åŒ–ç©ºæ£‹ç›˜
    vector<string> board(n, string(n, '.'));
    backtrack(board, 0);
    return res;
}

// è·¯å¾„ï¼šboard ä¸­å°äº row çš„é‚£äº›è¡Œéƒ½å·²ç»æˆåŠŸæ”¾ç½®äº†çš‡å
// é€‰æ‹©åˆ—è¡¨ï¼šç¬¬ row è¡Œçš„æ‰€æœ‰åˆ—éƒ½æ˜¯æ”¾ç½®çš‡åçš„é€‰æ‹©
// ç»“æŸæ¡ä»¶ï¼šrow è¶…è¿‡ board çš„æœ€åä¸€è¡Œ
void backtrack(vector<string>& board, int row) {
    // è§¦å‘ç»“æŸæ¡ä»¶
    if (row == board.size()) {
        res.push_back(board);
        return;
    }
    
    int n = board[row].size();
    for (int col = 0; col < n; col++) {
        // æ’é™¤ä¸åˆæ³•é€‰æ‹©
        if (!isValid(board, row, col)) {
            continue;
        }
        // åšé€‰æ‹©
        board[row][col] = 'Q';
        // è¿›å…¥ä¸‹ä¸€è¡Œå†³ç­–
        backtrack(board, row + 1);
        // æ’¤é”€é€‰æ‹©
        board[row][col] = '.';
    }
}
```

è¿™éƒ¨åˆ†ä¸»è¦ä»£ç ï¼Œå…¶å®è·Ÿå…¨æ’åˆ—é—®é¢˜å·®ä¸å¤šï¼Œ`isValid` å‡½æ•°çš„å®ç°ä¹Ÿå¾ˆç®€å•ï¼š

```cpp
/* æ˜¯å¦å¯ä»¥åœ¨ board[row][col] æ”¾ç½®çš‡åï¼Ÿ */
bool isValid(vector<string>& board, int row, int col) {
    int n = board.size();
    // æ£€æŸ¥åˆ—æ˜¯å¦æœ‰çš‡åäº’ç›¸å†²çª
    for (int i = 0; i <= row; i++) {
        if (board[i][col] == 'Q')
            return false;
    }
    // æ£€æŸ¥å³ä¸Šæ–¹æ˜¯å¦æœ‰çš‡åäº’ç›¸å†²çª
    for (int i = row - 1, j = col + 1; 
            i >= 0 && j < n; i--, j++) {
        if (board[i][j] == 'Q')
            return false;
    }
    // æ£€æŸ¥å·¦ä¸Šæ–¹æ˜¯å¦æœ‰çš‡åäº’ç›¸å†²çª
    for (int i = row - 1, j = col - 1;
            i >= 0 && j >= 0; i--, j--) {
        if (board[i][j] == 'Q')
            return false;
    }
    return true;
}
```

> PSï¼šè‚¯å®šæœ‰è¯»è€…é—®ï¼ŒæŒ‰ç…§ N çš‡åé—®é¢˜çš„æè¿°ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸æ£€æŸ¥å·¦ä¸‹è§’ï¼Œå³ä¸‹è§’å’Œä¸‹æ–¹çš„æ ¼å­ï¼Œåªæ£€æŸ¥äº†å·¦ä¸Šè§’ï¼Œå³ä¸Šè§’å’Œä¸Šæ–¹çš„æ ¼å­å‘¢ï¼Ÿ
>
> å› ä¸ºçš‡åæ˜¯ä¸€è¡Œä¸€è¡Œä»ä¸Šå¾€ä¸‹æ”¾çš„ï¼Œæ‰€ä»¥å·¦ä¸‹æ–¹ï¼Œå³ä¸‹æ–¹å’Œæ­£ä¸‹æ–¹ä¸ç”¨æ£€æŸ¥ï¼ˆè¿˜æ²¡æ”¾çš‡åï¼‰ï¼›å› ä¸ºä¸€è¡Œåªä¼šæ”¾ä¸€ä¸ªçš‡åï¼Œæ‰€ä»¥æ¯è¡Œä¸ç”¨æ£€æŸ¥ã€‚ä¹Ÿå°±æ˜¯æœ€ååªç”¨æ£€æŸ¥ä¸Šé¢ï¼Œå·¦ä¸Šï¼Œå³ä¸Šä¸‰ä¸ªæ–¹å‘ã€‚

å‡½æ•° `backtrack` ä¾ç„¶åƒä¸ªåœ¨å†³ç­–æ ‘ä¸Šæ¸¸èµ°çš„æŒ‡é’ˆï¼Œé€šè¿‡ `row` å’Œ `col` å°±å¯ä»¥è¡¨ç¤ºå‡½æ•°éå†åˆ°çš„ä½ç½®ï¼Œé€šè¿‡ `isValid` å‡½æ•°å¯ä»¥å°†ä¸ç¬¦åˆæ¡ä»¶çš„æƒ…å†µå‰ªæï¼š

![](https://labuladong.github.io/algo/images/backtracking/7.jpg)

å¦‚æœç›´æ¥ç»™ä½ è¿™ä¹ˆä¸€å¤§æ®µè§£æ³•ä»£ç ï¼Œå¯èƒ½æ˜¯æ‡µé€¼çš„ã€‚ä½†æ˜¯ç°åœ¨æ˜ç™½äº†å›æº¯ç®—æ³•çš„æ¡†æ¶å¥—è·¯ï¼Œè¿˜æœ‰å•¥éš¾ç†è§£çš„å‘¢ï¼Ÿæ— éæ˜¯æ”¹æ”¹åšé€‰æ‹©çš„æ–¹å¼ï¼Œæ’é™¤ä¸åˆæ³•é€‰æ‹©çš„æ–¹å¼è€Œå·²ï¼Œåªè¦æ¡†æ¶å­˜äºå¿ƒï¼Œä½ é¢å¯¹çš„åªå‰©ä¸‹å°é—®é¢˜äº†ã€‚

å½“ `N = 8` æ—¶ï¼Œå°±æ˜¯å…«çš‡åé—®é¢˜ï¼Œæ•°å­¦å¤§ä½¬é«˜æ–¯ç©·å°½ä¸€ç”Ÿéƒ½æ²¡æœ‰æ•°æ¸…æ¥šå…«çš‡åé—®é¢˜åˆ°åº•æœ‰å‡ ç§å¯èƒ½çš„æ”¾ç½®æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç®—æ³•åªéœ€è¦ä¸€ç§’å°±å¯ä»¥ç®—å‡ºæ¥æ‰€æœ‰å¯èƒ½çš„ç»“æœã€‚

ä¸è¿‡çœŸçš„ä¸æ€ªé«˜æ–¯ï¼Œè¿™ä¸ªé—®é¢˜çš„å¤æ‚åº¦ç¡®å®éå¸¸é«˜ï¼Œç²—ç•¥ä¼°ç®—ä¸€ä¸‹ï¼š

`N` è¡Œæ£‹ç›˜ä¸­ï¼Œç¬¬ä¸€è¡Œæœ‰ `N` ä¸ªä½ç½®å¯èƒ½å¯ä»¥æ”¾çš‡åï¼Œç¬¬äºŒè¡Œæœ‰ `N - 1` ä¸ªä½ç½®ï¼Œç¬¬ä¸‰è¡Œæœ‰ `N - 2` ä¸ªä½ç½®ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå†å åŠ æ¯æ¬¡æ”¾çš‡åä¹‹å‰ `isValid` å‡½æ•°æ‰€éœ€çš„ O(N) å¤æ‚åº¦ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸Šç•Œæ˜¯ O(N! * N)ï¼Œè€Œä¸”æ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„å†—ä½™è®¡ç®—å¯ä»¥ä¼˜åŒ–æ•ˆç‡ã€‚ä½ å¯ä»¥è¯•è¯• `N = 10` çš„æ—¶å€™ï¼Œè®¡ç®—å°±å·²ç»å¾ˆè€—æ—¶äº†ã€‚

å½“ç„¶ï¼Œå› ä¸ºæœ‰ `isValid` å‡½æ•°å‰ªæï¼Œå¹¶ä¸ä¼šçœŸçš„åœ¨æ¯ä¸ªä½ç½®éƒ½å°è¯•æ”¾çš‡åï¼Œæ‰€ä»¥å®é™…çš„æ‰§è¡Œæ•ˆç‡ä¼šé«˜ä¸€äº›ã€‚ä½†æ­£å¦‚å‰æ–‡ [ç®—æ³•æ—¶ç©ºå¤æ‚åº¦åˆ†æå®ç”¨æŒ‡å—](https://labuladong.github.io/article/fname.html?fname=æ—¶é—´å¤æ‚åº¦) æ‰€è¯´ï¼Œè¿™ä¸ªæ—¶é—´å¤æ‚åº¦ä½œä¸ºä¸Šç•Œæ˜¯æ²¡é—®é¢˜çš„ã€‚

**æœ‰çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬å¹¶ä¸æƒ³å¾—åˆ°æ‰€æœ‰åˆæ³•çš„ç­”æ¡ˆï¼Œåªæƒ³è¦ä¸€ä¸ªç­”æ¡ˆï¼Œæ€ä¹ˆåŠå‘¢**ï¼Ÿæ¯”å¦‚è§£æ•°ç‹¬çš„ç®—æ³•ï¼Œæ‰¾æ‰€æœ‰è§£æ³•å¤æ‚åº¦å¤ªé«˜ï¼Œåªè¦æ‰¾åˆ°ä¸€ç§è§£æ³•å°±å¯ä»¥ã€‚

å…¶å®ç‰¹åˆ«ç®€å•ï¼Œåªè¦ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å›æº¯ç®—æ³•çš„ä»£ç å³å¯ï¼š

```cpp
// å‡½æ•°æ‰¾åˆ°ä¸€ä¸ªç­”æ¡ˆåå°±è¿”å› true
bool backtrack(vector<string>& board, int row) {
    // è§¦å‘ç»“æŸæ¡ä»¶
    if (row == board.size()) {
        res.push_back(board);
        return true;
    }
    ...
    for (int col = 0; col < n; col++) {
        ...
        board[row][col] = 'Q';

        if (backtrack(board, row + 1))
            return true;
        
        board[row][col] = '.';
    }

    return false;
}
```

è¿™æ ·ä¿®æ”¹åï¼Œåªè¦æ‰¾åˆ°ä¸€ä¸ªç­”æ¡ˆï¼Œfor å¾ªç¯çš„åç»­é€’å½’ç©·ä¸¾éƒ½ä¼šè¢«é˜»æ–­ã€‚ä¹Ÿè®¸ä½ å¯ä»¥åœ¨ N çš‡åé—®é¢˜çš„ä»£ç æ¡†æ¶ä¸Šï¼Œç¨åŠ ä¿®æ”¹ï¼Œå†™ä¸€ä¸ªè§£æ•°ç‹¬çš„ç®—æ³•ï¼Ÿ

### ä¸‰ã€æœ€åæ€»ç»“

å›æº¯ç®—æ³•å°±æ˜¯ä¸ªå¤šå‰æ ‘çš„éå†é—®é¢˜ï¼Œå…³é”®å°±æ˜¯åœ¨å‰åºéå†å’Œååºéå†çš„ä½ç½®åšä¸€äº›æ“ä½œï¼Œç®—æ³•æ¡†æ¶å¦‚ä¸‹ï¼š

```python
def backtrack(...):
    for é€‰æ‹© in é€‰æ‹©åˆ—è¡¨:
        åšé€‰æ‹©
        backtrack(...)
        æ’¤é”€é€‰æ‹©
```

**å†™ `backtrack` å‡½æ•°æ—¶ï¼Œéœ€è¦ç»´æŠ¤èµ°è¿‡çš„ã€Œè·¯å¾„ã€å’Œå½“å‰å¯ä»¥åšçš„ã€Œé€‰æ‹©åˆ—è¡¨ã€ï¼Œå½“è§¦å‘ã€Œç»“æŸæ¡ä»¶ã€æ—¶ï¼Œå°†ã€Œè·¯å¾„ã€è®°å…¥ç»“æœé›†**ã€‚

å…¶å®æƒ³æƒ³çœ‹ï¼Œå›æº¯ç®—æ³•å’ŒåŠ¨æ€è§„åˆ’æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒå‘¢ï¼Ÿæˆ‘ä»¬åœ¨åŠ¨æ€è§„åˆ’ç³»åˆ—æ–‡ç« ä¸­å¤šæ¬¡å¼ºè°ƒï¼ŒåŠ¨æ€è§„åˆ’çš„ä¸‰ä¸ªéœ€è¦æ˜ç¡®çš„ç‚¹å°±æ˜¯ã€ŒçŠ¶æ€ã€ã€Œé€‰æ‹©ã€å’Œã€Œbase caseã€ï¼Œæ˜¯ä¸æ˜¯å°±å¯¹åº”ç€èµ°è¿‡çš„ã€Œè·¯å¾„ã€ï¼Œå½“å‰çš„ã€Œé€‰æ‹©åˆ—è¡¨ã€å’Œã€Œç»“æŸæ¡ä»¶ã€ï¼Ÿ

åŠ¨æ€è§„åˆ’å’Œå›æº¯ç®—æ³•åº•å±‚éƒ½æŠŠé—®é¢˜æŠ½è±¡æˆäº†æ ‘çš„ç»“æ„ï¼Œä½†è¿™ä¸¤ç§ç®—æ³•åœ¨æ€è·¯ä¸Šæ˜¯å®Œå…¨ä¸åŒçš„ã€‚åœ¨ [ä¸œå“¥å¸¦ä½ åˆ·äºŒå‰æ ‘ï¼ˆçº²é¢†ç¯‡ï¼‰](https://labuladong.github.io/article/fname.html?fname=äºŒå‰æ ‘æ€»ç»“) ä½ å°†çœ‹åˆ°åŠ¨æ€è§„åˆ’å’Œå›æº¯ç®—æ³•æ›´æ·±å±‚æ¬¡çš„åŒºåˆ«å’Œè”ç³»ã€‚



<hr>
<details>
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„æ–‡ç« </strong></summary>

 - [BFS ç®—æ³•è§£é¢˜å¥—è·¯æ¡†æ¶](https://labuladong.github.io/article/fname.html?fname=BFSæ¡†æ¶)
 - [Dijkstra ç®—æ³•æ¨¡æ¿åŠåº”ç”¨](https://labuladong.github.io/article/fname.html?fname=dijkstraç®—æ³•)
 - [FloodFillç®—æ³•è¯¦è§£åŠåº”ç”¨](https://labuladong.github.io/article/fname.html?fname=FloodFillç®—æ³•è¯¦è§£åŠåº”ç”¨)
 - [base case å’Œå¤‡å¿˜å½•çš„åˆå§‹å€¼æ€ä¹ˆå®šï¼Ÿ](https://labuladong.github.io/article/fname.html?fname=å¤‡å¿˜å½•ç­‰åŸºç¡€)
 - [ä¸œå“¥å¸¦ä½ åˆ·äºŒå‰æ ‘ï¼ˆçº²é¢†ç¯‡ï¼‰](https://labuladong.github.io/article/fname.html?fname=äºŒå‰æ ‘æ€»ç»“)
 - [ä¸¤ç§æ€è·¯è§£å†³å•è¯æ‹¼æ¥é—®é¢˜](https://labuladong.github.io/article/fname.html?fname=å•è¯æ‹¼æ¥)
 - [äºŒåˆ†æœç´¢æ€ä¹ˆç”¨ï¼Ÿæˆ‘å’Œå¿«æ‰‹é¢è¯•å®˜è¿›è¡Œäº†æ·±åº¦æ¢è®¨](https://labuladong.github.io/article/fname.html?fname=äºŒåˆ†åˆ†å‰²å­æ•°ç»„)
 - [åˆ†æ²»ç®—æ³•è¯¦è§£ï¼šè¿ç®—ä¼˜å…ˆçº§](https://labuladong.github.io/article/fname.html?fname=åˆ†æ²»ç®—æ³•)
 - [å‰ç¼€æ ‘ç®—æ³•æ¨¡æ¿ç§’æ€äº”é“ç®—æ³•é¢˜](https://labuladong.github.io/article/fname.html?fname=trie)
 - [åŠ¨æ€è§„åˆ’å’Œå›æº¯ç®—æ³•åˆ°åº•è°æ˜¯è°çˆ¹ï¼Ÿ](https://labuladong.github.io/article/fname.html?fname=targetSum)
 - [å›æº¯ç®—æ³•æœ€ä½³å®è·µï¼šæ‹¬å·ç”Ÿæˆ](https://labuladong.github.io/article/fname.html?fname=åˆæ³•æ‹¬å·ç”Ÿæˆ)
 - [å›æº¯ç®—æ³•æœ€ä½³å®è·µï¼šè§£æ•°ç‹¬](https://labuladong.github.io/article/fname.html?fname=sudoku)
 - [å›æº¯ç®—æ³•ç§’æ€æ‰€æœ‰æ’åˆ—/ç»„åˆ/å­é›†é—®é¢˜](https://labuladong.github.io/article/fname.html?fname=å­é›†æ’åˆ—ç»„åˆ)
 - [å›¾è®ºåŸºç¡€åŠéå†ç®—æ³•](https://labuladong.github.io/article/fname.html?fname=å›¾)
 - [å­¦ä¹ ç®—æ³•å’Œåˆ·é¢˜çš„æ¡†æ¶æ€ç»´](https://labuladong.github.io/article/fname.html?fname=å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çš„é«˜æ•ˆæ–¹æ³•)
 - [æˆ‘çš„åˆ·é¢˜å¿ƒå¾—](https://labuladong.github.io/article/fname.html?fname=ç®—æ³•å¿ƒå¾—)
 - [ç¯æ£€æµ‹åŠæ‹“æ‰‘æ’åºç®—æ³•](https://labuladong.github.io/article/fname.html?fname=æ‹“æ‰‘æ’åº)
 - [ç®—æ³•å­¦ä¹ å’Œå¿ƒæµä½“éªŒ](https://labuladong.github.io/article/fname.html?fname=å¿ƒæµ)
 - [ç®—æ³•ç¬”è¯•ã€Œéª—åˆ†ã€å¥—è·¯](https://labuladong.github.io/article/fname.html?fname=åˆ·é¢˜æŠ€å·§)
 - [ç»å…¸åŠ¨æ€è§„åˆ’ï¼šæˆ³æ°”çƒ](https://labuladong.github.io/article/fname.html?fname=æ‰æ°”çƒ)
 - [ç»å…¸å›æº¯ç®—æ³•ï¼šé›†åˆåˆ’åˆ†é—®é¢˜](https://labuladong.github.io/article/fname.html?fname=é›†åˆåˆ’åˆ†)

</details><hr>




<hr>
<details>
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„é¢˜ç›®</strong></summary>

<strong>å®‰è£… [æˆ‘çš„ Chrome åˆ·é¢˜æ’ä»¶](https://mp.weixin.qq.com/s/X-fE9sR4BLi6T9pn7xP4pg) ç‚¹å¼€ä¸‹åˆ—é¢˜ç›®å¯ç›´æ¥æŸ¥çœ‹è§£é¢˜æ€è·¯ï¼š</strong>

| LeetCode | åŠ›æ‰£ |
| :----: | :----: |
| [112. Path Sum](https://leetcode.com/problems/path-sum/?show=1) | [112. è·¯å¾„æ€»å’Œ](https://leetcode.cn/problems/path-sum/?show=1) |
| [113. Path Sum II](https://leetcode.com/problems/path-sum-ii/?show=1) | [113. è·¯å¾„æ€»å’Œ II](https://leetcode.cn/problems/path-sum-ii/?show=1) |
| [140. Word Break II](https://leetcode.com/problems/word-break-ii/?show=1) | [140. å•è¯æ‹†åˆ† II](https://leetcode.cn/problems/word-break-ii/?show=1) |
| [17. Letter Combinations of a Phone Number](https://leetcode.com/problems/letter-combinations-of-a-phone-number/?show=1) | [17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://leetcode.cn/problems/letter-combinations-of-a-phone-number/?show=1) |
| [22. Generate Parentheses](https://leetcode.com/problems/generate-parentheses/?show=1) | [22. æ‹¬å·ç”Ÿæˆ](https://leetcode.cn/problems/generate-parentheses/?show=1) |
| [39. Combination Sum](https://leetcode.com/problems/combination-sum/?show=1) | [39. ç»„åˆæ€»å’Œ](https://leetcode.cn/problems/combination-sum/?show=1) |
| [698. Partition to K Equal Sum Subsets](https://leetcode.com/problems/partition-to-k-equal-sum-subsets/?show=1) | [698. åˆ’åˆ†ä¸ºkä¸ªç›¸ç­‰çš„å­é›†](https://leetcode.cn/problems/partition-to-k-equal-sum-subsets/?show=1) |
| [77. Combinations](https://leetcode.com/problems/combinations/?show=1) | [77. ç»„åˆ](https://leetcode.cn/problems/combinations/?show=1) |
| [78. Subsets](https://leetcode.com/problems/subsets/?show=1) | [78. å­é›†](https://leetcode.cn/problems/subsets/?show=1) |
| - | [å‰‘æŒ‡ Offer 34. äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„](https://leetcode.cn/problems/er-cha-shu-zhong-he-wei-mou-yi-zhi-de-lu-jing-lcof/?show=1) |
| - | [å‰‘æŒ‡ Offer II 079. æ‰€æœ‰å­é›†](https://leetcode.cn/problems/TVdhkn/?show=1) |
| - | [å‰‘æŒ‡ Offer II 080. å«æœ‰ k ä¸ªå…ƒç´ çš„ç»„åˆ](https://leetcode.cn/problems/uUsW3B/?show=1) |
| - | [å‰‘æŒ‡ Offer II 081. å…è®¸é‡å¤é€‰æ‹©å…ƒç´ çš„ç»„åˆ](https://leetcode.cn/problems/Ygoe9J/?show=1) |
| - | [å‰‘æŒ‡ Offer II 083. æ²¡æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—](https://leetcode.cn/problems/VvJkup/?show=1) |
| - | [å‰‘æŒ‡ Offer II 085. ç”ŸæˆåŒ¹é…çš„æ‹¬å·](https://leetcode.cn/problems/IDBivT/?show=1) |

</details>



**ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿**

**ã€Šlabuladong çš„ç®—æ³•å°æŠ„ã€‹å·²ç»å‡ºç‰ˆï¼Œå…³æ³¨å…¬ä¼—å·æŸ¥çœ‹è¯¦æƒ…ï¼›åå°å›å¤å…³é”®è¯ã€Œ**è¿›ç¾¤**ã€å¯åŠ å…¥ç®—æ³•ç¾¤ï¼›å›å¤ã€Œ**å…¨å®¶æ¡¶**ã€å¯ä¸‹è½½é…å¥— PDF å’Œåˆ·é¢˜å…¨å®¶æ¡¶**ï¼š

![](https://labuladong.github.io/algo/images/souyisou2.png)


======å…¶ä»–è¯­è¨€ä»£ç ======

[46.å…¨æ’åˆ—](https://leetcode-cn.com/problems/permutations)

[51.Nçš‡å](https://leetcode-cn.com/problems/n-queens)



### java

[46.å…¨æ’åˆ—](https://leetcode-cn.com/problems/permutations)

```java
List<List<Integer>> res = new LinkedList<>();

/* ä¸»å‡½æ•°ï¼Œè¾“å…¥ä¸€ç»„ä¸é‡å¤çš„æ•°å­—ï¼Œè¿”å›å®ƒä»¬çš„å…¨æ’åˆ— */
List<List<Integer>> permute(int[] nums) {
    // è®°å½•ã€Œè·¯å¾„ã€
    LinkedList<Integer> track = new LinkedList<>();
    backtrack(nums, track);
    return res;
}

// è·¯å¾„ï¼šè®°å½•åœ¨ track ä¸­
// é€‰æ‹©åˆ—è¡¨ï¼šnums ä¸­ä¸å­˜åœ¨äº track çš„é‚£äº›å…ƒç´ 
// ç»“æŸæ¡ä»¶ï¼šnums ä¸­çš„å…ƒç´ å…¨éƒ½åœ¨ track ä¸­å‡ºç°
void backtrack(int[] nums, LinkedList<Integer> track) {
    // è§¦å‘ç»“æŸæ¡ä»¶
    if (track.size() == nums.length) {
        res.add(new LinkedList(track));
        return;
    }
    
    for (int i = 0; i < nums.length; i++) {
        // æ’é™¤ä¸åˆæ³•çš„é€‰æ‹©
        if (track.contains(nums[i]))
            continue;
        // åšé€‰æ‹©
        track.add(nums[i]);
        // è¿›å…¥ä¸‹ä¸€å±‚å†³ç­–æ ‘
        backtrack(nums, track);
        // å–æ¶ˆé€‰æ‹©
        track.removeLast();
    }
}
```



ç”±[kepler-zc](https://github.com/kepler-zc) æä¾› 51.Nçš‡å Java è§£æ³•ä»£ç ï¼š
```java
class solution {
    private List<List<String>> res = new ArrayList<>();

    // è¾“å…¥æ£‹ç›˜è¾¹é•¿ nï¼Œè¿”å›æ‰€æœ‰åˆæ³•çš„æ”¾ç½®
    public List<List<String>> solveNQueens(int n){
        // '.'è¡¨ç¤ºç©ºï¼Œ'Q'è¡¨ç¤ºçš‡åï¼Œåˆå§‹åŒ–ç©ºæ£‹ç›˜
        char[][] chess = new char[n][n];
        for (int i = 0; i < n; i++) {
            Arrays.fill(chess[i], '.');
        }
        // å·²ç»ä¸èƒ½æ”¾ç½®çš‡åçš„åˆ—ï¼ˆè¢«å ç”¨ï¼‰
        boolean[] usedCol = new boolean[n];
        // å·²ç»ä¸èƒ½æ”¾ç½®çš‡åçš„æ­£æ–œçº¿ , æŒ‰å³ä¸Šè§’åˆ°å·¦ä¸‹è§’æ’åˆ— , å…±2n-1æ¡
        boolean[] usedSlash = new boolean[2*n-1];
        // å·²ç»ä¸èƒ½æ”¾ç½®çš‡åçš„åæ–œçº¿ , æŒ‰å·¦ä¸Šè§’åˆ°å³ä¸‹è§’æ’åˆ— , å…±2n-1æ¡
        boolean[] usedBackSlash = new boolean[2*n-1];
        backtrack(chess, 0, usedCol, usedSlash, usedBackSlash);
        return res;
    }

    // è·¯å¾„ï¼šchess ä¸­å°äº row çš„é‚£äº›è¡Œéƒ½å·²ç»æˆåŠŸæ”¾ç½®äº†çš‡å
    // é€‰æ‹©åˆ—è¡¨ï¼šç¬¬ row è¡Œçš„æ‰€æœ‰åˆ—éƒ½æ˜¯æ”¾ç½®çš‡åçš„é€‰æ‹©
    // ç»“æŸæ¡ä»¶ï¼šrow è¶…è¿‡ æ£‹ç›˜æœ€åä¸€è¡Œ
    private void backtrack(char[][] chess, int row, boolean[] usedCol, boolean[] usedSlash, boolean[] usedBackSlash) {
        // è§¦å‘ç»“æŸæ¡ä»¶
        if (row == chess.length){
            res.add(construct(chess));
            return;
        }
        for (int col = 0; col < chess.length; col++) {
            // å¯¹åˆæ³•é€‰æ‹©è¿›è¡Œå›æº¯æ“ä½œ
            // åˆ†åˆ«æ£€æŸ¥åˆ—ï¼Œå·¦ä¸Šæ–¹ï¼Œ å³ä¸Šæ–¹æ˜¯å¦å­˜åœ¨çš‡åå†²çªï¼Œéƒ½ä¸å†²çªé›†ä¸ºåˆæ³•é€‰æ‹©ã€‚
            if (!usedCol[col] && !usedSlash[row-col+usedCol.length-1] && !usedBackSlash[col+row]){
                // åšé€‰æ‹©
                chess[row][col] = 'Q';
                usedCol[col] = true;
                // å¯¹åæ ‡ä¸º[i,j]çš„ç‚¹å¯¹åº”çš„æ­£æ–œçº¿å’Œåæ–œçº¿çš„ç´¢å¼•åˆ†åˆ«ä¸ºï¼šrow-col+n-1; col+row
                usedSlash[row-col+chess.length-1] = true;
                usedBackSlash[col+row] = true;
                // è¿›å…¥ä¸‹ä¸€è¡Œ
                backtrack(chess, row+1, usedCol,usedSlash, usedBackSlash);
                // æ’¤é”€é€‰æ‹©
                chess[row][col] = '.';
                usedCol[col] = false;
                usedSlash[row-col+chess.length-1] = false;
                usedBackSlash[col+row] = false;
            }
        }
    }

    private List<String> construct(char[][] chess) {
        // æ•°ç»„è½¬List
        List<String> path = new ArrayList<>();
        for (char[] chars : chess) {
            path.add(new String(chars));
        }
        return path;
    }
}
```



### javascript

[46.å…¨æ’åˆ—](https://leetcode-cn.com/problems/permutations)

```js
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permute = function(nums){
    // 1. è®¾ç½®ç»“æœé›†
    const result = [];

    // 2. å›æº¯
    const recursion = (path, set) => {
        // 2.1 è®¾ç½®å›æº¯ç»ˆæ­¢æ¡ä»¶
        if (path.length === nums.length) {

            // 2.1.1 æ¨å…¥ç»“æœé›†
            result.push(path.concat());

            // 2.1.2 ç»ˆæ­¢é€’å½’
            return;
        }

        // 2.2 éå†æ•°ç»„
        for (let i = 0; i < nums.length; i++) {

            // 2.2.1 å¿…é¡»æ˜¯ä¸å­˜åœ¨ set ä¸­çš„åæ ‡
            if (!set.has(i)) {

                // 2.2.2 æœ¬åœ°é€’å½’æ¡ä»¶ï¼ˆç”¨å®Œè®°å¾—åˆ é™¤ï¼‰
                path.push(nums[i]);
                set.add(i);

                // 2.2.3 è¿›ä¸€æ­¥é€’å½’
                recursion(path, set);

                // 2.2.4 å›æº¯ï¼šæ’¤å› 2.2.2 çš„æ“ä½œ
                path.pop();
                set.delete(i);
            }
        }
    };
  
    recursion([], new Set());

    // 3. è¿”å›ç»“æœ
    return result;
};
```

[ 51.Nçš‡å](https://leetcode-cn.com/problems/n-queens)

æ£€æŸ¥æ–œçº¿çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªåæ ‡ç‚¹çš„|(y1-y2)| == |(x1 - x2)|,å¦‚æœtrueå°±æ˜¯å…±æ–œçº¿

```js
/**
 * @param {number} n
 * @return {string[][]}
 */
var solveNQueens = function (n) {
    const board = new Array(n);

    // '.' è¡¨ç¤ºç©ºï¼Œ'Q' è¡¨ç¤ºçš‡åï¼Œåˆå§‹åŒ–ç©ºæ£‹ç›˜ã€‚
    for (let i = 0; i < n; i++) {     // æ£‹ç›˜çš„åˆå§‹åŒ–
        board[i] = new Array(n).fill('.');
    }

    const res = []

    // éªŒè¯æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ä½ç½®
    const isValid = (row, col) => {
        for (let i = 0; i < row; i++) { // ä¹‹å‰çš„è¡Œ
            for (let j = 0; j < n; j++) { // æ‰€æœ‰çš„åˆ—
                if (board[i][j] === 'Q' &&   // å‘ç°äº†çš‡åï¼Œå¹¶ä¸”å’Œè‡ªå·±åŒåˆ—/å¯¹è§’çº¿
                    (j === col || i + j === row + col || i - j === row - col)) {
                    return false;             // ä¸æ˜¯åˆæ³•çš„é€‰æ‹©
                }
            }
        }
        return true;
    };

    // è·¯å¾„ï¼šboard ä¸­å°äº row çš„é‚£äº›è¡Œéƒ½å·²ç»æˆåŠŸæ”¾ç½®äº†çš‡å
    // é€‰æ‹©åˆ—è¡¨ï¼šç¬¬ row è¡Œçš„æ‰€æœ‰åˆ—éƒ½æ˜¯æ”¾ç½®çš‡åçš„é€‰æ‹©
    // ç»“æŸæ¡ä»¶ï¼šrow è¶…è¿‡ board çš„æœ€åä¸€è¡Œ
    const backtrack = (row) => {
        // è§¦å‘ç»“æŸæ¡ä»¶
        if (row === n) {
            const stringsBoard = board.slice(); // æ‹·è´ä¸€ä»½board
            for (let i = 0; i < n; i++) {
                stringsBoard[i] = stringsBoard[i].join(''); // å°†æ¯ä¸€è¡Œæ‹¼æˆå­—ç¬¦ä¸²
            }
            res.push(stringsBoard); // æ¨å…¥resæ•°ç»„
            return;
        }
        
        for (let col = 0; col < n; col++) {
            // æ’é™¤ä¸åˆæ³•é€‰æ‹©
            if (!isValid(row, col))
                continue;
            // åšé€‰æ‹©
            board[row][col] = 'Q';
            // è¿›å…¥ä¸‹ä¸€è¡Œå†³ç­–
            backtrack(row + 1);
            // æ’¤é”€é€‰æ‹©
            board[row][col] = '.';
        }
    }

    backtrack(0);
    return res;
};
```

