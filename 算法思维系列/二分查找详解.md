# äºŒåˆ†æŸ¥æ‰¾ç®—æ³•è¯¦è§£

<p align='center'>
<a href="https://github.com/labuladong/fucking-algorithm" target="view_window"><img alt="GitHub" src="https://img.shields.io/github/stars/labuladong/fucking-algorithm?label=Stars&style=flat-square&logo=GitHub"></a>
<a href="https://appktavsiei5995.pc.xiaoe-tech.com/index" target="_blank"><img class="my_header_icon" src="https://img.shields.io/static/v1?label=ç²¾å“è¯¾ç¨‹&message=æŸ¥çœ‹&color=pink&style=flat"></a>
<a href="https://www.zhihu.com/people/labuladong"><img src="https://img.shields.io/badge/%E7%9F%A5%E4%B9%8E-@labuladong-000000.svg?style=flat-square&logo=Zhihu"></a>
<a href="https://space.bilibili.com/14089380"><img src="https://img.shields.io/badge/Bç«™-@labuladong-000000.svg?style=flat-square&logo=Bilibili"></a>
</p>

![](https://labuladong.github.io/algo/images/souyisou1.png)

**é€šçŸ¥ï¼š[æ•°æ®ç»“æ„ç²¾å“è¯¾](https://aep.h5.xeknow.com/s/1XJHEO) å·²æ›´æ–°åˆ° V2.0ï¼›[ç¬¬ 12 æœŸåˆ·é¢˜æ‰“å¡](https://mp.weixin.qq.com/s/eUG2OOzY3k_ZTz-CFvtv5Q) æœ€åä¸€å¤©æŠ¥åï¼›ç‚¹å‡»è¿™é‡Œä½“éªŒ [åˆ·é¢˜å…¨å®¶æ¡¶](https://labuladong.gitee.io/algo/images/others/%E5%85%A8%E5%AE%B6%E6%A1%B6.jpg)ã€‚å¦å¤–ï¼Œå»ºè®®ä½ åœ¨æˆ‘çš„ [ç½‘ç«™](https://labuladong.gitee.io/algo/) å­¦ä¹ æ–‡ç« ï¼Œä½“éªŒæ›´å¥½ã€‚**



è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¸ä»…å­¦ä¼šäº†ç®—æ³•å¥—è·¯ï¼Œè¿˜å¯ä»¥é¡ºä¾¿è§£å†³å¦‚ä¸‹é¢˜ç›®ï¼š

| LeetCode | åŠ›æ‰£ | éš¾åº¦ |
| :----: | :----: | :----: |
| [34. Find First and Last Position of Element in Sorted Array](https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/) | [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®](https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/) | ğŸŸ 
| [704. Binary Search](https://leetcode.com/problems/binary-search/) | [704. äºŒåˆ†æŸ¥æ‰¾](https://leetcode.cn/problems/binary-search/) | ğŸŸ¢
| - | [å‰‘æŒ‡ Offer 53 - I. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­— I](https://leetcode.cn/problems/zai-pai-xu-shu-zu-zhong-cha-zhao-shu-zi-lcof/) | ğŸŸ¢

**-----------**

> æœ¬æ–‡æœ‰è§†é¢‘ç‰ˆï¼š[äºŒåˆ†æœç´¢æ ¸å¿ƒæ¡†æ¶å¥—è·¯](https://www.bilibili.com/video/BV1Gt4y1b79Q/)

æœ¬æ–‡æ˜¯å‰æ–‡ [äºŒåˆ†æœç´¢è¯¦è§£](https://mp.weixin.qq.com/s/uA2suoVykENmCQcKFMOSuQ) çš„ä¿®è®¢ç‰ˆï¼Œæ·»åŠ äº†å¯¹äºŒåˆ†æœç´¢ç®—æ³•æ›´è¯¦ç»†çš„åˆ†æã€‚

å…ˆç»™å¤§å®¶è®²ä¸ªç¬‘è¯ä¹å‘µä¸€ä¸‹ï¼š

æœ‰ä¸€å¤©é˜¿ä¸œåˆ°å›¾ä¹¦é¦†å€Ÿäº† N æœ¬ä¹¦ï¼Œå‡ºå›¾ä¹¦é¦†çš„æ—¶å€™ï¼Œè­¦æŠ¥å“äº†ï¼Œäºæ˜¯ä¿å®‰æŠŠé˜¿ä¸œæ‹¦ä¸‹ï¼Œè¦æ£€æŸ¥ä¸€ä¸‹å“ªæœ¬ä¹¦æ²¡æœ‰ç™»è®°å‡ºå€Ÿã€‚é˜¿ä¸œæ­£å‡†å¤‡æŠŠæ¯ä¸€æœ¬ä¹¦åœ¨æŠ¥è­¦å™¨ä¸‹è¿‡ä¸€ä¸‹ï¼Œä»¥æ‰¾å‡ºå¼•å‘è­¦æŠ¥çš„ä¹¦ï¼Œä½†æ˜¯ä¿å®‰éœ²å‡ºä¸å±‘çš„çœ¼ç¥ï¼šä½ è¿äºŒåˆ†æŸ¥æ‰¾éƒ½ä¸ä¼šå—ï¼Ÿäºæ˜¯ä¿å®‰æŠŠä¹¦åˆ†æˆä¸¤å †ï¼Œè®©ç¬¬ä¸€å †è¿‡ä¸€ä¸‹æŠ¥è­¦å™¨ï¼ŒæŠ¥è­¦å™¨å“ï¼›äºæ˜¯å†æŠŠè¿™å †ä¹¦åˆ†æˆä¸¤å †â€¦â€¦ æœ€ç»ˆï¼Œæ£€æµ‹äº† logN æ¬¡ä¹‹åï¼Œä¿å®‰æˆåŠŸçš„æ‰¾åˆ°äº†é‚£æœ¬å¼•èµ·è­¦æŠ¥çš„ä¹¦ï¼Œéœ²å‡ºäº†å¾—æ„å’Œå˜²è®½çš„ç¬‘å®¹ã€‚äºæ˜¯é˜¿ä¸œèƒŒç€å‰©ä¸‹çš„ä¹¦èµ°äº†ã€‚

ä»æ­¤ï¼Œå›¾ä¹¦é¦†ä¸¢äº† N - 1 æœ¬ä¹¦ï¼ˆæ‰‹åŠ¨ç‹—å¤´ï¼‰ã€‚

äºŒåˆ†æŸ¥æ‰¾å¹¶ä¸ç®€å•ï¼ŒKnuth å¤§ä½¬ï¼ˆå‘æ˜ KMP ç®—æ³•çš„é‚£ä½ï¼‰éƒ½è¯´äºŒåˆ†æŸ¥æ‰¾ï¼š**æ€è·¯å¾ˆç®€å•ï¼Œç»†èŠ‚æ˜¯é­”é¬¼**ã€‚å¾ˆå¤šäººå–œæ¬¢æ‹¿æ•´å‹æº¢å‡ºçš„ bug è¯´äº‹å„¿ï¼Œä½†æ˜¯äºŒåˆ†æŸ¥æ‰¾çœŸæ­£çš„å‘æ ¹æœ¬å°±ä¸æ˜¯é‚£ä¸ªç»†èŠ‚é—®é¢˜ï¼Œè€Œæ˜¯åœ¨äºåˆ°åº•è¦ç»™ `mid` åŠ ä¸€è¿˜æ˜¯å‡ä¸€ï¼Œwhile é‡Œåˆ°åº•ç”¨ `<=` è¿˜æ˜¯ `<`ã€‚

ä½ è¦æ˜¯æ²¡æœ‰æ­£ç¡®ç†è§£è¿™äº›ç»†èŠ‚ï¼Œå†™äºŒåˆ†è‚¯å®šå°±æ˜¯ç„å­¦ç¼–ç¨‹ï¼Œæœ‰æ²¡æœ‰ bug åªèƒ½é è©è¨ä¿ä½‘ï¼ˆè°å†™è°çŸ¥é“ï¼‰ã€‚æˆ‘ç‰¹æ„å†™äº†ä¸€é¦–è¯—æ¥æ­Œé¢‚è¯¥ç®—æ³•ï¼Œæ¦‚æ‹¬æœ¬æ–‡çš„ä¸»è¦å†…å®¹ï¼Œå»ºè®®ä¿å­˜ï¼ˆæ‰‹åŠ¨ç‹—å¤´ï¼‰ï¼š

![](https://labuladong.github.io/algo/images/äºŒåˆ†æŸ¥æ‰¾/poem.png)

æœ¬æ–‡å°±æ¥æ¢ç©¶å‡ ä¸ªæœ€å¸¸ç”¨çš„äºŒåˆ†æŸ¥æ‰¾åœºæ™¯ï¼šå¯»æ‰¾ä¸€ä¸ªæ•°ã€å¯»æ‰¾å·¦ä¾§è¾¹ç•Œã€å¯»æ‰¾å³ä¾§è¾¹ç•Œã€‚è€Œä¸”ï¼Œæˆ‘ä»¬å°±æ˜¯è¦æ·±å…¥ç»†èŠ‚ï¼Œæ¯”å¦‚ä¸ç­‰å·æ˜¯å¦åº”è¯¥å¸¦ç­‰å·ï¼Œ`mid` æ˜¯å¦åº”è¯¥åŠ ä¸€ç­‰ç­‰ã€‚åˆ†æè¿™äº›ç»†èŠ‚çš„å·®å¼‚ä»¥åŠå‡ºç°è¿™äº›å·®å¼‚çš„åŸå› ï¼Œä¿è¯ä½ èƒ½çµæ´»å‡†ç¡®åœ°å†™å‡ºæ­£ç¡®çš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ã€‚

å¦å¤–å†å£°æ˜ä¸€ä¸‹ï¼Œå¯¹äºäºŒåˆ†æœç´¢çš„æ¯ä¸€ä¸ªåœºæ™¯ï¼Œæœ¬æ–‡è¿˜ä¼šæ¢è®¨å¤šç§ä»£ç å†™æ³•ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©ä½ ç†è§£å‡ºç°è¿™äº›ç»†å¾®å·®å¼‚çš„æœ¬è´¨åŸå› ï¼Œæœ€èµ·ç ä½ çœ‹åˆ°åˆ«äººçš„ä»£ç æ—¶ä¸ä¼šæ‡µé€¼ã€‚å®é™…ä¸Šè¿™äº›å†™æ³•æ²¡æœ‰ä¼˜åŠ£ä¹‹åˆ†ï¼Œä½ å–œæ¬¢å“ªç§å°±ç”¨å“ªç§å¥½äº†ã€‚

### é›¶ã€äºŒåˆ†æŸ¥æ‰¾æ¡†æ¶

```java
int binarySearch(int[] nums, int target) {
    int left = 0, right = ...;

    while(...) {
        int mid = left + (right - left) / 2;
        if (nums[mid] == target) {
            ...
        } else if (nums[mid] < target) {
            left = ...
        } else if (nums[mid] > target) {
            right = ...
        }
    }
    return ...;
}
```

**åˆ†æäºŒåˆ†æŸ¥æ‰¾çš„ä¸€ä¸ªæŠ€å·§æ˜¯ï¼šä¸è¦å‡ºç° elseï¼Œè€Œæ˜¯æŠŠæ‰€æœ‰æƒ…å†µç”¨ else if å†™æ¸…æ¥šï¼Œè¿™æ ·å¯ä»¥æ¸…æ¥šåœ°å±•ç°æ‰€æœ‰ç»†èŠ‚**ã€‚æœ¬æ–‡éƒ½ä¼šä½¿ç”¨ else ifï¼Œæ—¨åœ¨è®²æ¸…æ¥šï¼Œè¯»è€…ç†è§£åå¯è‡ªè¡Œç®€åŒ–ã€‚

å…¶ä¸­ `...` æ ‡è®°çš„éƒ¨åˆ†ï¼Œå°±æ˜¯å¯èƒ½å‡ºç°ç»†èŠ‚é—®é¢˜çš„åœ°æ–¹ï¼Œå½“ä½ è§åˆ°ä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾çš„ä»£ç æ—¶ï¼Œé¦–å…ˆæ³¨æ„è¿™å‡ ä¸ªåœ°æ–¹ã€‚åæ–‡ç”¨å®ä¾‹åˆ†æè¿™äº›åœ°æ–¹èƒ½æœ‰ä»€ä¹ˆæ ·çš„å˜åŒ–ã€‚

**å¦å¤–æå‰è¯´æ˜ä¸€ä¸‹ï¼Œè®¡ç®— `mid` æ—¶éœ€è¦é˜²æ­¢æº¢å‡º**ï¼Œä»£ç ä¸­ `left + (right - left) / 2` å°±å’Œ `(left + right) / 2` çš„ç»“æœç›¸åŒï¼Œä½†æ˜¯æœ‰æ•ˆé˜²æ­¢äº† `left` å’Œ `right` å¤ªå¤§ï¼Œç›´æ¥ç›¸åŠ å¯¼è‡´æº¢å‡ºçš„æƒ…å†µã€‚

### ä¸€ã€å¯»æ‰¾ä¸€ä¸ªæ•°ï¼ˆåŸºæœ¬çš„äºŒåˆ†æœç´¢ï¼‰

è¿™ä¸ªåœºæ™¯æ˜¯æœ€ç®€å•çš„ï¼Œå¯èƒ½ä¹Ÿæ˜¯å¤§å®¶æœ€ç†Ÿæ‚‰çš„ï¼Œå³æœç´¢ä¸€ä¸ªæ•°ï¼Œå¦‚æœå­˜åœ¨ï¼Œè¿”å›å…¶ç´¢å¼•ï¼Œå¦åˆ™è¿”å› -1ã€‚

```java
int binarySearch(int[] nums, int target) {
    int left = 0; 
    int right = nums.length - 1; // æ³¨æ„

    while(left <= right) {
        int mid = left + (right - left) / 2;
        if(nums[mid] == target)
            return mid; 
        else if (nums[mid] < target)
            left = mid + 1; // æ³¨æ„
        else if (nums[mid] > target)
            right = mid - 1; // æ³¨æ„
    }
    return -1;
}
```

è¿™æ®µä»£ç å¯ä»¥è§£å†³åŠ›æ‰£ç¬¬ 704 é¢˜ã€ŒäºŒåˆ†æŸ¥æ‰¾ã€ï¼Œä½†æˆ‘ä»¬æ·±å…¥æ¢è®¨ä¸€ä¸‹å…¶ä¸­çš„ç»†èŠ‚ã€‚

**1ã€ä¸ºä»€ä¹ˆ while å¾ªç¯çš„æ¡ä»¶ä¸­æ˜¯ <=ï¼Œè€Œä¸æ˜¯ <**ï¼Ÿ

ç­”ï¼šå› ä¸ºåˆå§‹åŒ– `right` çš„èµ‹å€¼æ˜¯ `nums.length - 1`ï¼Œå³æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯ `nums.length`ã€‚

è¿™äºŒè€…å¯èƒ½å‡ºç°åœ¨ä¸åŒåŠŸèƒ½çš„äºŒåˆ†æŸ¥æ‰¾ä¸­ï¼ŒåŒºåˆ«æ˜¯ï¼šå‰è€…ç›¸å½“äºä¸¤ç«¯éƒ½é—­åŒºé—´ `[left, right]`ï¼Œåè€…ç›¸å½“äºå·¦é—­å³å¼€åŒºé—´ `[left, right)`ï¼Œå› ä¸ºç´¢å¼•å¤§å°ä¸º `nums.length` æ˜¯è¶Šç•Œçš„ã€‚

æˆ‘ä»¬è¿™ä¸ªç®—æ³•ä¸­ä½¿ç”¨çš„æ˜¯å‰è€… `[left, right]` ä¸¤ç«¯éƒ½é—­çš„åŒºé—´ã€‚**è¿™ä¸ªåŒºé—´å…¶å®å°±æ˜¯æ¯æ¬¡è¿›è¡Œæœç´¢çš„åŒºé—´**ã€‚

ä»€ä¹ˆæ—¶å€™åº”è¯¥åœæ­¢æœç´¢å‘¢ï¼Ÿå½“ç„¶ï¼Œæ‰¾åˆ°äº†ç›®æ ‡å€¼çš„æ—¶å€™å¯ä»¥ç»ˆæ­¢ï¼š

```java
    if(nums[mid] == target)
        return mid; 
```

ä½†å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±éœ€è¦ while å¾ªç¯ç»ˆæ­¢ï¼Œç„¶åè¿”å› -1ã€‚é‚£ while å¾ªç¯ä»€ä¹ˆæ—¶å€™åº”è¯¥ç»ˆæ­¢ï¼Ÿ**æœç´¢åŒºé—´ä¸ºç©ºçš„æ—¶å€™åº”è¯¥ç»ˆæ­¢**ï¼Œæ„å‘³ç€ä½ æ²¡å¾—æ‰¾äº†ï¼Œå°±ç­‰äºæ²¡æ‰¾åˆ°å˜›ã€‚

`while(left <= right)` çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ `left == right + 1`ï¼Œå†™æˆåŒºé—´çš„å½¢å¼å°±æ˜¯ `[right + 1, right]`ï¼Œæˆ–è€…å¸¦ä¸ªå…·ä½“çš„æ•°å­—è¿›å» `[3, 2]`ï¼Œå¯è§**è¿™æ—¶å€™åŒºé—´ä¸ºç©º**ï¼Œå› ä¸ºæ²¡æœ‰æ•°å­—æ—¢å¤§äºç­‰äº 3 åˆå°äºç­‰äº 2 çš„å§ã€‚æ‰€ä»¥è¿™æ—¶å€™ while å¾ªç¯ç»ˆæ­¢æ˜¯æ­£ç¡®çš„ï¼Œç›´æ¥è¿”å› -1 å³å¯ã€‚

`while(left < right)` çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ `left == right`ï¼Œå†™æˆåŒºé—´çš„å½¢å¼å°±æ˜¯ `[right, right]`ï¼Œæˆ–è€…å¸¦ä¸ªå…·ä½“çš„æ•°å­—è¿›å» `[2, 2]`ï¼Œ**è¿™æ—¶å€™åŒºé—´éç©º**ï¼Œè¿˜æœ‰ä¸€ä¸ªæ•° 2ï¼Œä½†æ­¤æ—¶ while å¾ªç¯ç»ˆæ­¢äº†ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™åŒºé—´ `[2, 2]` è¢«æ¼æ‰äº†ï¼Œç´¢å¼• 2 æ²¡æœ‰è¢«æœç´¢ï¼Œå¦‚æœè¿™æ—¶å€™ç›´æ¥è¿”å› -1 å°±æ˜¯é”™è¯¯çš„ã€‚

å½“ç„¶ï¼Œå¦‚æœä½ éè¦ç”¨ `while(left < right)` ä¹Ÿå¯ä»¥ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å‡ºé”™çš„åŸå› ï¼Œå°±æ‰“ä¸ªè¡¥ä¸å¥½äº†ï¼š

```java
    //...
    while(left < right) {
        // ...
    }
    return nums[left] == target ? left : -1;
```

**2ã€ä¸ºä»€ä¹ˆ `left = mid + 1`ï¼Œ`right = mid - 1`ï¼Ÿæˆ‘çœ‹æœ‰çš„ä»£ç æ˜¯ `right = mid` æˆ–è€… `left = mid`ï¼Œæ²¡æœ‰è¿™äº›åŠ åŠ å‡å‡ï¼Œåˆ°åº•æ€ä¹ˆå›äº‹ï¼Œæ€ä¹ˆåˆ¤æ–­**ï¼Ÿ

ç­”ï¼šè¿™ä¹Ÿæ˜¯äºŒåˆ†æŸ¥æ‰¾çš„ä¸€ä¸ªéš¾ç‚¹ï¼Œä¸è¿‡åªè¦ä½ èƒ½ç†è§£å‰é¢çš„å†…å®¹ï¼Œå°±èƒ½å¤Ÿå¾ˆå®¹æ˜“åˆ¤æ–­ã€‚

åˆšæ‰æ˜ç¡®äº†ã€Œæœç´¢åŒºé—´ã€è¿™ä¸ªæ¦‚å¿µï¼Œè€Œä¸”æœ¬ç®—æ³•çš„æœç´¢åŒºé—´æ˜¯ä¸¤ç«¯éƒ½é—­çš„ï¼Œå³ `[left, right]`ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬å‘ç°ç´¢å¼• `mid` ä¸æ˜¯è¦æ‰¾çš„ `target` æ—¶ï¼Œä¸‹ä¸€æ­¥åº”è¯¥å»æœç´¢å“ªé‡Œå‘¢ï¼Ÿ

å½“ç„¶æ˜¯å»æœç´¢åŒºé—´ `[left, mid-1]` æˆ–è€…åŒºé—´ `[mid+1, right]` å¯¹ä¸å¯¹ï¼Ÿ**å› ä¸º `mid` å·²ç»æœç´¢è¿‡ï¼Œåº”è¯¥ä»æœç´¢åŒºé—´ä¸­å»é™¤**ã€‚

**3ã€æ­¤ç®—æ³•æœ‰ä»€ä¹ˆç¼ºé™·**ï¼Ÿ

ç­”ï¼šè‡³æ­¤ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†è¯¥ç®—æ³•çš„æ‰€æœ‰ç»†èŠ‚ï¼Œä»¥åŠè¿™æ ·å¤„ç†çš„åŸå› ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç®—æ³•å­˜åœ¨å±€é™æ€§ã€‚

æ¯”å¦‚è¯´ç»™ä½ æœ‰åºæ•°ç»„ `nums = [1,2,2,2,3]`ï¼Œ`target` ä¸º 2ï¼Œæ­¤ç®—æ³•è¿”å›çš„ç´¢å¼•æ˜¯ 2ï¼Œæ²¡é”™ã€‚ä½†æ˜¯å¦‚æœæˆ‘æƒ³å¾—åˆ° `target` çš„å·¦ä¾§è¾¹ç•Œï¼Œå³ç´¢å¼• 1ï¼Œæˆ–è€…æˆ‘æƒ³å¾—åˆ° `target` çš„å³ä¾§è¾¹ç•Œï¼Œå³ç´¢å¼• 3ï¼Œè¿™æ ·çš„è¯æ­¤ç®—æ³•æ˜¯æ— æ³•å¤„ç†çš„ã€‚

è¿™æ ·çš„éœ€æ±‚å¾ˆå¸¸è§ï¼Œ**ä½ ä¹Ÿè®¸ä¼šè¯´ï¼Œæ‰¾åˆ°ä¸€ä¸ª `target`ï¼Œç„¶åå‘å·¦æˆ–å‘å³çº¿æ€§æœç´¢ä¸è¡Œå—ï¼Ÿå¯ä»¥ï¼Œä½†æ˜¯ä¸å¥½ï¼Œå› ä¸ºè¿™æ ·éš¾ä»¥ä¿è¯äºŒåˆ†æŸ¥æ‰¾å¯¹æ•°çº§çš„å¤æ‚åº¦äº†**ã€‚

æˆ‘ä»¬åç»­çš„ç®—æ³•å°±æ¥è®¨è®ºè¿™ä¸¤ç§äºŒåˆ†æŸ¥æ‰¾çš„ç®—æ³•ã€‚

### äºŒã€å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æœç´¢

ä»¥ä¸‹æ˜¯æœ€å¸¸è§çš„ä»£ç å½¢å¼ï¼Œå…¶ä¸­çš„æ ‡è®°æ˜¯éœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼š

```java
int left_bound(int[] nums, int target) {
    int left = 0;
    int right = nums.length; // æ³¨æ„
    
    while (left < right) { // æ³¨æ„
        int mid = left + (right - left) / 2;
        if (nums[mid] == target) {
            right = mid;
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid; // æ³¨æ„
        }
    }
    return left;
}
```

**1ã€ä¸ºä»€ä¹ˆ while ä¸­æ˜¯ `<` è€Œä¸æ˜¯ `<=`**?

ç­”ï¼šç”¨ç›¸åŒçš„æ–¹æ³•åˆ†æï¼Œå› ä¸º `right = nums.length` è€Œä¸æ˜¯ `nums.length - 1`ã€‚å› æ­¤æ¯æ¬¡å¾ªç¯çš„ã€Œæœç´¢åŒºé—´ã€æ˜¯ `[left, right)` å·¦é—­å³å¼€ã€‚

`while(left < right)` ç»ˆæ­¢çš„æ¡ä»¶æ˜¯ `left == right`ï¼Œæ­¤æ—¶æœç´¢åŒºé—´ `[left, left)` ä¸ºç©ºï¼Œæ‰€ä»¥å¯ä»¥æ­£ç¡®ç»ˆæ­¢ã€‚

> PSï¼šè¿™é‡Œå…ˆè¦è¯´ä¸€ä¸ªæœç´¢å·¦å³è¾¹ç•Œå’Œä¸Šé¢è¿™ä¸ªç®—æ³•çš„ä¸€ä¸ªåŒºåˆ«ï¼Œä¹Ÿæ˜¯å¾ˆå¤šè¯»è€…é—®çš„ï¼š**åˆšæ‰çš„ `right` ä¸æ˜¯ `nums.length - 1` å—ï¼Œä¸ºå•¥è¿™é‡Œéè¦å†™æˆ `nums.length` ä½¿å¾—ã€Œæœç´¢åŒºé—´ã€å˜æˆå·¦é—­å³å¼€å‘¢**ï¼Ÿ
>
> å› ä¸ºå¯¹äºæœç´¢å·¦å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾ï¼Œè¿™ç§å†™æ³•æ¯”è¾ƒæ™®éï¼Œæˆ‘å°±æ‹¿è¿™ç§å†™æ³•ä¸¾ä¾‹äº†ï¼Œä¿è¯ä½ ä»¥åé‡åˆ°è¿™ç±»ä»£ç å¯ä»¥ç†è§£ã€‚ä½ éè¦ç”¨ä¸¤ç«¯éƒ½é—­çš„å†™æ³•åè€Œæ›´ç®€å•ï¼Œæˆ‘ä¼šåœ¨åé¢å†™ç›¸å…³çš„ä»£ç ï¼ŒæŠŠä¸‰ç§äºŒåˆ†æœç´¢éƒ½ç”¨ä¸€ç§ä¸¤ç«¯éƒ½é—­çš„å†™æ³•ç»Ÿä¸€èµ·æ¥ï¼Œä½ è€å¿ƒå¾€åçœ‹å°±è¡Œäº†ã€‚

**2ã€ä¸ºä»€ä¹ˆæ²¡æœ‰è¿”å› -1 çš„æ“ä½œï¼Ÿå¦‚æœ `nums` ä¸­ä¸å­˜åœ¨ `target` è¿™ä¸ªå€¼ï¼Œæ€ä¹ˆåŠ**ï¼Ÿ

ç­”ï¼šå…¶å®å¾ˆç®€å•ï¼Œåœ¨è¿”å›çš„æ—¶å€™é¢å¤–åˆ¤æ–­ä¸€ä¸‹ `nums[left]` æ˜¯å¦ç­‰äº `target` å°±è¡Œäº†ï¼Œå¦‚æœä¸ç­‰äºï¼Œå°±è¯´æ˜ `target` ä¸å­˜åœ¨ã€‚

ä¸è¿‡æˆ‘ä»¬å¾—è€ƒå¯Ÿä¸€ä¸‹ `left` çš„å–å€¼èŒƒå›´ï¼Œå…å¾—ç´¢å¼•è¶Šç•Œã€‚å‡å¦‚è¾“å…¥çš„ `target` éå¸¸å¤§ï¼Œé‚£ä¹ˆå°±ä¼šä¸€ç›´è§¦å‘ `nums[mid] < target` çš„ if æ¡ä»¶ï¼Œ`left` ä¼šä¸€ç›´å‘å³ä¾§ç§»åŠ¨ï¼Œç›´åˆ°ç­‰äº `right`ï¼Œwhile å¾ªç¯ç»“æŸã€‚

ç”±äºè¿™é‡Œ `right` åˆå§‹åŒ–ä¸º `nums.length`ï¼Œæ‰€ä»¥ `left` å˜é‡çš„å–å€¼åŒºé—´æ˜¯é—­åŒºé—´ `[0, nums.length]`ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ£€æŸ¥ `nums[left]` ä¹‹å‰éœ€è¦é¢å¤–åˆ¤æ–­ä¸€ä¸‹ï¼Œé˜²æ­¢ç´¢å¼•è¶Šç•Œï¼š

```java
while (left < right) {
    //...
}
// æ­¤æ—¶ target æ¯”æ‰€æœ‰æ•°éƒ½å¤§ï¼Œè¿”å› -1
if (left == nums.length) return -1;
// åˆ¤æ–­ä¸€ä¸‹ nums[left] æ˜¯ä¸æ˜¯ target
return nums[left] == target ? left : -1;
```

**3ã€ä¸ºä»€ä¹ˆ `left = mid + 1`ï¼Œ`right = mid` ï¼Ÿå’Œä¹‹å‰çš„ç®—æ³•ä¸ä¸€æ ·**ï¼Ÿ

ç­”ï¼šè¿™ä¸ªå¾ˆå¥½è§£é‡Šï¼Œå› ä¸ºæˆ‘ä»¬çš„ã€Œæœç´¢åŒºé—´ã€æ˜¯ `[left, right)` å·¦é—­å³å¼€ï¼Œæ‰€ä»¥å½“ `nums[mid]` è¢«æ£€æµ‹ä¹‹åï¼Œä¸‹ä¸€æ­¥åº”è¯¥å» `mid` çš„å·¦ä¾§æˆ–è€…å³ä¾§åŒºé—´æœç´¢ï¼Œå³ `[left, mid)` æˆ– `[mid + 1, right)`ã€‚

**4ã€ä¸ºä»€ä¹ˆè¯¥ç®—æ³•èƒ½å¤Ÿæœç´¢å·¦ä¾§è¾¹ç•Œ**ï¼Ÿ

ç­”ï¼šå…³é”®åœ¨äºå¯¹äº `nums[mid] == target` è¿™ç§æƒ…å†µçš„å¤„ç†ï¼š

```java
    if (nums[mid] == target)
        right = mid;
```

å¯è§ï¼Œæ‰¾åˆ° target æ—¶ä¸è¦ç«‹å³è¿”å›ï¼Œè€Œæ˜¯ç¼©å°ã€Œæœç´¢åŒºé—´ã€çš„ä¸Šç•Œ `right`ï¼Œåœ¨åŒºé—´ `[left, mid)` ä¸­ç»§ç»­æœç´¢ï¼Œå³ä¸æ–­å‘å·¦æ”¶ç¼©ï¼Œè¾¾åˆ°é”å®šå·¦ä¾§è¾¹ç•Œçš„ç›®çš„ã€‚

**5ã€ä¸ºä»€ä¹ˆè¿”å› `left` è€Œä¸æ˜¯ `right`**ï¼Ÿ

ç­”ï¼šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸º while ç»ˆæ­¢çš„æ¡ä»¶æ˜¯ `left == right`ã€‚

**6ã€èƒ½ä¸èƒ½æƒ³åŠæ³•æŠŠ `right` å˜æˆ `nums.length - 1`ï¼Œä¹Ÿå°±æ˜¯ç»§ç»­ä½¿ç”¨ä¸¤è¾¹éƒ½é—­çš„ã€Œæœç´¢åŒºé—´ã€ï¼Ÿè¿™æ ·å°±å¯ä»¥å’Œç¬¬ä¸€ç§äºŒåˆ†æœç´¢åœ¨æŸç§ç¨‹åº¦ä¸Šç»Ÿä¸€èµ·æ¥äº†**ã€‚

ç­”ï¼šå½“ç„¶å¯ä»¥ï¼Œåªè¦ä½ æ˜ç™½äº†ã€Œæœç´¢åŒºé—´ã€è¿™ä¸ªæ¦‚å¿µï¼Œå°±èƒ½æœ‰æ•ˆé¿å…æ¼æ‰å…ƒç´ ï¼Œéšä¾¿ä½ æ€ä¹ˆæ”¹éƒ½è¡Œã€‚ä¸‹é¢æˆ‘ä»¬ä¸¥æ ¼æ ¹æ®é€»è¾‘æ¥ä¿®æ”¹ï¼š

å› ä¸ºä½ éè¦è®©æœç´¢åŒºé—´ä¸¤ç«¯éƒ½é—­ï¼Œæ‰€ä»¥ `right` åº”è¯¥åˆå§‹åŒ–ä¸º `nums.length - 1`ï¼Œwhile çš„ç»ˆæ­¢æ¡ä»¶åº”è¯¥æ˜¯ `left == right + 1`ï¼Œä¹Ÿå°±æ˜¯å…¶ä¸­åº”è¯¥ç”¨ `<=`ï¼š

```java
int left_bound(int[] nums, int target) {
    // æœç´¢åŒºé—´ä¸º [left, right]
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        // if else ...
    }
```

å› ä¸ºæœç´¢åŒºé—´æ˜¯ä¸¤ç«¯éƒ½é—­çš„ï¼Œä¸”ç°åœ¨æ˜¯æœç´¢å·¦ä¾§è¾¹ç•Œï¼Œæ‰€ä»¥ `left` å’Œ `right` çš„æ›´æ–°é€»è¾‘å¦‚ä¸‹ï¼š

```java
if (nums[mid] < target) {
    // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
    left = mid + 1;
} else if (nums[mid] > target) {
    // æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
    right = mid - 1;
} else if (nums[mid] == target) {
    // æ”¶ç¼©å³ä¾§è¾¹ç•Œ
    right = mid - 1;
}
```

å’Œåˆšæ‰ç›¸åŒï¼Œå¦‚æœæƒ³åœ¨æ‰¾ä¸åˆ° `target` çš„æ—¶å€™è¿”å› -1ï¼Œé‚£ä¹ˆæ£€æŸ¥ä¸€ä¸‹ `nums[left]` å’Œ `target` æ˜¯å¦ç›¸ç­‰å³å¯ï¼š

```java
// æ­¤æ—¶ target æ¯”æ‰€æœ‰æ•°éƒ½å¤§ï¼Œè¿”å› -1
if (left == nums.length) return -1;
// åˆ¤æ–­ä¸€ä¸‹ nums[left] æ˜¯ä¸æ˜¯ target
return nums[left] == target ? left : -1;
```

è‡³æ­¤ï¼Œæ•´ä¸ªç®—æ³•å°±å†™å®Œäº†ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```java
int left_bound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    // æœç´¢åŒºé—´ä¸º [left, right]
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
            left = mid + 1;
        } else if (nums[mid] > target) {
            // æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
            right = mid - 1;
        } else if (nums[mid] == target) {
            // æ”¶ç¼©å³ä¾§è¾¹ç•Œ
            right = mid - 1;
        }
    }
    // åˆ¤æ–­ target æ˜¯å¦å­˜åœ¨äº nums ä¸­
    // æ­¤æ—¶ target æ¯”æ‰€æœ‰æ•°éƒ½å¤§ï¼Œè¿”å› -1
    if (left == nums.length) return -1;
    // åˆ¤æ–­ä¸€ä¸‹ nums[left] æ˜¯ä¸æ˜¯ target
    return nums[left] == target ? left : -1;
}
```

è¿™æ ·å°±å’Œç¬¬ä¸€ç§äºŒåˆ†æœç´¢ç®—æ³•ç»Ÿä¸€äº†ï¼Œéƒ½æ˜¯ä¸¤ç«¯éƒ½é—­çš„ã€Œæœç´¢åŒºé—´ã€ï¼Œè€Œä¸”æœ€åè¿”å›çš„ä¹Ÿæ˜¯ `left` å˜é‡çš„å€¼ã€‚åªè¦æŠŠä½äºŒåˆ†æœç´¢çš„é€»è¾‘ï¼Œä¸¤ç§å½¢å¼å¤§å®¶çœ‹è‡ªå·±å–œæ¬¢å“ªç§è®°å“ªç§å§ã€‚

### ä¸‰ã€å¯»æ‰¾å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾

ç±»ä¼¼å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„ç®—æ³•ï¼Œè¿™é‡Œä¹Ÿä¼šæä¾›ä¸¤ç§å†™æ³•ï¼Œè¿˜æ˜¯å…ˆå†™å¸¸è§çš„å·¦é—­å³å¼€çš„å†™æ³•ï¼Œåªæœ‰ä¸¤å¤„å’Œæœç´¢å·¦ä¾§è¾¹ç•Œä¸åŒï¼š

```java
int right_bound(int[] nums, int target) {
    int left = 0, right = nums.length;
    
    while (left < right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] == target) {
            left = mid + 1; // æ³¨æ„
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid;
        }
    }
    return left - 1; // æ³¨æ„
}
```

**1ã€ä¸ºä»€ä¹ˆè¿™ä¸ªç®—æ³•èƒ½å¤Ÿæ‰¾åˆ°å³ä¾§è¾¹ç•Œ**ï¼Ÿ

ç­”ï¼šç±»ä¼¼åœ°ï¼Œå…³é”®ç‚¹è¿˜æ˜¯è¿™é‡Œï¼š

```java
if (nums[mid] == target) {
    left = mid + 1;
```

å½“ `nums[mid] == target` æ—¶ï¼Œä¸è¦ç«‹å³è¿”å›ï¼Œè€Œæ˜¯å¢å¤§ã€Œæœç´¢åŒºé—´ã€çš„å·¦è¾¹ç•Œ `left`ï¼Œä½¿å¾—åŒºé—´ä¸æ–­å‘å³é æ‹¢ï¼Œè¾¾åˆ°é”å®šå³ä¾§è¾¹ç•Œçš„ç›®çš„ã€‚

**2ã€ä¸ºä»€ä¹ˆæœ€åè¿”å› `left - 1` è€Œä¸åƒå·¦ä¾§è¾¹ç•Œçš„å‡½æ•°ï¼Œè¿”å› `left`ï¼Ÿè€Œä¸”æˆ‘è§‰å¾—è¿™é‡Œæ—¢ç„¶æ˜¯æœç´¢å³ä¾§è¾¹ç•Œï¼Œåº”è¯¥è¿”å› `right` æ‰å¯¹**ã€‚

ç­”ï¼šé¦–å…ˆï¼Œwhile å¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ `left == right`ï¼Œæ‰€ä»¥ `left` å’Œ `right` æ˜¯ä¸€æ ·çš„ï¼Œä½ éè¦ä½“ç°å³ä¾§çš„ç‰¹ç‚¹ï¼Œè¿”å› `right - 1` å¥½äº†ã€‚

è‡³äºä¸ºä»€ä¹ˆè¦å‡ä¸€ï¼Œè¿™æ˜¯æœç´¢å³ä¾§è¾¹ç•Œçš„ä¸€ä¸ªç‰¹æ®Šç‚¹ï¼Œå…³é”®åœ¨é”å®šå³è¾¹ç•Œæ—¶çš„è¿™ä¸ªæ¡ä»¶åˆ¤æ–­ï¼š

```java
// å¢å¤§ leftï¼Œé”å®šå³ä¾§è¾¹ç•Œ
if (nums[mid] == target) {
    left = mid + 1;
    // è¿™æ ·æƒ³: mid = left - 1
```

![](https://labuladong.github.io/algo/images/äºŒåˆ†æŸ¥æ‰¾/3.jpg)

å› ä¸ºæˆ‘ä»¬å¯¹ `left` çš„æ›´æ–°å¿…é¡»æ˜¯ `left = mid + 1`ï¼Œå°±æ˜¯è¯´ while å¾ªç¯ç»“æŸæ—¶ï¼Œ`nums[left]` ä¸€å®šä¸ç­‰äº `target` äº†ï¼Œè€Œ `nums[left-1]` å¯èƒ½æ˜¯ `target`ã€‚

è‡³äºä¸ºä»€ä¹ˆ `left` çš„æ›´æ–°å¿…é¡»æ˜¯ `left = mid + 1`ï¼Œå½“ç„¶æ˜¯ä¸ºäº†æŠŠ `nums[mid]` æ’é™¤å‡ºæœç´¢åŒºé—´ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚

**3ã€ä¸ºä»€ä¹ˆæ²¡æœ‰è¿”å› -1 çš„æ“ä½œï¼Ÿå¦‚æœ `nums` ä¸­ä¸å­˜åœ¨ `target` è¿™ä¸ªå€¼ï¼Œæ€ä¹ˆåŠ**ï¼Ÿ

ç­”ï¼šåªè¦åœ¨æœ€ååˆ¤æ–­ä¸€ä¸‹ `nums[left-1]` æ˜¯ä¸æ˜¯ `target` å°±è¡Œäº†ã€‚

ç±»ä¼¼ä¹‹å‰çš„å·¦ä¾§è¾¹ç•Œæœç´¢ï¼Œ`left` çš„å–å€¼èŒƒå›´æ˜¯ `[0, nums.length]`ï¼Œä½†ç”±äºæˆ‘ä»¬æœ€åè¿”å›çš„æ˜¯ `left - 1`ï¼Œæ‰€ä»¥ `left` å–å€¼ä¸º 0 çš„æ—¶å€™ä¼šé€ æˆç´¢å¼•è¶Šç•Œï¼Œé¢å¤–å¤„ç†ä¸€ä¸‹å³å¯æ­£ç¡®åœ°è¿”å› -1ï¼š

```java
while (left < right) {
    // ...
}
// åˆ¤æ–­ target æ˜¯å¦å­˜åœ¨äº nums ä¸­
// æ­¤æ—¶ left - 1 ç´¢å¼•è¶Šç•Œ
if (left - 1 < 0) return -1;
// åˆ¤æ–­ä¸€ä¸‹ nums[left] æ˜¯ä¸æ˜¯ target
return nums[left - 1] == target ? (left - 1) : -1;
```

**4ã€æ˜¯å¦ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªç®—æ³•çš„ã€Œæœç´¢åŒºé—´ã€ä¹Ÿç»Ÿä¸€æˆä¸¤ç«¯éƒ½é—­çš„å½¢å¼å‘¢ï¼Ÿè¿™æ ·è¿™ä¸‰ä¸ªå†™æ³•å°±å®Œå…¨ç»Ÿä¸€äº†ï¼Œä»¥åå°±å¯ä»¥é—­ç€çœ¼ç›å†™å‡ºæ¥äº†**ã€‚

ç­”ï¼šå½“ç„¶å¯ä»¥ï¼Œç±»ä¼¼æœç´¢å·¦ä¾§è¾¹ç•Œçš„ç»Ÿä¸€å†™æ³•ï¼Œå…¶å®åªè¦æ”¹ä¸¤ä¸ªåœ°æ–¹å°±è¡Œäº†ï¼š

```java
int right_bound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1;
        } else if (nums[mid] == target) {
            // è¿™é‡Œæ”¹æˆæ”¶ç¼©å·¦ä¾§è¾¹ç•Œå³å¯
            left = mid + 1;
        }
    }
    // æœ€åæ”¹æˆè¿”å› left - 1
    if (left - 1 < 0) return -1;
    return nums[left - 1] == target ? (left - 1) : -1;
}
```

å½“ç„¶ï¼Œç”±äº while çš„ç»“æŸæ¡ä»¶ä¸º `right == left - 1`ï¼Œæ‰€ä»¥ä½ æŠŠä¸Šè¿°ä»£ç ä¸­çš„ `left - 1` éƒ½æ”¹æˆ `right` ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œè¿™æ ·å¯èƒ½æ›´æœ‰åˆ©äºçœ‹å‡ºæ¥è¿™æ˜¯åœ¨ã€Œæœç´¢å³ä¾§è¾¹ç•Œã€ã€‚

è‡³æ­¤ï¼Œæœç´¢å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾çš„ä¸¤ç§å†™æ³•ä¹Ÿå®Œæˆäº†ï¼Œå…¶å®å°†ã€Œæœç´¢åŒºé—´ã€ç»Ÿä¸€æˆä¸¤ç«¯éƒ½é—­åè€Œæ›´å®¹æ˜“è®°å¿†ï¼Œä½ è¯´æ˜¯å§ï¼Ÿ

### å››ã€é€»è¾‘ç»Ÿä¸€

æœ‰äº†æœç´¢å·¦å³è¾¹ç•Œçš„äºŒåˆ†æœç´¢ï¼Œä½ å¯ä»¥å»è§£å†³åŠ›æ‰£ç¬¬ 34 é¢˜ã€Œåœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ã€ï¼Œ

æ¥ä¸‹æ¥æ¢³ç†ä¸€ä¸‹è¿™äº›ç»†èŠ‚å·®å¼‚çš„å› æœé€»è¾‘ï¼š

**ç¬¬ä¸€ä¸ªï¼Œæœ€åŸºæœ¬çš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•**ï¼š

```python
å› ä¸ºæˆ‘ä»¬åˆå§‹åŒ– right = nums.length - 1
æ‰€ä»¥å†³å®šäº†æˆ‘ä»¬çš„ã€Œæœç´¢åŒºé—´ã€æ˜¯ [left, right]
æ‰€ä»¥å†³å®šäº† while (left <= right)
åŒæ—¶ä¹Ÿå†³å®šäº† left = mid+1 å’Œ right = mid-1

å› ä¸ºæˆ‘ä»¬åªéœ€æ‰¾åˆ°ä¸€ä¸ª target çš„ç´¢å¼•å³å¯
æ‰€ä»¥å½“ nums[mid] == target æ—¶å¯ä»¥ç«‹å³è¿”å›
```

**ç¬¬äºŒä¸ªï¼Œå¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾**ï¼š

```python
å› ä¸ºæˆ‘ä»¬åˆå§‹åŒ– right = nums.length
æ‰€ä»¥å†³å®šäº†æˆ‘ä»¬çš„ã€Œæœç´¢åŒºé—´ã€æ˜¯ [left, right)
æ‰€ä»¥å†³å®šäº† while (left < right)
åŒæ—¶ä¹Ÿå†³å®šäº† left = mid + 1 å’Œ right = mid

å› ä¸ºæˆ‘ä»¬éœ€æ‰¾åˆ° target çš„æœ€å·¦ä¾§ç´¢å¼•
æ‰€ä»¥å½“ nums[mid] == target æ—¶ä¸è¦ç«‹å³è¿”å›
è€Œè¦æ”¶ç´§å³ä¾§è¾¹ç•Œä»¥é”å®šå·¦ä¾§è¾¹ç•Œ
```

**ç¬¬ä¸‰ä¸ªï¼Œå¯»æ‰¾å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾**ï¼š

```python
å› ä¸ºæˆ‘ä»¬åˆå§‹åŒ– right = nums.length
æ‰€ä»¥å†³å®šäº†æˆ‘ä»¬çš„ã€Œæœç´¢åŒºé—´ã€æ˜¯ [left, right)
æ‰€ä»¥å†³å®šäº† while (left < right)
åŒæ—¶ä¹Ÿå†³å®šäº† left = mid + 1 å’Œ right = mid

å› ä¸ºæˆ‘ä»¬éœ€æ‰¾åˆ° target çš„æœ€å³ä¾§ç´¢å¼•
æ‰€ä»¥å½“ nums[mid] == target æ—¶ä¸è¦ç«‹å³è¿”å›
è€Œè¦æ”¶ç´§å·¦ä¾§è¾¹ç•Œä»¥é”å®šå³ä¾§è¾¹ç•Œ

åˆå› ä¸ºæ”¶ç´§å·¦ä¾§è¾¹ç•Œæ—¶å¿…é¡» left = mid + 1
æ‰€ä»¥æœ€åæ— è®ºè¿”å› left è¿˜æ˜¯ rightï¼Œå¿…é¡»å‡ä¸€
```

å¯¹äºå¯»æ‰¾å·¦å³è¾¹ç•Œçš„äºŒåˆ†æœç´¢ï¼Œå¸¸è§çš„æ‰‹æ³•æ˜¯ä½¿ç”¨å·¦é—­å³å¼€çš„ã€Œæœç´¢åŒºé—´ã€ï¼Œ**æˆ‘ä»¬è¿˜æ ¹æ®é€»è¾‘å°†ã€Œæœç´¢åŒºé—´ã€å…¨éƒ½ç»Ÿä¸€æˆäº†ä¸¤ç«¯éƒ½é—­ï¼Œä¾¿äºè®°å¿†ï¼Œåªè¦ä¿®æ”¹ä¸¤å¤„å³å¯å˜åŒ–å‡ºä¸‰ç§å†™æ³•**ï¼š

```java
int binary_search(int[] nums, int target) {
    int left = 0, right = nums.length - 1; 
    while(left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1; 
        } else if(nums[mid] == target) {
            // ç›´æ¥è¿”å›
            return mid;
        }
    }
    // ç›´æ¥è¿”å›
    return -1;
}

int left_bound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1;
        } else if (nums[mid] == target) {
            // åˆ«è¿”å›ï¼Œé”å®šå·¦ä¾§è¾¹ç•Œ
            right = mid - 1;
        }
    }
    // åˆ¤æ–­ target æ˜¯å¦å­˜åœ¨äº nums ä¸­
    // æ­¤æ—¶ target æ¯”æ‰€æœ‰æ•°éƒ½å¤§ï¼Œè¿”å› -1
    if (left == nums.length) return -1;
    // åˆ¤æ–­ä¸€ä¸‹ nums[left] æ˜¯ä¸æ˜¯ target
    return nums[left] == target ? left : -1;
}

int right_bound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1;
        } else if (nums[mid] == target) {
            // åˆ«è¿”å›ï¼Œé”å®šå³ä¾§è¾¹ç•Œ
            left = mid + 1;
        }
    }
    // æ­¤æ—¶ left - 1 ç´¢å¼•è¶Šç•Œ
    if (left - 1 < 0) return -1;
    // åˆ¤æ–­ä¸€ä¸‹ nums[left] æ˜¯ä¸æ˜¯ target
    return nums[left - 1] == target ? (left - 1) : -1;
}
```

å¦‚æœä»¥ä¸Šå†…å®¹ä½ éƒ½èƒ½ç†è§£ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼ŒäºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„ç»†èŠ‚ä¸è¿‡å¦‚æ­¤ã€‚é€šè¿‡æœ¬æ–‡ï¼Œä½ å­¦ä¼šäº†ï¼š

1ã€åˆ†æäºŒåˆ†æŸ¥æ‰¾ä»£ç æ—¶ï¼Œä¸è¦å‡ºç° elseï¼Œå…¨éƒ¨å±•å¼€æˆ else if æ–¹ä¾¿ç†è§£ã€‚

2ã€æ³¨æ„ã€Œæœç´¢åŒºé—´ã€å’Œ while çš„ç»ˆæ­¢æ¡ä»¶ï¼Œå¦‚æœå­˜åœ¨æ¼æ‰çš„å…ƒç´ ï¼Œè®°å¾—åœ¨æœ€åæ£€æŸ¥ã€‚

3ã€å¦‚éœ€å®šä¹‰å·¦é—­å³å¼€çš„ã€Œæœç´¢åŒºé—´ã€æœç´¢å·¦å³è¾¹ç•Œï¼Œåªè¦åœ¨ `nums[mid] == target` æ—¶åšä¿®æ”¹å³å¯ï¼Œæœç´¢å³ä¾§æ—¶éœ€è¦å‡ä¸€ã€‚

4ã€å¦‚æœå°†ã€Œæœç´¢åŒºé—´ã€å…¨éƒ½ç»Ÿä¸€æˆä¸¤ç«¯éƒ½é—­ï¼Œå¥½è®°ï¼Œåªè¦ç¨æ”¹ `nums[mid] == target` æ¡ä»¶å¤„çš„ä»£ç å’Œè¿”å›çš„é€»è¾‘å³å¯ï¼Œæ¨èæ‹¿å°æœ¬æœ¬è®°ä¸‹ï¼Œä½œä¸ºäºŒåˆ†æœç´¢æ¨¡æ¿ã€‚

æœ€åæˆ‘æƒ³è¯´ï¼Œä»¥ä¸ŠäºŒåˆ†æœç´¢çš„æ¡†æ¶å±äºã€Œæœ¯ã€çš„èŒƒç•´ï¼Œå¦‚æœä¸Šå‡åˆ°ã€Œé“ã€çš„å±‚é¢ï¼Œ**äºŒåˆ†æ€ç»´çš„ç²¾é«“å°±æ˜¯ï¼šé€šè¿‡å·²çŸ¥ä¿¡æ¯å°½å¯èƒ½å¤šåœ°æ”¶ç¼©ï¼ˆæŠ˜åŠï¼‰æœç´¢ç©ºé—´**ï¼Œä»è€Œå¢åŠ ç©·ä¸¾æ•ˆç‡ï¼Œå¿«é€Ÿæ‰¾åˆ°ç›®æ ‡ã€‚

ç†è§£æœ¬æ–‡èƒ½ä¿è¯ä½ å†™å‡ºæ­£ç¡®çš„äºŒåˆ†æŸ¥æ‰¾çš„ä»£ç ï¼Œä½†å®é™…é¢˜ç›®ä¸­ä¸ä¼šç›´æ¥è®©ä½ å†™äºŒåˆ†ä»£ç ï¼Œæˆ‘ä¼šåœ¨ [äºŒåˆ†æŸ¥æ‰¾çš„å˜ä½“](https://appktavsiei5995.pc.xiaoe-tech.com/detail/i_62a07736e4b01a485209b0b4/1) å’Œ [äºŒåˆ†æŸ¥æ‰¾çš„è¿ç”¨](https://labuladong.github.io/article/fname.html?fname=äºŒåˆ†è¿ç”¨) ä¸­è¿›ä¸€æ­¥è®²è§£å¦‚ä½•æŠŠäºŒåˆ†æ€ç»´è¿ç”¨åˆ°æ›´å¤šç®—æ³•é¢˜ä¸­ã€‚



<hr>
<details>
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„æ–‡ç« </strong></summary>

 - [base case å’Œå¤‡å¿˜å½•çš„åˆå§‹å€¼æ€ä¹ˆå®šï¼Ÿ](https://labuladong.github.io/article/fname.html?fname=å¤‡å¿˜å½•ç­‰åŸºç¡€)
 - [ä¸‘æ•°ç³»åˆ—ç®—æ³•è¯¦è§£](https://labuladong.github.io/article/fname.html?fname=ä¸‘æ•°)
 - [äºŒåˆ†æœç´¢æ€ä¹ˆç”¨ï¼Ÿæˆ‘åˆæ€»ç»“äº†å¥—è·¯](https://labuladong.github.io/article/fname.html?fname=äºŒåˆ†è¿ç”¨)
 - [äºŒåˆ†æœç´¢æ€ä¹ˆç”¨ï¼Ÿæˆ‘å’Œå¿«æ‰‹é¢è¯•å®˜è¿›è¡Œäº†æ·±åº¦æ¢è®¨](https://labuladong.github.io/article/fname.html?fname=äºŒåˆ†åˆ†å‰²å­æ•°ç»„)
 - [äºŒåˆ†æœç´¢ç®—æ³•ç»å…¸ä¹ é¢˜](https://appktavsiei5995.pc.xiaoe-tech.com/detail/i_62a07736e4b01a485209b0b4/1)
 - [äºŒåˆ†æŸ¥æ‰¾é«˜æ•ˆåˆ¤å®šå­åºåˆ—](https://labuladong.github.io/article/fname.html?fname=äºŒåˆ†æŸ¥æ‰¾åˆ¤å®šå­åºåˆ—)
 - [åŠ¨æ€è§„åˆ’è®¾è®¡ï¼šæœ€é•¿é€’å¢å­åºåˆ—](https://labuladong.github.io/article/fname.html?fname=åŠ¨æ€è§„åˆ’è®¾è®¡ï¼šæœ€é•¿é€’å¢å­åºåˆ—)
 - [åŒæŒ‡é’ˆæŠ€å·§ç§’æ€ä¸ƒé“æ•°ç»„é¢˜ç›®](https://labuladong.github.io/article/fname.html?fname=åŒæŒ‡é’ˆæŠ€å·§)
 - [å­˜å‚¨ç³»ç»Ÿè®¾è®¡ä¹‹ LSM æ ‘åŸç†](https://labuladong.github.io/article/fname.html?fname=LSMæ ‘)
 - [å¸¦æƒé‡çš„éšæœºé€‰æ‹©ç®—æ³•](https://labuladong.github.io/article/fname.html?fname=éšæœºæƒé‡)
 - [å¿«é€Ÿæ’åºè¯¦è§£åŠåº”ç”¨](https://labuladong.github.io/article/fname.html?fname=å¿«é€Ÿæ’åº)
 - [æˆ‘å†™äº†é¦–è¯—ï¼ŒæŠŠæ»‘åŠ¨çª—å£ç®—æ³•å˜æˆäº†é»˜å†™é¢˜](https://labuladong.github.io/article/fname.html?fname=æ»‘åŠ¨çª—å£æŠ€å·§è¿›é˜¶)
 - [æˆ‘çš„åˆ·é¢˜å¿ƒå¾—](https://labuladong.github.io/article/fname.html?fname=ç®—æ³•å¿ƒå¾—)
 - [è®²ä¸¤é“å¸¸è€ƒçš„é˜¶ä¹˜ç®—æ³•é¢˜](https://labuladong.github.io/article/fname.html?fname=é˜¶ä¹˜é¢˜ç›®)

</details><hr>




<hr>
<details>
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„é¢˜ç›®</strong></summary>

<strong>å®‰è£… [æˆ‘çš„ Chrome åˆ·é¢˜æ’ä»¶](https://mp.weixin.qq.com/s/X-fE9sR4BLi6T9pn7xP4pg) ç‚¹å¼€ä¸‹åˆ—é¢˜ç›®å¯ç›´æ¥æŸ¥çœ‹è§£é¢˜æ€è·¯ï¼š</strong>

| LeetCode | åŠ›æ‰£ |
| :----: | :----: |
| [1201. Ugly Number III](https://leetcode.com/problems/ugly-number-iii/?show=1) | [1201. ä¸‘æ•° III](https://leetcode.cn/problems/ugly-number-iii/?show=1) |
| [162. Find Peak Element](https://leetcode.com/problems/find-peak-element/?show=1) | [162. å¯»æ‰¾å³°å€¼](https://leetcode.cn/problems/find-peak-element/?show=1) |
| [240. Search a 2D Matrix II](https://leetcode.com/problems/search-a-2d-matrix-ii/?show=1) | [240. æœç´¢äºŒç»´çŸ©é˜µ II](https://leetcode.cn/problems/search-a-2d-matrix-ii/?show=1) |
| [33. Search in Rotated Sorted Array](https://leetcode.com/problems/search-in-rotated-sorted-array/?show=1) | [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode.cn/problems/search-in-rotated-sorted-array/?show=1) |
| [35. Search Insert Position](https://leetcode.com/problems/search-insert-position/?show=1) | [35. æœç´¢æ’å…¥ä½ç½®](https://leetcode.cn/problems/search-insert-position/?show=1) |
| [658. Find K Closest Elements](https://leetcode.com/problems/find-k-closest-elements/?show=1) | [658. æ‰¾åˆ° K ä¸ªæœ€æ¥è¿‘çš„å…ƒç´ ](https://leetcode.cn/problems/find-k-closest-elements/?show=1) |
| [74. Search a 2D Matrix](https://leetcode.com/problems/search-a-2d-matrix/?show=1) | [74. æœç´¢äºŒç»´çŸ©é˜µ](https://leetcode.cn/problems/search-a-2d-matrix/?show=1) |
| [793. Preimage Size of Factorial Zeroes Function](https://leetcode.com/problems/preimage-size-of-factorial-zeroes-function/?show=1) | [793. é˜¶ä¹˜å‡½æ•°å K ä¸ªé›¶](https://leetcode.cn/problems/preimage-size-of-factorial-zeroes-function/?show=1) |
| [81. Search in Rotated Sorted Array II](https://leetcode.com/problems/search-in-rotated-sorted-array-ii/?show=1) | [81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II](https://leetcode.cn/problems/search-in-rotated-sorted-array-ii/?show=1) |
| [852. Peak Index in a Mountain Array](https://leetcode.com/problems/peak-index-in-a-mountain-array/?show=1) | [852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•](https://leetcode.cn/problems/peak-index-in-a-mountain-array/?show=1) |
| - | [å‰‘æŒ‡ Offer 04. äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾](https://leetcode.cn/problems/er-wei-shu-zu-zhong-de-cha-zhao-lcof/?show=1) |
| - | [å‰‘æŒ‡ Offer 53 - I. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­— I](https://leetcode.cn/problems/zai-pai-xu-shu-zu-zhong-cha-zhao-shu-zi-lcof/?show=1) |
| - | [å‰‘æŒ‡ Offer 53 - II. 0ï½n-1ä¸­ç¼ºå¤±çš„æ•°å­—](https://leetcode.cn/problems/que-shi-de-shu-zi-lcof/?show=1) |
| - | [å‰‘æŒ‡ Offer II 068. æŸ¥æ‰¾æ’å…¥ä½ç½®](https://leetcode.cn/problems/N6YdxV/?show=1) |
| - | [å‰‘æŒ‡ Offer II 069. å±±å³°æ•°ç»„çš„é¡¶éƒ¨](https://leetcode.cn/problems/B1IidL/?show=1) |

</details>



**ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿**

**ã€Šlabuladong çš„ç®—æ³•å°æŠ„ã€‹å·²ç»å‡ºç‰ˆï¼Œå…³æ³¨å…¬ä¼—å·æŸ¥çœ‹è¯¦æƒ…ï¼›åå°å›å¤å…³é”®è¯ã€Œ**è¿›ç¾¤**ã€å¯åŠ å…¥ç®—æ³•ç¾¤ï¼›å›å¤ã€Œ**å…¨å®¶æ¡¶**ã€å¯ä¸‹è½½é…å¥— PDF å’Œåˆ·é¢˜å…¨å®¶æ¡¶**ï¼š

![](https://labuladong.github.io/algo/images/souyisou2.png)


======å…¶ä»–è¯­è¨€ä»£ç ====== 

[704.äºŒåˆ†æŸ¥æ‰¾](https://leetcode-cn.com/problems/binary-search)

[34.åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/)



### python

[MarineJoker](https://github.com/MarineJoker) æä¾› Python3 ä»£ç   

```python
# åŸºæœ¬äºŒåˆ†æœç´¢
def binarySearch(nums, target):
    left = 0
    right = len(nums) - 1
    while left <= right:
        mid = (left + right) // 2
        if nums[mid] == target:
            # ç›´æ¥è¿”å›
            return mid
        elif nums[mid] < target:
            left = mid + 1
        elif nums[mid] > target:
            right = mid - 1
    # ç›´æ¥è¿”å›
    return -1


# å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æœç´¢ï¼Œå¼€åŒºé—´å†™æ³•
def left_bound(nums, target):
    left, right = 0, len(nums)
    if right == 0:
        return -1
    while left < right:
        mid = (left + right) // 2
        if nums[mid] == target:
            # é”å®šå·¦ä¾§è¾¹ç•Œ
            right = mid
        elif nums[mid] < target:
            left = mid + 1
        elif nums[mid] > target:
            right = mid
    # æ£€æŸ¥leftè¶Šç•Œæƒ…å†µ
    if left >= len(nums) or nums[left] != target:
        return -1
    return left


# å¯»æ‰¾å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æœç´¢ï¼Œå¼€åŒºé—´å†™æ³•
def right_bound(nums, target):
    left, right = 0, len(nums)
    if right == 0:
        return -1
    while left < right:
        mid = (left + right) // 2
        if nums[mid] == target:
            # é”å®šå³ä¾§è¾¹ç•Œ
            left = mid + 1
        elif nums[mid] < target:
            left = mid + 1
        elif nums[mid] > target:
            right = mid
    # æ£€æŸ¥è¶Šç•Œæƒ…å†µ
    if left == 0 or nums[left - 1] != target:
        return -1
    return left - 1


# å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æœç´¢ï¼Œé—­åŒºé—´å†™æ³•
def left_bound(nums, target):
    left, right = 0, len(nums) - 1
    while left <= right:
        mid = (left + right) // 2
        if nums[mid] == target:
            # é”å®šå·¦ä¾§è¾¹ç•Œ
            right = mid - 1
        elif nums[mid] < target:
            left = mid + 1
        elif nums[mid] > target:
            right = mid - 1
    # æ£€æŸ¥leftè¶Šç•Œæƒ…å†µ
    if left >= len(nums) or nums[left] != target:
        return -1
    return left

# å¯»æ‰¾å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æœç´¢ï¼Œé—­åŒºé—´å†™æ³•
def right_bound(nums, target):
    left, right = 0, len(nums) - 1
    while left <= right:
        mid = (left + right) // 2
        if nums[mid] == target:
            # é”å®šå³ä¾§è¾¹ç•Œ
            left = mid + 1
        elif nums[mid] < target:
            left = mid + 1
        elif nums[mid] > target:
            right = mid - 1
    # æ£€æŸ¥rightè¶Šç•Œæƒ…å†µ
    if right < 0 or nums[right] != target:
        return -1
    return right
```



### javascript

å¯»æ‰¾å·¦ã€å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æœç´¢ï¼Œä¸¤ç«¯é—­åˆ

```js
let binary_search = function (nums, target) {
    if (nums.length === 0) return -1;
    let left = 0, right = nums.length - 1;
    while (left <= right) {
        let mid = Math.floor(left + (right - left) / 2);
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1;
        } else if (nums[mid] === target) {
            // ç›´æ¥è¿”å›
            return mid;
        }
    }
    // ç›´æ¥è¿”å›
    return -1;
}


let left_bound = function (nums, target) {
    if (nums.length === 0) return -1;

    let left = 0, right = nums.length - 1;
    // æœç´¢åŒºé—´ä¸º [left, right]
    while (left <= right) {
        let mid = left + Math.floor((right - left) / 2);
        if (nums[mid] < target) {
            // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
            left = mid + 1;
        } else if (nums[mid] > target) {
            // æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
            right = mid - 1;
        } else if (nums[mid] === target) {
            // æ”¶ç¼©å³ä¾§è¾¹ç•Œ
            right = mid - 1;
        }
    }
    // æ£€æŸ¥å‡ºç•Œæƒ…å†µ
    if (left >= nums.length || nums[left] !== target)
        return -1;
    return left;
}

// ä¸¤ç«¯éƒ½é—­
let right_bound = function (nums, target) {
    if (nums.length === 0) return -1;

    let left = 0, right = nums.length - 1;
    while (left <= right) {
        let mid = left + (right - left) / 2;

        if (nums[mid] < target) {
            // åŒºé—´å˜åˆ°[mid+1, right]
            left = mid + 1;
        } else if (nums[mid] > target) {
            // åŒºé—´å˜åˆ°[left, mid-1]
            right = mid - 1;
        } else if (nums[mid] === target) {
            // åˆ«è¿”å›ï¼Œé”å®šå³ä¾§è¾¹ç•Œ
            // åŒºé—´å˜åˆ°[mid+1, right]
            left = mid + 1;
        }
    }
    // æœ€åè¦æ£€æŸ¥ right è¶Šç•Œçš„æƒ…å†µ
    if (right < 0 || nums[right] !== target)
        return -1;
    return right;
}
```

[704.äºŒåˆ†æŸ¥æ‰¾](https://leetcode-cn.com/problems/binary-search)

```js
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number}
 */
var search = function(nums, target) {
    if (nums.length === 0) return -1;
    let left = 0, right = nums.length - 1;
    while (left <= right) {
        let mid = Math.floor(left + (right - left) / 2);
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1;
        } else if (nums[mid] === target) {
            // ç›´æ¥è¿”å›
            return mid;
        }
    }
    // ç›´æ¥è¿”å›
    return -1;
};
```



[34.åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/)

æŒ‰ç…§æœ¬æ–‡çš„æ€è·¯ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å°±å†™å‡ºç­”æ¡ˆï¼Œä½†ä¼šè¶…æ—¶ã€‚

```js
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number[]}
 */
var searchRange = function(nums, target) {
    let left = left_bound(nums, target);
    let right = right_bound(nums, target)
    return [left]
};


let left_bound = function (nums, target) {
    if (nums.length === 0) return -1;

    let left = 0, right = nums.length - 1;
    // æœç´¢åŒºé—´ä¸º [left, right]
    while (left <= right) {
        let mid = left + Math.floor((right - left) / 2);
        if (nums[mid] < target) {
            // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
            left = mid + 1;
        } else if (nums[mid] > target) {
            // æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
            right = mid - 1;
        } else if (nums[mid] === target) {
            // æ”¶ç¼©å³ä¾§è¾¹ç•Œ
            right = mid - 1;
        }
    }
    // æ£€æŸ¥å‡ºç•Œæƒ…å†µ
    if (left >= nums.length || nums[left] !== target)
        return -1;
    return left;
}

// ä¸¤ç«¯éƒ½é—­
let right_bound = function (nums, target) {
    if (nums.length === 0) return -1;

    let left = 0, right = nums.length - 1;
    while (left <= right) {
        let mid = left + (right - left) / 2;

        if (nums[mid] < target) {
            // åŒºé—´å˜åˆ°[mid+1, right]
            left = mid + 1;
        } else if (nums[mid] > target) {
            // åŒºé—´å˜åˆ°[left, mid-1]
            right = mid - 1;
        } else if (nums[mid] === target) {
            // åˆ«è¿”å›ï¼Œé”å®šå³ä¾§è¾¹ç•Œ
            // åŒºé—´å˜åˆ°[mid+1, right]
            left = mid + 1;
        }
    }
    // æœ€åè¦æ£€æŸ¥ right è¶Šç•Œçš„æƒ…å†µ
    if (right < 0 || nums[right] !== target)
        return -1;
    return right;
}
```

ç°é€šè¿‡lowerå˜é‡æ¥ç¡®å®šï¼Œå½“å‰çš„äºŒåˆ†æ³•æ˜¯å‘å·¦æ‰¾è¿˜æ˜¯å‘å³æ‰¾ã€‚

```js
const binarySearch = (nums, target, lower) => {
    let left = 0, right = nums.length - 1, ans = nums.length;
    while (left <= right) {
        const mid = Math.floor((left + right) / 2);
        if (nums[mid] > target || (lower && nums[mid] >= target)) {
            right = mid - 1;
            ans = mid;
        } else {
            left = mid + 1;
        }
    }
    return ans;
}

var searchRange = function(nums, target) {
    let ans = [-1, -1];
    const leftIdx = binarySearch(nums, target, true);
    const rightIdx = binarySearch(nums, target, false) - 1;
    if (leftIdx <= rightIdx && rightIdx < nums.length && nums[leftIdx] === target && nums[rightIdx] === target) {
        ans = [leftIdx, rightIdx];
    } 
    return ans;
};

```

