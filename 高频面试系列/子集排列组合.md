# ä¸€æ–‡ç§’æ€æ‰€æœ‰æ’åˆ—ç»„åˆå­é›†é—®é¢˜

<p align='center'>
<a href="https://github.com/labuladong/fucking-algorithm" target="view_window"><img alt="GitHub" src="https://img.shields.io/github/stars/labuladong/fucking-algorithm?label=Stars&style=flat-square&logo=GitHub"></a>
<a href="https://appktavsiei5995.pc.xiaoe-tech.com/index" target="_blank"><img class="my_header_icon" src="https://img.shields.io/static/v1?label=ç²¾å“è¯¾ç¨‹&message=æŸ¥çœ‹&color=pink&style=flat"></a>
<a href="https://www.zhihu.com/people/labuladong"><img src="https://img.shields.io/badge/%E7%9F%A5%E4%B9%8E-@labuladong-000000.svg?style=flat-square&logo=Zhihu"></a>
<a href="https://space.bilibili.com/14089380"><img src="https://img.shields.io/badge/Bç«™-@labuladong-000000.svg?style=flat-square&logo=Bilibili"></a>
</p>

![](https://labuladong.github.io/algo/images/souyisou1.png)

**é€šçŸ¥ï¼š[æ•°æ®ç»“æ„ç²¾å“è¯¾](https://aep.h5.xeknow.com/s/1XJHEO) å·²æ›´æ–°åˆ° V2.0ï¼›[ç¬¬ 12 æœŸåˆ·é¢˜æ‰“å¡](https://mp.weixin.qq.com/s/eUG2OOzY3k_ZTz-CFvtv5Q) æœ€åä¸€å¤©æŠ¥åï¼›ç‚¹å‡»è¿™é‡Œä½“éªŒ [åˆ·é¢˜å…¨å®¶æ¡¶](https://labuladong.gitee.io/algo/images/others/%E5%85%A8%E5%AE%B6%E6%A1%B6.jpg)ã€‚å¦å¤–ï¼Œå»ºè®®ä½ åœ¨æˆ‘çš„ [ç½‘ç«™](https://labuladong.gitee.io/algo/) å­¦ä¹ æ–‡ç« ï¼Œä½“éªŒæ›´å¥½ã€‚**



è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¸ä»…å­¦ä¼šäº†ç®—æ³•å¥—è·¯ï¼Œè¿˜å¯ä»¥é¡ºä¾¿è§£å†³å¦‚ä¸‹é¢˜ç›®ï¼š

| LeetCode | åŠ›æ‰£ | éš¾åº¦ |
| :----: | :----: | :----: |
| [216. Combination Sum III](https://leetcode.com/problems/combination-sum-iii/) | [216. ç»„åˆæ€»å’Œ III](https://leetcode.cn/problems/combination-sum-iii/) | ğŸŸ 
| [39. Combination Sum](https://leetcode.com/problems/combination-sum/) | [39. ç»„åˆæ€»å’Œ](https://leetcode.cn/problems/combination-sum/) | ğŸŸ 
| [40. Combination Sum II](https://leetcode.com/problems/combination-sum-ii/) | [40. ç»„åˆæ€»å’Œ II](https://leetcode.cn/problems/combination-sum-ii/) | ğŸŸ 
| [46. Permutations](https://leetcode.com/problems/permutations/) | [46. å…¨æ’åˆ—](https://leetcode.cn/problems/permutations/) | ğŸŸ 
| [47. Permutations II](https://leetcode.com/problems/permutations-ii/) | [47. å…¨æ’åˆ— II](https://leetcode.cn/problems/permutations-ii/) | ğŸŸ 
| [77. Combinations](https://leetcode.com/problems/combinations/) | [77. ç»„åˆ](https://leetcode.cn/problems/combinations/) | ğŸŸ 
| [78. Subsets](https://leetcode.com/problems/subsets/) | [78. å­é›†](https://leetcode.cn/problems/subsets/) | ğŸŸ 
| [90. Subsets II](https://leetcode.com/problems/subsets-ii/) | [90. å­é›† II](https://leetcode.cn/problems/subsets-ii/) | ğŸŸ 
| - | [å‰‘æŒ‡ Offer II 079. æ‰€æœ‰å­é›†](https://leetcode.cn/problems/TVdhkn/) | ğŸŸ 
| - | [å‰‘æŒ‡ Offer II 080. å«æœ‰ k ä¸ªå…ƒç´ çš„ç»„åˆ](https://leetcode.cn/problems/uUsW3B/) | ğŸŸ 
| - | [å‰‘æŒ‡ Offer II 081. å…è®¸é‡å¤é€‰æ‹©å…ƒç´ çš„ç»„åˆ](https://leetcode.cn/problems/Ygoe9J/) | ğŸŸ 
| - | [å‰‘æŒ‡ Offer II 082. å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„ç»„åˆ](https://leetcode.cn/problems/4sjJUc/) | ğŸŸ 
| - | [å‰‘æŒ‡ Offer II 083. æ²¡æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—](https://leetcode.cn/problems/VvJkup/) | ğŸŸ 
| - | [å‰‘æŒ‡ Offer II 084. å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—](https://leetcode.cn/problems/7p8L0Z/) | ğŸŸ 

**-----------**

> æœ¬æ–‡æœ‰è§†é¢‘ç‰ˆï¼š[å›æº¯ç®—æ³•ç§’æ€æ‰€æœ‰æ’åˆ—/ç»„åˆ/å­é›†é—®é¢˜](https://www.bilibili.com/video/BV1Yt4y1t7dK/)

è™½ç„¶æ’åˆ—ã€ç»„åˆã€å­é›†ç³»åˆ—é—®é¢˜æ˜¯é«˜ä¸­å°±å­¦è¿‡çš„ï¼Œä½†å¦‚æœæƒ³ç¼–å†™ç®—æ³•è§£å†³å®ƒä»¬ï¼Œè¿˜æ˜¯éå¸¸è€ƒéªŒè®¡ç®—æœºæ€ç»´çš„ï¼Œæœ¬æ–‡å°±è®²è®²ç¼–ç¨‹è§£å†³è¿™å‡ ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ€è·¯ï¼Œä»¥åå†æœ‰ä»€ä¹ˆå˜ä½“ï¼Œä½ ä¹Ÿèƒ½æ‰‹åˆ°æ“’æ¥ï¼Œä»¥ä¸å˜åº”ä¸‡å˜ã€‚

æ— è®ºæ˜¯æ’åˆ—ã€ç»„åˆè¿˜æ˜¯å­é›†é—®é¢˜ï¼Œç®€å•è¯´æ— éå°±æ˜¯è®©ä½ ä»åºåˆ— `nums` ä¸­ä»¥ç»™å®šè§„åˆ™å–è‹¥å¹²å…ƒç´ ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å˜ä½“ï¼š

**å½¢å¼ä¸€ã€å…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼Œå³ `nums` ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ï¼Œè¿™ä¹Ÿæ˜¯æœ€åŸºæœ¬çš„å½¢å¼**ã€‚

ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥ `nums = [2,3,6,7]`ï¼Œå’Œä¸º 7 çš„ç»„åˆåº”è¯¥åªæœ‰ `[7]`ã€‚

**å½¢å¼äºŒã€å…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼Œå³ `nums` ä¸­çš„å…ƒç´ å¯ä»¥å­˜åœ¨é‡å¤ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡**ã€‚

ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥ `nums = [2,5,2,1,2]`ï¼Œå’Œä¸º 7 çš„ç»„åˆåº”è¯¥æœ‰ä¸¤ç§ `[2,2,2,1]` å’Œ `[5,2]`ã€‚

**å½¢å¼ä¸‰ã€å…ƒç´ æ— é‡å¯å¤é€‰ï¼Œå³ `nums` ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥è¢«ä½¿ç”¨è‹¥å¹²æ¬¡**ã€‚

ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥ `nums = [2,3,6,7]`ï¼Œå’Œä¸º 7 çš„ç»„åˆåº”è¯¥æœ‰ä¸¤ç§ `[2,2,3]` å’Œ `[7]`ã€‚

å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¯´æœ‰ç¬¬å››ç§å½¢å¼ï¼Œå³å…ƒç´ å¯é‡å¯å¤é€‰ã€‚ä½†æ—¢ç„¶å…ƒç´ å¯å¤é€‰ï¼Œé‚£åˆä½•å¿…å­˜åœ¨é‡å¤å…ƒç´ å‘¢ï¼Ÿå…ƒç´ å»é‡ä¹‹åå°±ç­‰åŒäºå½¢å¼ä¸‰ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸ç”¨è€ƒè™‘ã€‚

ä¸Šé¢ç”¨ç»„åˆé—®é¢˜ä¸¾çš„ä¾‹å­ï¼Œä½†æ’åˆ—ã€ç»„åˆã€å­é›†é—®é¢˜éƒ½å¯ä»¥æœ‰è¿™ä¸‰ç§åŸºæœ¬å½¢å¼ï¼Œæ‰€ä»¥å…±æœ‰ 9 ç§å˜åŒ–ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œé¢˜ç›®ä¹Ÿå¯ä»¥å†æ·»åŠ å„ç§é™åˆ¶æ¡ä»¶ï¼Œæ¯”å¦‚è®©ä½ æ±‚å’Œä¸º `target` ä¸”å…ƒç´ ä¸ªæ•°ä¸º `k` çš„ç»„åˆï¼Œé‚£è¿™ä¹ˆä¸€æ¥åˆå¯ä»¥è¡ç”Ÿå‡ºä¸€å †å˜ä½“ï¼Œæ€ªä¸å¾—é¢è¯•ç¬”è¯•ä¸­ç»å¸¸è€ƒåˆ°æ’åˆ—ç»„åˆè¿™ç§åŸºæœ¬é¢˜å‹ã€‚

**ä½†æ— è®ºå½¢å¼æ€ä¹ˆå˜åŒ–ï¼Œå…¶æœ¬è´¨å°±æ˜¯ç©·ä¸¾æ‰€æœ‰è§£ï¼Œè€Œè¿™äº›è§£å‘ˆç°æ ‘å½¢ç»“æ„ï¼Œæ‰€ä»¥åˆç†ä½¿ç”¨å›æº¯ç®—æ³•æ¡†æ¶ï¼Œç¨æ”¹ä»£ç æ¡†æ¶å³å¯æŠŠè¿™äº›é—®é¢˜ä¸€ç½‘æ‰“å°½**ã€‚

å…·ä½“æ¥è¯´ï¼Œä½ éœ€è¦å…ˆé˜…è¯»å¹¶ç†è§£å‰æ–‡ [å›æº¯ç®—æ³•æ ¸å¿ƒå¥—è·¯](https://labuladong.github.io/article/fname.html?fname=å›æº¯ç®—æ³•è¯¦è§£ä¿®è®¢ç‰ˆ)ï¼Œç„¶åè®°ä½å¦‚ä¸‹å­é›†é—®é¢˜å’Œæ’åˆ—é—®é¢˜çš„å›æº¯æ ‘ï¼Œå°±å¯ä»¥è§£å†³æ‰€æœ‰æ’åˆ—ç»„åˆå­é›†ç›¸å…³çš„é—®é¢˜ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/1.jpeg)

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/2.jpeg)

ä¸ºä»€ä¹ˆåªè¦è®°ä½è¿™ä¸¤ç§æ ‘å½¢ç»“æ„å°±èƒ½è§£å†³æ‰€æœ‰ç›¸å…³é—®é¢˜å‘¢ï¼Ÿ

**é¦–å…ˆï¼Œç»„åˆé—®é¢˜å’Œå­é›†é—®é¢˜å…¶å®æ˜¯ç­‰ä»·çš„ï¼Œè¿™ä¸ªåé¢ä¼šè®²ï¼›è‡³äºä¹‹å‰è¯´çš„ä¸‰ç§å˜åŒ–å½¢å¼ï¼Œæ— éæ˜¯åœ¨è¿™ä¸¤æ£µæ ‘ä¸Šå‰ªæ‰æˆ–è€…å¢åŠ ä¸€äº›æ ‘æç½¢äº†**ã€‚

é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹ç©·ä¸¾ï¼ŒæŠŠæ’åˆ—/ç»„åˆ/å­é›†é—®é¢˜çš„ 9 ç§å½¢å¼éƒ½è¿‡ä¸€éï¼Œå­¦å­¦å¦‚ä½•ç”¨å›æº¯ç®—æ³•æŠŠå®ƒä»¬ä¸€å¥—å¸¦èµ°ã€‚

### å­é›†ï¼ˆå…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼‰

åŠ›æ‰£ç¬¬ 78 é¢˜ã€Œå­é›†ã€å°±æ˜¯è¿™ä¸ªé—®é¢˜ï¼š

é¢˜ç›®ç»™ä½ è¾“å…¥ä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ•°ç»„ `nums`ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æœ€å¤šä½¿ç”¨ä¸€æ¬¡ï¼Œè¯·ä½ è¿”å› `nums` çš„æ‰€æœ‰å­é›†ã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```java
List<List<Integer>> subsets(int[] nums)
```

æ¯”å¦‚è¾“å…¥ `nums = [1,2,3]`ï¼Œç®—æ³•åº”è¯¥è¿”å›å¦‚ä¸‹å­é›†ï¼š

```java
[ [],[1],[2],[3],[1,2],[1,3],[2,3],[1,2,3] ]
```

å¥½ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸è€ƒè™‘å¦‚ä½•ç”¨ä»£ç å®ç°ï¼Œå…ˆå›å¿†ä¸€ä¸‹æˆ‘ä»¬çš„é«˜ä¸­çŸ¥è¯†ï¼Œå¦‚ä½•æ‰‹æ¨æ‰€æœ‰å­é›†ï¼Ÿ

é¦–å…ˆï¼Œç”Ÿæˆå…ƒç´ ä¸ªæ•°ä¸º 0 çš„å­é›†ï¼Œå³ç©ºé›† `[]`ï¼Œä¸ºäº†æ–¹ä¾¿è¡¨ç¤ºï¼Œæˆ‘ç§°ä¹‹ä¸º `S_0`ã€‚

ç„¶åï¼Œåœ¨ `S_0` çš„åŸºç¡€ä¸Šç”Ÿæˆå…ƒç´ ä¸ªæ•°ä¸º 1 çš„æ‰€æœ‰å­é›†ï¼Œæˆ‘ç§°ä¸º `S_1`ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/3.jpeg)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `S_1` çš„åŸºç¡€ä¸Šæ¨å¯¼å‡º `S_2`ï¼Œå³å…ƒç´ ä¸ªæ•°ä¸º 2 çš„æ‰€æœ‰å­é›†ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/4.jpeg)

ä¸ºä»€ä¹ˆé›†åˆ `[2]` åªéœ€è¦æ·»åŠ  `3`ï¼Œè€Œä¸æ·»åŠ å‰é¢çš„ `1` å‘¢ï¼Ÿ

å› ä¸ºé›†åˆä¸­çš„å…ƒç´ ä¸ç”¨è€ƒè™‘é¡ºåºï¼Œ `[1,2,3]` ä¸­ `2` åé¢åªæœ‰ `3`ï¼Œå¦‚æœä½ å‘å‰è€ƒè™‘ `1`ï¼Œé‚£ä¹ˆ `[2,1]` ä¼šå’Œä¹‹å‰å·²ç»ç”Ÿæˆçš„å­é›† `[1,2]` é‡å¤ã€‚

**æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬é€šè¿‡ä¿è¯å…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºä¸å˜æ¥é˜²æ­¢å‡ºç°é‡å¤çš„å­é›†**ã€‚

æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `S_2` æ¨å‡º `S_3`ï¼Œå®é™…ä¸Š `S_3` ä¸­åªæœ‰ä¸€ä¸ªé›†åˆ `[1,2,3]`ï¼Œå®ƒæ˜¯é€šè¿‡ `[1,2]` æ¨å‡ºçš„ã€‚

æ•´ä¸ªæ¨å¯¼è¿‡ç¨‹å°±æ˜¯è¿™æ ·ä¸€æ£µæ ‘ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/5.jpeg)

æ³¨æ„è¿™æ£µæ ‘çš„ç‰¹æ€§ï¼š

**å¦‚æœæŠŠæ ¹èŠ‚ç‚¹ä½œä¸ºç¬¬ 0 å±‚ï¼Œå°†æ¯ä¸ªèŠ‚ç‚¹å’Œæ ¹èŠ‚ç‚¹ä¹‹é—´æ ‘æä¸Šçš„å…ƒç´ ä½œä¸ºè¯¥èŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆç¬¬ `n` å±‚çš„æ‰€æœ‰èŠ‚ç‚¹å°±æ˜¯å¤§å°ä¸º `n` çš„æ‰€æœ‰å­é›†**ã€‚

ä½ æ¯”å¦‚å¤§å°ä¸º 2 çš„å­é›†å°±æ˜¯è¿™ä¸€å±‚èŠ‚ç‚¹çš„å€¼ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/6.jpeg)

> **PSï¼šæ³¨æ„ï¼Œæœ¬æ–‡ä¹‹åæ‰€è¯´ã€ŒèŠ‚ç‚¹çš„å€¼ã€éƒ½æ˜¯æŒ‡èŠ‚ç‚¹å’Œæ ¹èŠ‚ç‚¹ä¹‹é—´æ ‘æä¸Šçš„å…ƒç´ ï¼Œä¸”å°†æ ¹èŠ‚ç‚¹è®¤ä¸ºæ˜¯ç¬¬ 0 å±‚**ã€‚

é‚£ä¹ˆå†è¿›ä¸€æ­¥ï¼Œå¦‚æœæƒ³è®¡ç®—æ‰€æœ‰å­é›†ï¼Œé‚£åªè¦éå†è¿™æ£µå¤šå‰æ ‘ï¼ŒæŠŠæ‰€æœ‰èŠ‚ç‚¹çš„å€¼æ”¶é›†èµ·æ¥ä¸å°±è¡Œäº†ï¼Ÿ

ç›´æ¥çœ‹ä»£ç ï¼š

```java
List<List<Integer>> res = new LinkedList<>();
// è®°å½•å›æº¯ç®—æ³•çš„é€’å½’è·¯å¾„
LinkedList<Integer> track = new LinkedList<>();

// ä¸»å‡½æ•°
public List<List<Integer>> subsets(int[] nums) {
    backtrack(nums, 0);
    return res;
}

// å›æº¯ç®—æ³•æ ¸å¿ƒå‡½æ•°ï¼Œéå†å­é›†é—®é¢˜çš„å›æº¯æ ‘
void backtrack(int[] nums, int start) {

    // å‰åºä½ç½®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå­é›†
    res.add(new LinkedList<>(track));
    
    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = start; i < nums.length; i++) {
        // åšé€‰æ‹©
        track.addLast(nums[i]);
        // é€šè¿‡ start å‚æ•°æ§åˆ¶æ ‘æçš„éå†ï¼Œé¿å…äº§ç”Ÿé‡å¤çš„å­é›†
        backtrack(nums, i + 1);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
    }
}
```

çœ‹è¿‡å‰æ–‡ [å›æº¯ç®—æ³•æ ¸å¿ƒæ¡†æ¶](https://labuladong.github.io/article/fname.html?fname=å›æº¯ç®—æ³•è¯¦è§£ä¿®è®¢ç‰ˆ) çš„è¯»è€…åº”è¯¥å¾ˆå®¹æ˜“ç†è§£è¿™æ®µä»£ç å§ï¼Œæˆ‘ä»¬ä½¿ç”¨ `start` å‚æ•°æ§åˆ¶æ ‘æçš„ç”Ÿé•¿é¿å…äº§ç”Ÿé‡å¤çš„å­é›†ï¼Œç”¨ `track` è®°å½•æ ¹èŠ‚ç‚¹åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„è·¯å¾„çš„å€¼ï¼ŒåŒæ—¶åœ¨å‰åºä½ç½®æŠŠæ¯ä¸ªèŠ‚ç‚¹çš„è·¯å¾„å€¼æ”¶é›†èµ·æ¥ï¼Œå®Œæˆå›æº¯æ ‘çš„éå†å°±æ”¶é›†äº†æ‰€æœ‰å­é›†ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/5.jpeg)

æœ€åï¼Œ`backtrack` å‡½æ•°å¼€å¤´çœ‹ä¼¼æ²¡æœ‰ base caseï¼Œä¼šä¸ä¼šè¿›å…¥æ— é™é€’å½’ï¼Ÿ

å…¶å®ä¸ä¼šçš„ï¼Œå½“ `start == nums.length` æ—¶ï¼Œå¶å­èŠ‚ç‚¹çš„å€¼ä¼šè¢«è£…å…¥ `res`ï¼Œä½† for å¾ªç¯ä¸ä¼šæ‰§è¡Œï¼Œä¹Ÿå°±ç»“æŸäº†é€’å½’ã€‚

### ç»„åˆï¼ˆå…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼‰

å¦‚æœä½ èƒ½å¤ŸæˆåŠŸçš„ç”Ÿæˆæ‰€æœ‰æ— é‡å­é›†ï¼Œé‚£ä¹ˆä½ ç¨å¾®æ”¹æ”¹ä»£ç å°±èƒ½ç”Ÿæˆæ‰€æœ‰æ— é‡ç»„åˆäº†ã€‚

ä½ æ¯”å¦‚è¯´ï¼Œè®©ä½ åœ¨ `nums = [1,2,3]` ä¸­æ‹¿ 2 ä¸ªå…ƒç´ å½¢æˆæ‰€æœ‰çš„ç»„åˆï¼Œä½ æ€ä¹ˆåšï¼Ÿ

ç¨å¾®æƒ³æƒ³å°±ä¼šå‘ç°ï¼Œå¤§å°ä¸º 2 çš„æ‰€æœ‰ç»„åˆï¼Œä¸å°±æ˜¯æ‰€æœ‰å¤§å°ä¸º 2 çš„å­é›†å˜›ã€‚

**æ‰€ä»¥æˆ‘è¯´ç»„åˆå’Œå­é›†æ˜¯ä¸€æ ·çš„ï¼šå¤§å°ä¸º `k` çš„ç»„åˆå°±æ˜¯å¤§å°ä¸º `k` çš„å­é›†**ã€‚

æ¯”å¦‚åŠ›æ‰£ç¬¬ 77 é¢˜ã€Œç»„åˆã€ï¼š

ç»™å®šä¸¤ä¸ªæ•´æ•° `n` å’Œ `k`ï¼Œè¿”å›èŒƒå›´ `[1, n]` ä¸­æ‰€æœ‰å¯èƒ½çš„ `k` ä¸ªæ•°çš„ç»„åˆã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```java
List<List<Integer>> combine(int n, int k)
```

æ¯”å¦‚ `combine(3, 2)` çš„è¿”å›å€¼åº”è¯¥æ˜¯ï¼š

```java
[ [1,2],[1,3],[2,3] ]
```

è¿™æ˜¯æ ‡å‡†çš„ç»„åˆé—®é¢˜ï¼Œä½†æˆ‘ç»™ä½ ç¿»è¯‘ä¸€ä¸‹å°±å˜æˆå­é›†é—®é¢˜äº†ï¼š

**ç»™ä½ è¾“å…¥ä¸€ä¸ªæ•°ç»„ `nums = [1,2..,n]` å’Œä¸€ä¸ªæ­£æ•´æ•° `k`ï¼Œè¯·ä½ ç”Ÿæˆæ‰€æœ‰å¤§å°ä¸º `k` çš„å­é›†**ã€‚

è¿˜æ˜¯ä»¥ `nums = [1,2,3]` ä¸ºä¾‹ï¼Œåˆšæ‰è®©ä½ æ±‚æ‰€æœ‰å­é›†ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ”¶é›†èµ·æ¥ï¼›**ç°åœ¨ä½ åªéœ€è¦æŠŠç¬¬ 2 å±‚ï¼ˆæ ¹èŠ‚ç‚¹è§†ä¸ºç¬¬ 0 å±‚ï¼‰çš„èŠ‚ç‚¹æ”¶é›†èµ·æ¥ï¼Œå°±æ˜¯å¤§å°ä¸º 2 çš„æ‰€æœ‰ç»„åˆ**ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/6.jpeg)

åæ˜ åˆ°ä»£ç ä¸Šï¼Œåªéœ€è¦ç¨æ”¹ base caseï¼Œæ§åˆ¶ç®—æ³•ä»…ä»…æ”¶é›†ç¬¬ `k` å±‚èŠ‚ç‚¹çš„å€¼å³å¯ï¼š

```java
List<List<Integer>> res = new LinkedList<>();
// è®°å½•å›æº¯ç®—æ³•çš„é€’å½’è·¯å¾„
LinkedList<Integer> track = new LinkedList<>();

// ä¸»å‡½æ•°
public List<List<Integer>> combine(int n, int k) {
    backtrack(1, n, k);
    return res;
}

void backtrack(int start, int n, int k) {
    // base case
    if (k == track.size()) {
        // éå†åˆ°äº†ç¬¬ k å±‚ï¼Œæ”¶é›†å½“å‰èŠ‚ç‚¹çš„å€¼
        res.add(new LinkedList<>(track));
        return;
    }
    
    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = start; i <= n; i++) {
        // é€‰æ‹©
        track.addLast(i);
        // é€šè¿‡ start å‚æ•°æ§åˆ¶æ ‘æçš„éå†ï¼Œé¿å…äº§ç”Ÿé‡å¤çš„å­é›†
        backtrack(i + 1, n, k);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
    }
}
```

è¿™æ ·ï¼Œæ ‡å‡†çš„å­é›†é—®é¢˜ä¹Ÿè§£å†³äº†ã€‚

### æ’åˆ—ï¼ˆå…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼‰

æ’åˆ—é—®é¢˜åœ¨å‰æ–‡ [å›æº¯ç®—æ³•æ ¸å¿ƒæ¡†æ¶](https://labuladong.github.io/article/fname.html?fname=å›æº¯ç®—æ³•è¯¦è§£ä¿®è®¢ç‰ˆ) è®²è¿‡ï¼Œè¿™é‡Œå°±ç®€å•è¿‡ä¸€ä¸‹ã€‚

åŠ›æ‰£ç¬¬ 46 é¢˜ã€Œå…¨æ’åˆ—ã€å°±æ˜¯æ ‡å‡†çš„æ’åˆ—é—®é¢˜ï¼š

ç»™å®šä¸€ä¸ª**ä¸å«é‡å¤æ•°å­—**çš„æ•°ç»„ `nums`ï¼Œè¿”å›å…¶æ‰€æœ‰å¯èƒ½çš„**å…¨æ’åˆ—**ã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```java
List<List<Integer>> permute(int[] nums)
```

æ¯”å¦‚è¾“å…¥ `nums = [1,2,3]`ï¼Œå‡½æ•°çš„è¿”å›å€¼åº”è¯¥æ˜¯ï¼š

```java
[
    [1,2,3],[1,3,2],
    [2,1,3],[2,3,1],
    [3,1,2],[3,2,1]
]
```

åˆšæ‰è®²çš„ç»„åˆ/å­é›†é—®é¢˜ä½¿ç”¨ `start` å˜é‡ä¿è¯å…ƒç´  `nums[start]` ä¹‹ååªä¼šå‡ºç° `nums[start+1..]` ä¸­çš„å…ƒç´ ï¼Œé€šè¿‡å›ºå®šå…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¿è¯ä¸å‡ºç°é‡å¤çš„å­é›†ã€‚

**ä½†æ’åˆ—é—®é¢˜æœ¬èº«å°±æ˜¯è®©ä½ ç©·ä¸¾å…ƒç´ çš„ä½ç½®ï¼Œ`nums[i]` ä¹‹åä¹Ÿå¯ä»¥å‡ºç° `nums[i]` å·¦è¾¹çš„å…ƒç´ ï¼Œæ‰€ä»¥ä¹‹å‰çš„é‚£ä¸€å¥—ç©ä¸è½¬äº†ï¼Œéœ€è¦é¢å¤–ä½¿ç”¨ `used` æ•°ç»„æ¥æ ‡è®°å“ªäº›å…ƒç´ è¿˜å¯ä»¥è¢«é€‰æ‹©**ã€‚

æ ‡å‡†å…¨æ’åˆ—å¯ä»¥æŠ½è±¡æˆå¦‚ä¸‹è¿™æ£µå¤šå‰æ ‘ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/7.jpeg)

æˆ‘ä»¬ç”¨ `used` æ•°ç»„æ ‡è®°å·²ç»åœ¨è·¯å¾„ä¸Šçš„å…ƒç´ é¿å…é‡å¤é€‰æ‹©ï¼Œç„¶åæ”¶é›†æ‰€æœ‰å¶å­èŠ‚ç‚¹ä¸Šçš„å€¼ï¼Œå°±æ˜¯æ‰€æœ‰å…¨æ’åˆ—çš„ç»“æœï¼š

```java
List<List<Integer>> res = new LinkedList<>();
// è®°å½•å›æº¯ç®—æ³•çš„é€’å½’è·¯å¾„
LinkedList<Integer> track = new LinkedList<>();
// track ä¸­çš„å…ƒç´ ä¼šè¢«æ ‡è®°ä¸º true
boolean[] used;

/* ä¸»å‡½æ•°ï¼Œè¾“å…¥ä¸€ç»„ä¸é‡å¤çš„æ•°å­—ï¼Œè¿”å›å®ƒä»¬çš„å…¨æ’åˆ— */
public List<List<Integer>> permute(int[] nums) {
    used = new boolean[nums.length];
    backtrack(nums);
    return res;
}

// å›æº¯ç®—æ³•æ ¸å¿ƒå‡½æ•°
void backtrack(int[] nums) {
    // base caseï¼Œåˆ°è¾¾å¶å­èŠ‚ç‚¹
    if (track.size() == nums.length) {
        // æ”¶é›†å¶å­èŠ‚ç‚¹ä¸Šçš„å€¼
        res.add(new LinkedList(track));
        return;
    }

    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = 0; i < nums.length; i++) {
        // å·²ç»å­˜åœ¨ track ä¸­çš„å…ƒç´ ï¼Œä¸èƒ½é‡å¤é€‰æ‹©
        if (used[i]) {
            continue;
        }
        // åšé€‰æ‹©
        used[i] = true;
        track.addLast(nums[i]);
        // è¿›å…¥ä¸‹ä¸€å±‚å›æº¯æ ‘
        backtrack(nums);
        // å–æ¶ˆé€‰æ‹©
        track.removeLast();
        used[i] = false;
    }
}
```

è¿™æ ·ï¼Œå…¨æ’åˆ—é—®é¢˜å°±è§£å†³äº†ã€‚

ä½†å¦‚æœé¢˜ç›®ä¸è®©ä½ ç®—å…¨æ’åˆ—ï¼Œè€Œæ˜¯è®©ä½ ç®—å…ƒç´ ä¸ªæ•°ä¸º `k` çš„æ’åˆ—ï¼Œæ€ä¹ˆç®—ï¼Ÿ

ä¹Ÿå¾ˆç®€å•ï¼Œæ”¹ä¸‹ `backtrack` å‡½æ•°çš„ base caseï¼Œä»…æ”¶é›†ç¬¬ `k` å±‚çš„èŠ‚ç‚¹å€¼å³å¯ï¼š

```java
// å›æº¯ç®—æ³•æ ¸å¿ƒå‡½æ•°
void backtrack(int[] nums, int k) {
    // base caseï¼Œåˆ°è¾¾ç¬¬ k å±‚ï¼Œæ”¶é›†èŠ‚ç‚¹çš„å€¼
    if (track.size() == k) {
        // ç¬¬ k å±‚èŠ‚ç‚¹çš„å€¼å°±æ˜¯å¤§å°ä¸º k çš„æ’åˆ—
        res.add(new LinkedList(track));
        return;
    }

    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = 0; i < nums.length; i++) {
        // ...
        backtrack(nums, k);
        // ...
    }
}
```

### å­é›†/ç»„åˆï¼ˆå…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼‰

åˆšæ‰è®²çš„æ ‡å‡†å­é›†é—®é¢˜è¾“å…¥çš„ `nums` æ˜¯æ²¡æœ‰é‡å¤å…ƒç´ çš„ï¼Œä½†å¦‚æœå­˜åœ¨é‡å¤å…ƒç´ ï¼Œæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ

åŠ›æ‰£ç¬¬ 90 é¢˜ã€Œå­é›† IIã€å°±æ˜¯è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```java
List<List<Integer>> subsetsWithDup(int[] nums)
```

æ¯”å¦‚è¾“å…¥ `nums = [1,2,2]`ï¼Œä½ åº”è¯¥è¾“å‡ºï¼š

```java
[ [],[1],[2],[1,2],[2,2],[1,2,2] ]
```

å½“ç„¶ï¼ŒæŒ‰é“ç†è¯´ã€Œé›†åˆã€ä¸åº”è¯¥åŒ…å«é‡å¤å…ƒç´ çš„ï¼Œä½†æ—¢ç„¶é¢˜ç›®è¿™æ ·é—®äº†ï¼Œæˆ‘ä»¬å°±å¿½ç•¥è¿™ä¸ªç»†èŠ‚å§ï¼Œä»”ç»†æ€è€ƒä¸€ä¸‹è¿™é“é¢˜æ€ä¹ˆåšæ‰æ˜¯æ­£äº‹ã€‚

å°±ä»¥ `nums = [1,2,2]` ä¸ºä¾‹ï¼Œä¸ºäº†åŒºåˆ«ä¸¤ä¸ª `2` æ˜¯ä¸åŒå…ƒç´ ï¼Œåé¢æˆ‘ä»¬å†™ä½œ `nums = [1,2,2']`ã€‚

æŒ‰ç…§ä¹‹å‰çš„æ€è·¯ç”»å‡ºå­é›†çš„æ ‘å½¢ç»“æ„ï¼Œæ˜¾ç„¶ï¼Œä¸¤æ¡å€¼ç›¸åŒçš„ç›¸é‚»æ ‘æä¼šäº§ç”Ÿé‡å¤ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/8.jpeg)

```
[ 
    [],
    [1],[2],[2'],
    [1,2],[1,2'],[2,2'],
    [1,2,2']
]
```

æ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›è¡Œå‰ªæï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰å¤šæ¡å€¼ç›¸åŒçš„æ ‘æç›¸é‚»ï¼Œåˆ™åªéå†ç¬¬ä¸€æ¡ï¼Œå‰©ä¸‹çš„éƒ½å‰ªæ‰ï¼Œä¸è¦å»éå†ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/9.jpeg)

**ä½“ç°åœ¨ä»£ç ä¸Šï¼Œéœ€è¦å…ˆè¿›è¡Œæ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·ï¼Œå¦‚æœå‘ç° `nums[i] == nums[i-1]`ï¼Œåˆ™è·³è¿‡**ï¼š

```java
List<List<Integer>> res = new LinkedList<>();
LinkedList<Integer> track = new LinkedList<>();

public List<List<Integer>> subsetsWithDup(int[] nums) {
    // å…ˆæ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·
    Arrays.sort(nums);
    backtrack(nums, 0);
    return res;
}

void backtrack(int[] nums, int start) {
    // å‰åºä½ç½®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå­é›†
    res.add(new LinkedList<>(track));
    
    for (int i = start; i < nums.length; i++) {
        // å‰ªæé€»è¾‘ï¼Œå€¼ç›¸åŒçš„ç›¸é‚»æ ‘æï¼Œåªéå†ç¬¬ä¸€æ¡
        if (i > start && nums[i] == nums[i - 1]) {
            continue;
        }
        track.addLast(nums[i]);
        backtrack(nums, i + 1);
        track.removeLast();
    }
}
```

è¿™æ®µä»£ç å’Œä¹‹å‰æ ‡å‡†çš„å­é›†é—®é¢˜çš„ä»£ç å‡ ä¹ç›¸åŒï¼Œå°±æ˜¯æ·»åŠ äº†æ’åºå’Œå‰ªæçš„é€»è¾‘ã€‚

è‡³äºä¸ºä»€ä¹ˆè¦è¿™æ ·å‰ªæï¼Œç»“åˆå‰é¢çš„å›¾åº”è¯¥ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œè¿™æ ·å¸¦é‡å¤å…ƒç´ çš„å­é›†é—®é¢˜ä¹Ÿè§£å†³äº†ã€‚

**æˆ‘ä»¬è¯´äº†ç»„åˆé—®é¢˜å’Œå­é›†é—®é¢˜æ˜¯ç­‰ä»·çš„**ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥çœ‹ä¸€é“ç»„åˆçš„é¢˜ç›®å§ï¼Œè¿™æ˜¯åŠ›æ‰£ç¬¬ 40 é¢˜ã€Œç»„åˆæ€»å’Œ IIã€ï¼š

ç»™ä½ è¾“å…¥ `candidates` å’Œä¸€ä¸ªç›®æ ‡å’Œ `target`ï¼Œä» `candidates` ä¸­æ‰¾å‡ºä¸­æ‰€æœ‰å’Œä¸º `target` çš„ç»„åˆã€‚

`candidates` å¯èƒ½å­˜åœ¨é‡å¤å…ƒç´ ï¼Œä¸”å…¶ä¸­çš„æ¯ä¸ªæ•°å­—æœ€å¤šåªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

è¯´è¿™æ˜¯ä¸€ä¸ªç»„åˆé—®é¢˜ï¼Œå…¶å®æ¢ä¸ªé—®æ³•å°±å˜æˆå­é›†é—®é¢˜äº†ï¼šè¯·ä½ è®¡ç®— `candidates` ä¸­æ‰€æœ‰å’Œä¸º `target` çš„å­é›†ã€‚

æ‰€ä»¥è¿™é¢˜æ€ä¹ˆåšå‘¢ï¼Ÿ

å¯¹æ¯”å­é›†é—®é¢˜çš„è§£æ³•ï¼Œåªè¦é¢å¤–ç”¨ä¸€ä¸ª `trackSum` å˜é‡è®°å½•å›æº¯è·¯å¾„ä¸Šçš„å…ƒç´ å’Œï¼Œç„¶åå°† base case æ”¹ä¸€æ”¹å³å¯è§£å†³è¿™é“é¢˜ï¼š

```java
List<List<Integer>> res = new LinkedList<>();
// è®°å½•å›æº¯çš„è·¯å¾„
LinkedList<Integer> track = new LinkedList<>();
// è®°å½• track ä¸­çš„å…ƒç´ ä¹‹å’Œ
int trackSum = 0;

public List<List<Integer>> combinationSum2(int[] candidates, int target) {
    if (candidates.length == 0) {
        return res;
    }
    // å…ˆæ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·
    Arrays.sort(candidates);
    backtrack(candidates, 0, target);
    return res;
}

// å›æº¯ç®—æ³•ä¸»å‡½æ•°
void backtrack(int[] nums, int start, int target) {
    // base caseï¼Œè¾¾åˆ°ç›®æ ‡å’Œï¼Œæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç»„åˆ
    if (trackSum == target) {
        res.add(new LinkedList<>(track));
        return;
    }
    // base caseï¼Œè¶…è¿‡ç›®æ ‡å’Œï¼Œç›´æ¥ç»“æŸ
    if (trackSum > target) {
        return;
    }

    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = start; i < nums.length; i++) {
        // å‰ªæé€»è¾‘ï¼Œå€¼ç›¸åŒçš„æ ‘æï¼Œåªéå†ç¬¬ä¸€æ¡
        if (i > start && nums[i] == nums[i - 1]) {
            continue;
        }
        // åšé€‰æ‹©
        track.add(nums[i]);
        trackSum += nums[i];
        // é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘
        backtrack(nums, i + 1, target);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
        trackSum -= nums[i];
    }
}
```

### æ’åˆ—ï¼ˆå…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼‰

æ’åˆ—é—®é¢˜çš„è¾“å…¥å¦‚æœå­˜åœ¨é‡å¤ï¼Œæ¯”å­é›†/ç»„åˆé—®é¢˜ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæˆ‘ä»¬çœ‹çœ‹åŠ›æ‰£ç¬¬ 47 é¢˜ã€Œå…¨æ’åˆ— IIã€ï¼š

ç»™ä½ è¾“å…¥ä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— `nums`ï¼Œè¯·ä½ å†™ä¸€ä¸ªç®—æ³•ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—ï¼Œå‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```java
List<List<Integer>> permuteUnique(int[] nums)
```

æ¯”å¦‚è¾“å…¥ `nums = [1,2,2]`ï¼Œå‡½æ•°è¿”å›ï¼š

```java
[ [1,2,2],[2,1,2],[2,2,1] ]
```

å…ˆçœ‹è§£æ³•ä»£ç ï¼š

```java
List<List<Integer>> res = new LinkedList<>();
LinkedList<Integer> track = new LinkedList<>();
boolean[] used;

public List<List<Integer>> permuteUnique(int[] nums) {
    // å…ˆæ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·
    Arrays.sort(nums);
    used = new boolean[nums.length];
    backtrack(nums);
    return res;
}

void backtrack(int[] nums) {
    if (track.size() == nums.length) {
        res.add(new LinkedList(track));
        return;
    }

    for (int i = 0; i < nums.length; i++) {
        if (used[i]) {
            continue;
        }
        // æ–°æ·»åŠ çš„å‰ªæé€»è¾‘ï¼Œå›ºå®šç›¸åŒçš„å…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®
        if (i > 0 && nums[i] == nums[i - 1] && !used[i - 1]) {
            continue;
        }
        track.add(nums[i]);
        used[i] = true;
        backtrack(nums);
        track.removeLast();
        used[i] = false;
    }
}
```

ä½ å¯¹æ¯”ä¸€ä¸‹ä¹‹å‰çš„æ ‡å‡†å…¨æ’åˆ—è§£æ³•ä»£ç ï¼Œè¿™æ®µè§£æ³•ä»£ç åªæœ‰ä¸¤å¤„ä¸åŒï¼š

1ã€å¯¹ `nums` è¿›è¡Œäº†æ’åºã€‚

2ã€æ·»åŠ äº†ä¸€å¥é¢å¤–çš„å‰ªæé€»è¾‘ã€‚

ç±»æ¯”è¾“å…¥åŒ…å«é‡å¤å…ƒç´ çš„å­é›†/ç»„åˆé—®é¢˜ï¼Œä½ å¤§æ¦‚åº”è¯¥ç†è§£è¿™ä¹ˆåšæ˜¯ä¸ºäº†é˜²æ­¢å‡ºç°é‡å¤ç»“æœã€‚

ä½†æ˜¯æ³¨æ„æ’åˆ—é—®é¢˜çš„å‰ªæé€»è¾‘ï¼Œå’Œå­é›†/ç»„åˆé—®é¢˜çš„å‰ªæé€»è¾‘ç•¥æœ‰ä¸åŒï¼šæ–°å¢äº† `!used[i - 1]` çš„é€»è¾‘åˆ¤æ–­ã€‚

è¿™ä¸ªåœ°æ–¹ç†è§£èµ·æ¥å°±éœ€è¦ä¸€äº›æŠ€å·§æ€§äº†ï¼Œä¸”å¬æˆ‘æ…¢æ…¢åˆ°æ¥ã€‚ä¸ºäº†æ–¹ä¾¿ç ”ç©¶ï¼Œä¾ç„¶æŠŠç›¸åŒçš„å…ƒç´ ç”¨ä¸Šæ ‡ `'` ä»¥ç¤ºåŒºåˆ«ã€‚

å‡è®¾è¾“å…¥ä¸º `nums = [1,2,2']`ï¼Œæ ‡å‡†çš„å…¨æ’åˆ—ç®—æ³•ä¼šå¾—å‡ºå¦‚ä¸‹ç­”æ¡ˆï¼š

```
[
    [1,2,2'],[1,2',2],
    [2,1,2'],[2,2',1],
    [2',1,2],[2',2,1]
]
```

æ˜¾ç„¶ï¼Œè¿™ä¸ªç»“æœå­˜åœ¨é‡å¤ï¼Œæ¯”å¦‚ `[1,2,2']` å’Œ `[1,2',2]` åº”è¯¥åªè¢«ç®—ä½œåŒä¸€ä¸ªæ’åˆ—ï¼Œä½†è¢«ç®—ä½œäº†ä¸¤ä¸ªä¸åŒçš„æ’åˆ—ã€‚

æ‰€ä»¥ç°åœ¨çš„å…³é”®åœ¨äºï¼Œå¦‚ä½•è®¾è®¡å‰ªæé€»è¾‘ï¼ŒæŠŠè¿™ç§é‡å¤å»é™¤æ‰ï¼Ÿ

**ç­”æ¡ˆæ˜¯ï¼Œä¿è¯ç›¸åŒå…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜**ã€‚

æ¯”å¦‚è¯´ `nums = [1,2,2']` è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä¿æŒæ’åˆ—ä¸­ `2` ä¸€ç›´åœ¨ `2'` å‰é¢ã€‚

è¿™æ ·çš„è¯ï¼Œä½ ä»ä¸Šé¢ 6 ä¸ªæ’åˆ—ä¸­åªèƒ½æŒ‘å‡º 3 ä¸ªæ’åˆ—ç¬¦åˆè¿™ä¸ªæ¡ä»¶ï¼š

```
[ [1,2,2'],[2,1,2'],[2,2',1] ]
```

è¿™ä¹Ÿå°±æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚

è¿›ä¸€æ­¥ï¼Œå¦‚æœ `nums = [1,2,2',2'']`ï¼Œæˆ‘åªè¦ä¿è¯é‡å¤å…ƒç´  `2` çš„ç›¸å¯¹ä½ç½®å›ºå®šï¼Œæ¯”å¦‚è¯´ `2 -> 2' -> 2''`ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°æ— é‡å¤çš„å…¨æ’åˆ—ç»“æœã€‚

ä»”ç»†æ€è€ƒï¼Œåº”è¯¥å¾ˆå®¹æ˜“æ˜ç™½å…¶ä¸­çš„åŸç†ï¼š

**æ ‡å‡†å…¨æ’åˆ—ç®—æ³•ä¹‹æ‰€ä»¥å‡ºç°é‡å¤ï¼Œæ˜¯å› ä¸ºæŠŠç›¸åŒå…ƒç´ å½¢æˆçš„æ’åˆ—åºåˆ—è§†ä¸ºä¸åŒçš„åºåˆ—ï¼Œä½†å®é™…ä¸Šå®ƒä»¬åº”è¯¥æ˜¯ç›¸åŒçš„ï¼›è€Œå¦‚æœå›ºå®šç›¸åŒå…ƒç´ å½¢æˆçš„åºåˆ—é¡ºåºï¼Œå½“ç„¶å°±é¿å…äº†é‡å¤**ã€‚

é‚£ä¹ˆåæ˜ åˆ°ä»£ç ä¸Šï¼Œä½ æ³¨æ„çœ‹è¿™ä¸ªå‰ªæé€»è¾‘ï¼š

```java
// æ–°æ·»åŠ çš„å‰ªæé€»è¾‘ï¼Œå›ºå®šç›¸åŒçš„å…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®
if (i > 0 && nums[i] == nums[i - 1] && !used[i - 1]) {
    // å¦‚æœå‰é¢çš„ç›¸é‚»ç›¸ç­‰å…ƒç´ æ²¡æœ‰ç”¨è¿‡ï¼Œåˆ™è·³è¿‡
    continue;
}
// é€‰æ‹© nums[i]
```

**å½“å‡ºç°é‡å¤å…ƒç´ æ—¶ï¼Œæ¯”å¦‚è¾“å…¥ `nums = [1,2,2',2'']`ï¼Œ`2'` åªæœ‰åœ¨ `2` å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼ŒåŒç†ï¼Œ`2''` åªæœ‰åœ¨ `2'` å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼Œè¿™å°±ä¿è¯äº†ç›¸åŒå…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®ä¿è¯å›ºå®š**ã€‚

è¿™é‡Œæ‹“å±•ä¸€ä¸‹ï¼Œå¦‚æœä½ æŠŠä¸Šè¿°å‰ªæé€»è¾‘ä¸­çš„ `!used[i - 1]` æ”¹æˆ `used[i - 1]`ï¼Œå…¶å®ä¹Ÿå¯ä»¥é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œä½†æ•ˆç‡ä¼šæœ‰æ‰€ä¸‹é™ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

ä¹‹æ‰€ä»¥è¿™æ ·ä¿®æ”¹ä¸ä¼šäº§ç”Ÿé”™è¯¯ï¼Œæ˜¯å› ä¸ºè¿™ç§å†™æ³•ç›¸å½“äºç»´æŠ¤äº† `2'' -> 2' -> 2` çš„ç›¸å¯¹é¡ºåºï¼Œæœ€ç»ˆä¹Ÿå¯ä»¥å®ç°å»é‡çš„æ•ˆæœã€‚

ä½†ä¸ºä»€ä¹ˆè¿™æ ·å†™æ•ˆç‡ä¼šä¸‹é™å‘¢ï¼Ÿå› ä¸ºè¿™ä¸ªå†™æ³•å‰ªæ‰çš„æ ‘æä¸å¤Ÿå¤šã€‚

æ¯”å¦‚è¾“å…¥ `nums = [2,2',2'']`ï¼Œäº§ç”Ÿçš„å›æº¯æ ‘å¦‚ä¸‹ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/12.jpeg)

å¦‚æœç”¨ç»¿è‰²æ ‘æä»£è¡¨ `backtrack` å‡½æ•°éå†è¿‡çš„è·¯å¾„ï¼Œçº¢è‰²æ ‘æä»£è¡¨å‰ªæé€»è¾‘çš„è§¦å‘ï¼Œé‚£ä¹ˆ `!used[i - 1]` è¿™ç§å‰ªæé€»è¾‘å¾—åˆ°çš„å›æº¯æ ‘é•¿è¿™æ ·ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/13.jpeg)

è€Œ `used[i - 1]` è¿™ç§å‰ªæé€»è¾‘å¾—åˆ°çš„å›æº¯æ ‘å¦‚ä¸‹ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/14.jpeg)

å¯ä»¥çœ‹åˆ°ï¼Œ`!used[i - 1]` è¿™ç§å‰ªæé€»è¾‘å‰ªå¾—å¹²å‡€åˆ©è½ï¼Œè€Œ `used[i - 1]` è¿™ç§å‰ªæé€»è¾‘è™½ç„¶ä¹Ÿèƒ½å¾—åˆ°æ— é‡ç»“æœï¼Œä½†å®ƒå‰ªæ‰çš„æ ‘æè¾ƒå°‘ï¼Œå­˜åœ¨çš„æ— æ•ˆè®¡ç®—è¾ƒå¤šï¼Œæ‰€ä»¥æ•ˆç‡ä¼šå·®ä¸€äº›ã€‚

å½“ç„¶ï¼Œå…³äºæ’åˆ—å»é‡ï¼Œä¹Ÿæœ‰è¯»è€…æå‡ºåˆ«çš„å‰ªææ€è·¯ï¼š

```java
void backtrack(int[] nums, LinkedList<Integer> track) {
    if (track.size() == nums.length) {
        res.add(new LinkedList(track));
        return;
    }

    // è®°å½•ä¹‹å‰æ ‘æä¸Šå…ƒç´ çš„å€¼
    // é¢˜ç›®è¯´ -10 <= nums[i] <= 10ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¸ºç‰¹æ®Šå€¼
    int prevNum = -666;
    for (int i = 0; i < nums.length; i++) {
        // æ’é™¤ä¸åˆæ³•çš„é€‰æ‹©
        if (used[i]) {
            continue;
        }
        if (nums[i] == prevNum) {
            continue;
        }

        track.add(nums[i]);
        used[i] = true;
        // è®°å½•è¿™æ¡æ ‘æä¸Šçš„å€¼
        prevNum = nums[i];

        backtrack(nums, track);

        track.removeLast();
        used[i] = false;
    }
}
```

è¿™ä¸ªæ€è·¯ä¹Ÿæ˜¯å¯¹çš„ï¼Œè®¾æƒ³ä¸€ä¸ªèŠ‚ç‚¹å‡ºç°äº†ç›¸åŒçš„æ ‘æï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/11.jpeg)

å¦‚æœä¸ä½œå¤„ç†ï¼Œè¿™äº›ç›¸åŒæ ‘æä¸‹é¢çš„å­æ ‘ä¹Ÿä¼šé•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥ä¼šå‡ºç°é‡å¤çš„æ’åˆ—ã€‚

å› ä¸ºæ’åºä¹‹åæ‰€æœ‰ç›¸ç­‰çš„å…ƒç´ éƒ½æŒ¨åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥åªè¦ç”¨ `prevNum` è®°å½•å‰ä¸€æ¡æ ‘æçš„å€¼ï¼Œå°±å¯ä»¥é¿å…éå†å€¼ç›¸åŒçš„æ ‘æï¼Œä»è€Œé¿å…äº§ç”Ÿç›¸åŒçš„å­æ ‘ï¼Œæœ€ç»ˆé¿å…å‡ºç°é‡å¤çš„æ’åˆ—ã€‚

å¥½äº†ï¼Œè¿™æ ·åŒ…å«é‡å¤è¾“å…¥çš„æ’åˆ—é—®é¢˜ä¹Ÿè§£å†³äº†ã€‚

### å­é›†/ç»„åˆï¼ˆå…ƒç´ æ— é‡å¯å¤é€‰ï¼‰

ç»ˆäºåˆ°äº†æœ€åä¸€ç§ç±»å‹äº†ï¼šè¾“å…¥æ•°ç»„æ— é‡å¤å…ƒç´ ï¼Œä½†æ¯ä¸ªå…ƒç´ å¯ä»¥è¢«æ— é™æ¬¡ä½¿ç”¨ã€‚

ç›´æ¥çœ‹åŠ›æ‰£ç¬¬ 39 é¢˜ã€Œç»„åˆæ€»å’Œã€ï¼š

ç»™ä½ ä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„ `candidates` å’Œä¸€ä¸ªç›®æ ‡å’Œ `target`ï¼Œæ‰¾å‡º `candidates` ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° `target` çš„æ‰€æœ‰ç»„åˆã€‚`candidates` ä¸­çš„æ¯ä¸ªæ•°å­—å¯ä»¥æ— é™åˆ¶é‡å¤è¢«é€‰å–ã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```java
List<List<Integer>> combinationSum(int[] candidates, int target)
```

æ¯”å¦‚è¾“å…¥ `candidates = [1,2,3], target = 3`ï¼Œç®—æ³•åº”è¯¥è¿”å›ï¼š

```
[ [1,1,1],[1,2],[3] ]
```

è¿™é“é¢˜è¯´æ˜¯ç»„åˆé—®é¢˜ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯å­é›†é—®é¢˜ï¼š`candidates` çš„å“ªäº›å­é›†çš„å’Œä¸º `target`ï¼Ÿ

æƒ³è§£å†³è¿™ç§ç±»å‹çš„é—®é¢˜ï¼Œä¹Ÿå¾—å›åˆ°å›æº¯æ ‘ä¸Šï¼Œ**æˆ‘ä»¬ä¸å¦¨å…ˆæ€è€ƒæ€è€ƒï¼Œæ ‡å‡†çš„å­é›†/ç»„åˆé—®é¢˜æ˜¯å¦‚ä½•ä¿è¯ä¸é‡å¤ä½¿ç”¨å…ƒç´ çš„**ï¼Ÿ

ç­”æ¡ˆåœ¨äº `backtrack` é€’å½’æ—¶è¾“å…¥çš„å‚æ•° `start`ï¼š

```java
// æ— é‡ç»„åˆçš„å›æº¯ç®—æ³•æ¡†æ¶
void backtrack(int[] nums, int start) {
    for (int i = start; i < nums.length; i++) {
        // ...
        // é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘ï¼Œæ³¨æ„å‚æ•°
        backtrack(nums, i + 1);
        // ...
    }
}
```

è¿™ä¸ª `i` ä» `start` å¼€å§‹ï¼Œé‚£ä¹ˆä¸‹ä¸€å±‚å›æº¯æ ‘å°±æ˜¯ä» `start + 1` å¼€å§‹ï¼Œä»è€Œä¿è¯ `nums[start]` è¿™ä¸ªå…ƒç´ ä¸ä¼šè¢«é‡å¤ä½¿ç”¨ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/1.jpeg)

é‚£ä¹ˆåè¿‡æ¥ï¼Œå¦‚æœæˆ‘æƒ³è®©æ¯ä¸ªå…ƒç´ è¢«é‡å¤ä½¿ç”¨ï¼Œæˆ‘åªè¦æŠŠ `i + 1` æ”¹æˆ `i` å³å¯ï¼š

```java
// å¯é‡ç»„åˆçš„å›æº¯ç®—æ³•æ¡†æ¶
void backtrack(int[] nums, int start) {
    for (int i = start; i < nums.length; i++) {
        // ...
        // é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘ï¼Œæ³¨æ„å‚æ•°
        backtrack(nums, i);
        // ...
    }
}
```

è¿™ç›¸å½“äºç»™ä¹‹å‰çš„å›æº¯æ ‘æ·»åŠ äº†ä¸€æ¡æ ‘æï¼Œåœ¨éå†è¿™æ£µæ ‘çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå…ƒç´ å¯ä»¥è¢«æ— é™æ¬¡ä½¿ç”¨ï¼š

![](https://labuladong.github.io/algo/images/æ’åˆ—ç»„åˆ/10.jpeg)

å½“ç„¶ï¼Œè¿™æ ·è¿™æ£µå›æº¯æ ‘ä¼šæ°¸è¿œç”Ÿé•¿ä¸‹å»ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„é€’å½’å‡½æ•°éœ€è¦è®¾ç½®åˆé€‚çš„ base case ä»¥ç»“æŸç®—æ³•ï¼Œå³è·¯å¾„å’Œå¤§äº `target` æ—¶å°±æ²¡å¿…è¦å†éå†ä¸‹å»äº†ã€‚

è¿™é“é¢˜çš„è§£æ³•ä»£ç å¦‚ä¸‹ï¼š

```java
List<List<Integer>> res = new LinkedList<>();
// è®°å½•å›æº¯çš„è·¯å¾„
LinkedList<Integer> track = new LinkedList<>();
// è®°å½• track ä¸­çš„è·¯å¾„å’Œ
int trackSum = 0;

public List<List<Integer>> combinationSum(int[] candidates, int target) {
    if (candidates.length == 0) {
        return res;
    }
    backtrack(candidates, 0, target);
    return res;
}

// å›æº¯ç®—æ³•ä¸»å‡½æ•°
void backtrack(int[] nums, int start, int target) {
    // base caseï¼Œæ‰¾åˆ°ç›®æ ‡å’Œï¼Œè®°å½•ç»“æœ
    if (trackSum == target) {
        res.add(new LinkedList<>(track));
        return;
    }
    // base caseï¼Œè¶…è¿‡ç›®æ ‡å’Œï¼Œåœæ­¢å‘ä¸‹éå†
    if (trackSum > target) {
        return;
    }

    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = start; i < nums.length; i++) {
        // é€‰æ‹© nums[i]
        trackSum += nums[i];
        track.add(nums[i]);
        // é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘
        // åŒä¸€å…ƒç´ å¯é‡å¤ä½¿ç”¨ï¼Œæ³¨æ„å‚æ•°
        backtrack(nums, i, target);
        // æ’¤é”€é€‰æ‹© nums[i]
        trackSum -= nums[i];
        track.removeLast();
    }
}
```

### æ’åˆ—ï¼ˆå…ƒç´ æ— é‡å¯å¤é€‰ï¼‰

åŠ›æ‰£ä¸Šæ²¡æœ‰ç±»ä¼¼çš„é¢˜ç›®ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆæƒ³ä¸€ä¸‹ï¼Œ`nums` æ•°ç»„ä¸­çš„å…ƒç´ æ— é‡å¤ä¸”å¯å¤é€‰çš„æƒ…å†µä¸‹ï¼Œä¼šæœ‰å“ªäº›æ’åˆ—ï¼Ÿ

æ¯”å¦‚è¾“å…¥ `nums = [1,2,3]`ï¼Œé‚£ä¹ˆè¿™ç§æ¡ä»¶ä¸‹çš„å…¨æ’åˆ—å…±æœ‰ 3^3 = 27 ç§ï¼š

```java
[
  [1,1,1],[1,1,2],[1,1,3],[1,2,1],[1,2,2],[1,2,3],[1,3,1],[1,3,2],[1,3,3],
  [2,1,1],[2,1,2],[2,1,3],[2,2,1],[2,2,2],[2,2,3],[2,3,1],[2,3,2],[2,3,3],
  [3,1,1],[3,1,2],[3,1,3],[3,2,1],[3,2,2],[3,2,3],[3,3,1],[3,3,2],[3,3,3]
]
```

**æ ‡å‡†çš„å…¨æ’åˆ—ç®—æ³•åˆ©ç”¨ `used` æ•°ç»„è¿›è¡Œå‰ªæï¼Œé¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœå…è®¸é‡å¤ä½¿ç”¨å…ƒç´ çš„è¯ï¼Œç›´æ¥æ”¾é£è‡ªæˆ‘ï¼Œå»é™¤æ‰€æœ‰ `used` æ•°ç»„çš„å‰ªæé€»è¾‘å°±è¡Œäº†**ã€‚

é‚£è¿™ä¸ªé—®é¢˜å°±ç®€å•äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
List<List<Integer>> res = new LinkedList<>();
LinkedList<Integer> track = new LinkedList<>();

public List<List<Integer>> permuteRepeat(int[] nums) {
    backtrack(nums);
    return res;
}

// å›æº¯ç®—æ³•æ ¸å¿ƒå‡½æ•°
void backtrack(int[] nums) {
    // base caseï¼Œåˆ°è¾¾å¶å­èŠ‚ç‚¹
    if (track.size() == nums.length) {
        // æ”¶é›†å¶å­èŠ‚ç‚¹ä¸Šçš„å€¼
        res.add(new LinkedList(track));
        return;
    }

    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = 0; i < nums.length; i++) {
        // åšé€‰æ‹©
        track.add(nums[i]);
        // è¿›å…¥ä¸‹ä¸€å±‚å›æº¯æ ‘
        backtrack(nums);
        // å–æ¶ˆé€‰æ‹©
        track.removeLast();
    }
}
```

è‡³æ­¤ï¼Œæ’åˆ—/ç»„åˆ/å­é›†é—®é¢˜çš„ä¹ç§å˜åŒ–å°±éƒ½è®²å®Œäº†ã€‚

### æœ€åæ€»ç»“

æ¥å›é¡¾ä¸€ä¸‹æ’åˆ—/ç»„åˆ/å­é›†é—®é¢˜çš„ä¸‰ç§å½¢å¼åœ¨ä»£ç ä¸Šçš„åŒºåˆ«ã€‚

ç”±äºå­é›†é—®é¢˜å’Œç»„åˆé—®é¢˜æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œæ— éå°±æ˜¯ base case æœ‰ä¸€äº›åŒºåˆ«ï¼Œæ‰€ä»¥æŠŠè¿™ä¸¤ä¸ªé—®é¢˜æ”¾åœ¨ä¸€èµ·çœ‹ã€‚

**å½¢å¼ä¸€ã€å…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼Œå³ `nums` ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡**ï¼Œ`backtrack` æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š

```java
/* ç»„åˆ/å­é›†é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶ */
void backtrack(int[] nums, int start) {
    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = start; i < nums.length; i++) {
        // åšé€‰æ‹©
        track.addLast(nums[i]);
        // æ³¨æ„å‚æ•°
        backtrack(nums, i + 1);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
    }
}

/* æ’åˆ—é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶ */
void backtrack(int[] nums) {
    for (int i = 0; i < nums.length; i++) {
        // å‰ªæé€»è¾‘
        if (used[i]) {
            continue;
        }
        // åšé€‰æ‹©
        used[i] = true;
        track.addLast(nums[i]);

        backtrack(nums);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
        used[i] = false;
    }
}
```

**å½¢å¼äºŒã€å…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼Œå³ `nums` ä¸­çš„å…ƒç´ å¯ä»¥å­˜åœ¨é‡å¤ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡**ï¼Œå…¶å…³é”®åœ¨äºæ’åºå’Œå‰ªæï¼Œ`backtrack` æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š

```java
Arrays.sort(nums);
/* ç»„åˆ/å­é›†é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶ */
void backtrack(int[] nums, int start) {
    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = start; i < nums.length; i++) {
        // å‰ªæé€»è¾‘ï¼Œè·³è¿‡å€¼ç›¸åŒçš„ç›¸é‚»æ ‘æ
        if (i > start && nums[i] == nums[i - 1]) {
            continue;
        }
        // åšé€‰æ‹©
        track.addLast(nums[i]);
        // æ³¨æ„å‚æ•°
        backtrack(nums, i + 1);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
    }
}


Arrays.sort(nums);
/* æ’åˆ—é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶ */
void backtrack(int[] nums) {
    for (int i = 0; i < nums.length; i++) {
        // å‰ªæé€»è¾‘
        if (used[i]) {
            continue;
        }
        // å‰ªæé€»è¾‘ï¼Œå›ºå®šç›¸åŒçš„å…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®
        if (i > 0 && nums[i] == nums[i - 1] && !used[i - 1]) {
            continue;
        }
        // åšé€‰æ‹©
        used[i] = true;
        track.addLast(nums[i]);

        backtrack(nums);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
        used[i] = false;
    }
}
```

**å½¢å¼ä¸‰ã€å…ƒç´ æ— é‡å¯å¤é€‰ï¼Œå³ `nums` ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥è¢«ä½¿ç”¨è‹¥å¹²æ¬¡**ï¼Œåªè¦åˆ æ‰å»é‡é€»è¾‘å³å¯ï¼Œ`backtrack` æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š

```java
/* ç»„åˆ/å­é›†é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶ */
void backtrack(int[] nums, int start) {
    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (int i = start; i < nums.length; i++) {
        // åšé€‰æ‹©
        track.addLast(nums[i]);
        // æ³¨æ„å‚æ•°
        backtrack(nums, i);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
    }
}


/* æ’åˆ—é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶ */
void backtrack(int[] nums) {
    for (int i = 0; i < nums.length; i++) {
        // åšé€‰æ‹©
        track.addLast(nums[i]);
        backtrack(nums);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
    }
}
```

åªè¦ä»æ ‘çš„è§’åº¦æ€è€ƒï¼Œè¿™äº›é—®é¢˜çœ‹ä¼¼å¤æ‚å¤šå˜ï¼Œå®åˆ™æ”¹æ”¹ base case å°±èƒ½è§£å†³ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘åœ¨ [å­¦ä¹ ç®—æ³•å’Œæ•°æ®ç»“æ„çš„æ¡†æ¶æ€ç»´](https://labuladong.github.io/article/fname.html?fname=å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çš„é«˜æ•ˆæ–¹æ³•) å’Œ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘ï¼ˆçº²é¢†ç¯‡ï¼‰](https://labuladong.github.io/article/fname.html?fname=äºŒå‰æ ‘æ€»ç»“) ä¸­å¼ºè°ƒæ ‘ç±»å‹é¢˜ç›®é‡è¦æ€§çš„åŸå› ã€‚

å¦‚æœä½ èƒ½å¤Ÿçœ‹åˆ°è¿™é‡Œï¼ŒçœŸå¾—ç»™ä½ é¼“æŒï¼Œç›¸ä¿¡ä½ ä»¥åé‡åˆ°å„ç§ä¹±ä¸ƒå…«ç³Ÿçš„ç®—æ³•é¢˜ï¼Œä¹Ÿèƒ½ä¸€çœ¼çœ‹é€å®ƒä»¬çš„æœ¬è´¨ï¼Œä»¥ä¸å˜åº”ä¸‡å˜ã€‚å¦å¤–ï¼Œè€ƒè™‘åˆ°ç¯‡å¹…ï¼Œæœ¬æ–‡å¹¶æ²¡æœ‰å¯¹è¿™äº›ç®—æ³•è¿›è¡Œå¤æ‚åº¦çš„åˆ†æï¼Œä½ å¯ä»¥ä½¿ç”¨æˆ‘åœ¨ [ç®—æ³•æ—¶ç©ºå¤æ‚åº¦åˆ†æå®ç”¨æŒ‡å—](https://labuladong.github.io/article/fname.html?fname=æ—¶é—´å¤æ‚åº¦) è®²åˆ°çš„å¤æ‚åº¦åˆ†ææ–¹æ³•å°è¯•è‡ªå·±åˆ†æå®ƒä»¬çš„å¤æ‚åº¦ã€‚



<hr>
<details>
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„æ–‡ç« </strong></summary>

 - [ä¸¤ç§æ€è·¯è§£å†³å•è¯æ‹¼æ¥é—®é¢˜](https://labuladong.github.io/article/fname.html?fname=å•è¯æ‹¼æ¥)
 - [åˆ†æ²»ç®—æ³•è¯¦è§£ï¼šè¿ç®—ä¼˜å…ˆçº§](https://labuladong.github.io/article/fname.html?fname=åˆ†æ²»ç®—æ³•)
 - [å›æº¯ç®—æ³•è§£é¢˜å¥—è·¯æ¡†æ¶](https://labuladong.github.io/article/fname.html?fname=å›æº¯ç®—æ³•è¯¦è§£ä¿®è®¢ç‰ˆ)
 - [æˆ‘çš„åˆ·é¢˜å¿ƒå¾—](https://labuladong.github.io/article/fname.html?fname=ç®—æ³•å¿ƒå¾—)
 - [ç®—æ³•æ—¶ç©ºå¤æ‚åº¦åˆ†æå®ç”¨æŒ‡å—](https://labuladong.github.io/article/fname.html?fname=æ—¶é—´å¤æ‚åº¦)

</details><hr>




<hr>
<details>
<summary><strong>å¼•ç”¨æœ¬æ–‡çš„é¢˜ç›®</strong></summary>

<strong>å®‰è£… [æˆ‘çš„ Chrome åˆ·é¢˜æ’ä»¶](https://mp.weixin.qq.com/s/X-fE9sR4BLi6T9pn7xP4pg) ç‚¹å¼€ä¸‹åˆ—é¢˜ç›®å¯ç›´æ¥æŸ¥çœ‹è§£é¢˜æ€è·¯ï¼š</strong>

| LeetCode | åŠ›æ‰£ |
| :----: | :----: |
| [17. Letter Combinations of a Phone Number](https://leetcode.com/problems/letter-combinations-of-a-phone-number/?show=1) | [17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://leetcode.cn/problems/letter-combinations-of-a-phone-number/?show=1) |
| [491. Increasing Subsequences](https://leetcode.com/problems/increasing-subsequences/?show=1) | [491. é€’å¢å­åºåˆ—](https://leetcode.cn/problems/increasing-subsequences/?show=1) |
| - | [å‰‘æŒ‡ Offer 38. å­—ç¬¦ä¸²çš„æ’åˆ—](https://leetcode.cn/problems/zi-fu-chuan-de-pai-lie-lcof/?show=1) |
| - | [å‰‘æŒ‡ Offer II 079. æ‰€æœ‰å­é›†](https://leetcode.cn/problems/TVdhkn/?show=1) |
| - | [å‰‘æŒ‡ Offer II 080. å«æœ‰ k ä¸ªå…ƒç´ çš„ç»„åˆ](https://leetcode.cn/problems/uUsW3B/?show=1) |
| - | [å‰‘æŒ‡ Offer II 081. å…è®¸é‡å¤é€‰æ‹©å…ƒç´ çš„ç»„åˆ](https://leetcode.cn/problems/Ygoe9J/?show=1) |
| - | [å‰‘æŒ‡ Offer II 083. æ²¡æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—](https://leetcode.cn/problems/VvJkup/?show=1) |

</details>



**ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿**

**ã€Šlabuladong çš„ç®—æ³•å°æŠ„ã€‹å·²ç»å‡ºç‰ˆï¼Œå…³æ³¨å…¬ä¼—å·æŸ¥çœ‹è¯¦æƒ…ï¼›åå°å›å¤å…³é”®è¯ã€Œ**è¿›ç¾¤**ã€å¯åŠ å…¥ç®—æ³•ç¾¤ï¼›å›å¤ã€Œ**å…¨å®¶æ¡¶**ã€å¯ä¸‹è½½é…å¥— PDF å’Œåˆ·é¢˜å…¨å®¶æ¡¶**ï¼š

![](https://labuladong.github.io/algo/images/souyisou2.png)

======å…¶ä»–è¯­è¨€ä»£ç ======

[78.å­é›†](https://leetcode-cn.com/problems/subsets)

[46.å…¨æ’åˆ—](https://leetcode-cn.com/problems/permutations)

[77.ç»„åˆ](https://leetcode-cn.com/problems/combinations)



### java

[userLF](https://github.com/userLF)æä¾›å…¨æ’åˆ—çš„javaä»£ç ï¼š

```java
import java.util.ArrayList;
import java.util.List;

class Solution {
  List<List<Integer>> res = new ArrayList<>();
  public List<List<Integer>> permute(int[] nums) {
    res.clear();
    dfs(nums, 0);//
    return res;
  }

  public void dfs(int[] n, int start) {//startè¡¨ç¤ºè¦è¢«æ›¿æ¢å…ƒç´ çš„ä½ç½®
    if( start >= n.length) {
      List<Integer> list = new ArrayList<Integer>();
      for(int i : n) {
        list.add(i);
      }
      res.add(list);
      return;
    }

    for(int i = start; i< n.length; i++) {//iä»startå¼€å§‹ï¼Œå¦‚æœä»start+1å¼€å§‹çš„è¯ï¼Œä¼šæŠŠå½“å‰åºåˆ—é—æ¼æ‰ç›´æ¥ä¿å­˜äº†ä¸‹ä¸€ä¸ªåºåˆ—
      int temp= n[i];
      n[i] = n[start];
      n[start] = temp;
      dfs(n, start + 1);//é€’å½’ä¸‹ä¸€ä¸ªä½ç½®
      //å›åˆ°ä¸Šä¸€ä¸ªçŠ¶æ€
      n[start] = n[i];
      n[i] = temp;
    }
  }
}

```



### javascript

[ä¼ é€é—¨ï¼š78. å­é›†](https://leetcode-cn.com/problems/subsets/)

æ•°å­¦å½’çº³æ€æƒ³

```js
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var subsets = function (nums) {
    // base case, è¿”å›ä¸€ä¸ªç©ºé›†
    if (nums.length === 0) {
        return [[]]
    }

    // æŠŠæœ€åä¸€ä¸ªå…ƒç´ æ‹¿å‡ºæ¥
    let n = nums.pop();

    // é€’å½’ç®—å‡ºå‰é¢å…ƒç´ çš„æ‰€æœ‰å­é›†
    let res = subsets(nums);

    let size = res.length;

    for (let i = 0; i < size; i++) {
        // ç„¶ååœ¨ä¹‹å‰çš„ç»“æœä¹‹ä¸Šè¿½åŠ 
        res.push(res[i]);
        res[res.length - 1].push(n);
    }

    return res;
}
```

å›æº¯æ€æƒ³

```js
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
const subsets = (nums) => {
  // 1. è®¾ç½®ç»“æœé›†
  const result = [[]];

  // 2. æ•°ç»„æ’åº
  nums.sort((a, b) => a - b);

  // 3. é€’å½’
  const recursion = (index, path) => {
    // 3.1 è®¾ç½®ç»ˆæ­¢æ¡ä»¶
    if (path.length === nums.length) {
      return;
    }

    // 3.2 éå†æ•°ç»„
    for (let i = index; i < nums.length; i++) {
      // 3.2.1 æ·»åŠ å†…å®¹
      path.push(nums[i]);

      // 3.2.2 æ·»åŠ ç»“æœé›†
      result.push(path.concat());

      // 3.2.3 è¿›ä¸€æ­¥é€’å½’
      recursion(i + 1, path);

      // 3.2.4 å›æº¯ï¼Œè¿˜åŸä¹‹å‰çŠ¶æ€ï¼Œä»¥å¤‡ä¸‹ä¸€æ¬¡ä½¿ç”¨
      path.pop();
    }
  };
  recursion(0, []);

  // 4. è¿”å›ç»“æœ
  return result;
};
console.log(subsets([1, 2, 3]));
```



[ä¼ é€é—¨ï¼š46.å…¨æ’åˆ—](https://leetcode-cn.com/problems/permutations)

ä¸å¾—ä¸è¯´ï¼Œç”¨jså®ç°é€’å½’æ€»æ˜¯èƒ½é‡ä¸Šå¾ˆå¤šå‘ï¼Œå…¶ä¸­å¤šåŠéƒ½æ˜¯jså†…ç½®å‡½æ•°å’Œå¼•ç”¨é—®é¢˜çš„å‘ã€‚çœ‹å®Œæœ¬æ–‡ï¼Œä½ å¾ˆå®¹æ˜“å°±èƒ½å†™å…¥å¦‚ä¸‹çš„jsè§£æ³•ï¼Œä½†ç»“æœæ”¾åˆ°leetcodeä¸€è·‘ï¼Œè¾“å‡ºå´ååˆ†è¿·æƒ‘ã€‚

```js
let res = []
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permute = function (nums) {
    let track = [];
    backtrack(nums, track);
    return res;
};


var backtrack = function (nums, track) {
    // è§¦å‘ç»“æŸæ¡ä»¶
    if (track.length === nums.length) {
        res.push(track)
        return;
    }

    for (let i = 0; i < nums.length; i++) {
        // æ’é™¤ä¸åˆæ³•çš„é€‰æ‹©
        if (track.indexOf(nums[i]) > -1) {
            continue;
        }

        // åšé€‰æ‹©
        track.push(nums[i]);

        // è¿›å…¥ä¸‹ä¸€å±‚å†³ç­–æ ‘
        backtrack(nums, track);

        // å–æ¶ˆé€‰æ‹©
        track.pop()
    }
}
```

```
è¾“å…¥ï¼š[1,2,3]
è¾“å‡ºç»“æœï¼š[[],[],[],[],[],[]]
é¢„æœŸç»“æœï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
```

ç»è¿‡å€Ÿé‰´å’Œæ”¹è¿›åï¼Œæ— bugå†™æ³•å¦‚ä¸‹ã€‚

```js
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permute = function(nums){
    // 1. è®¾ç½®ç»“æœé›†
    const result = [];

    // 2. å›æº¯
    const recursion = (path, set) => {
        // 2.1 è®¾ç½®å›æº¯ç»ˆæ­¢æ¡ä»¶
        if (path.length === nums.length) {

            // 2.1.1 æ¨å…¥ç»“æœé›†
            result.push(path.concat());

            // 2.1.2 ç»ˆæ­¢é€’å½’
            return;
        }

        // 2.2 éå†æ•°ç»„
        for (let i = 0; i < nums.length; i++) {

            // 2.2.1 å¿…é¡»æ˜¯ä¸å­˜åœ¨ set ä¸­çš„åæ ‡
            if (!set.has(i)) {

                // 2.2.2 æœ¬åœ°é€’å½’æ¡ä»¶ï¼ˆç”¨å®Œè®°å¾—åˆ é™¤ï¼‰
                path.push(nums[i]);
                set.add(i);

                // 2.2.3 è¿›ä¸€æ­¥é€’å½’
                recursion(path, set);

                // 2.2.4 å›æº¯ï¼šæ’¤å› 2.2.2 çš„æ“ä½œ
                path.pop();
                set.delete(i);
            }
        }
    };
  
    recursion([], new Set());

    // 3. è¿”å›ç»“æœ
    return result;
};

```

çœ‹åˆ°è¿™ï¼Œæ‰æç„¶å¤§æ‚Ÿï¼ŒåŸæ¥æ˜¯åœ¨ 2.1.1 æ¨å…¥ç»“æœé›†çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨concatæ¥å®ç°æ•°ç»„çš„æµ…å¤åˆ¶ï¼Œå¹¶åŠ å…¥åˆ°resultç»“æœé›†ä¸­ï¼Œä¸ç„¶ä¼šå› ä¸ºå¼•ç”¨é—®é¢˜è€Œå¯¼è‡´ç»“æœé›†ä¸­éƒ½æ˜¯ç©ºlistã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜è¦æ³¨æ„æ ¼å¤–letå—çº§ä½œç”¨åŸŸï¼Œåœ¨ä½œç”¨åŸŸå¤–æ˜¯æ‰¾ä¸åˆ°çš„ï¼

[ä¼ é€é—¨ï¼š77.ç»„åˆ](https://leetcode-cn.com/problems/combinations)

```js
var combine = function (n, k) {

    const res = []

    if (k <= 0 || n <= 0) return res;

    const track = [];


    const backtrack = (n, k, start, track) => {
        // åˆ°è¾¾æ ‘çš„åº•éƒ¨
        if (k === track.length) {
            res.push(track.concat());
            return;
        }

        // æ³¨æ„iä»startå¼€å§‹é€’å¢
        for (let i = start; i <= n; i++) {
            // åšé€‰æ‹©
            track.push(i);
            backtrack(n, k, i + 1, track);

            // æ’¤é”€é€‰æ‹©
            track.pop();
        }
    }


    backtrack(n, k, 1, track);

    return res;
};
```

